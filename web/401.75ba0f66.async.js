(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[401],{97432:function(){},81024:function(){},46675:function(){},82404:function(re,J,W){"use strict";W.d(J,{Z:function(){return n}});var K=W(4763),q=W(3066),D=W(67294),I=W(35510),l=W.n(I),y=W(26670),u=W(67170),p=function(h,_){var m={};for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&_.indexOf(g)<0&&(m[g]=h[g]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,g=Object.getOwnPropertySymbols(h);S<g.length;S++)_.indexOf(g[S])<0&&Object.prototype.propertyIsEnumerable.call(h,g[S])&&(m[g[S]]=h[g[S]]);return m},d=function(_){var m=_.prefixCls,g=_.className,S=_.hoverable,C=S===void 0?!0:S,k=p(_,["prefixCls","className","hoverable"]);return D.createElement(u.C,null,function(L){var A=L.getPrefixCls,w=A("card",m),b=l()("".concat(w,"-grid"),g,(0,K.Z)({},"".concat(w,"-grid-hoverable"),C));return D.createElement("div",(0,q.Z)({},k,{className:b}))})},f=d,E=function(h,_){var m={};for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&_.indexOf(g)<0&&(m[g]=h[g]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,g=Object.getOwnPropertySymbols(h);S<g.length;S++)_.indexOf(g[S])<0&&Object.prototype.propertyIsEnumerable.call(h,g[S])&&(m[g[S]]=h[g[S]]);return m},v=function(_){return D.createElement(u.C,null,function(m){var g=m.getPrefixCls,S=_.prefixCls,C=_.className,k=_.avatar,L=_.title,A=_.description,w=E(_,["prefixCls","className","avatar","title","description"]),b=g("card",S),P=l()("".concat(b,"-meta"),C),R=k?D.createElement("div",{className:"".concat(b,"-meta-avatar")},k):null,j=L?D.createElement("div",{className:"".concat(b,"-meta-title")},L):null,H=A?D.createElement("div",{className:"".concat(b,"-meta-description")},A):null,F=j||H?D.createElement("div",{className:"".concat(b,"-meta-detail")},j,H):null;return D.createElement("div",(0,q.Z)({},w,{className:P}),R,F)})},a=v,c=W(52311),o=W(87555),t=W(65507),r=W(10772),e=function(h,_){var m={};for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&_.indexOf(g)<0&&(m[g]=h[g]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,g=Object.getOwnPropertySymbols(h);S<g.length;S++)_.indexOf(g[S])<0&&Object.prototype.propertyIsEnumerable.call(h,g[S])&&(m[g[S]]=h[g[S]]);return m};function i(h){var _=h.map(function(m,g){return D.createElement("li",{style:{width:"".concat(100/h.length,"%")},key:"action-".concat(g)},D.createElement("span",null,m))});return _}var s=function(_){var m,g,S=D.useContext(u.E_),C=S.getPrefixCls,k=S.direction,L=D.useContext(r.Z),A=function(ae){var ne;(ne=_.onTabChange)===null||ne===void 0||ne.call(_,ae)},w=function(){var ae;return D.Children.forEach(_.children,function(ne){ne&&ne.type&&ne.type===f&&(ae=!0)}),ae},b=_.prefixCls,P=_.className,R=_.extra,j=_.headStyle,H=j===void 0?{}:j,F=_.bodyStyle,Z=F===void 0?{}:F,V=_.title,x=_.loading,O=_.bordered,T=O===void 0?!0:O,B=_.size,M=_.type,U=_.cover,N=_.actions,X=_.tabList,Y=_.children,ee=_.activeTabKey,z=_.defaultActiveTabKey,G=_.tabBarExtraContent,Q=_.hoverable,te=_.tabProps,oe=te===void 0?{}:te,fe=e(_,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),$=C("card",b),_e=Z.padding===0||Z.padding==="0px"?{padding:24}:void 0,ie=D.createElement("div",{className:"".concat($,"-loading-block")}),de=D.createElement("div",{className:"".concat($,"-loading-content"),style:_e},D.createElement(o.Z,{gutter:8},D.createElement(t.Z,{span:22},ie)),D.createElement(o.Z,{gutter:8},D.createElement(t.Z,{span:8},ie),D.createElement(t.Z,{span:15},ie)),D.createElement(o.Z,{gutter:8},D.createElement(t.Z,{span:6},ie),D.createElement(t.Z,{span:18},ie)),D.createElement(o.Z,{gutter:8},D.createElement(t.Z,{span:13},ie),D.createElement(t.Z,{span:9},ie)),D.createElement(o.Z,{gutter:8},D.createElement(t.Z,{span:4},ie),D.createElement(t.Z,{span:3},ie),D.createElement(t.Z,{span:16},ie))),ce=ee!==void 0,pe=(0,q.Z)((0,q.Z)({},oe),(m={},(0,K.Z)(m,ce?"activeKey":"defaultActiveKey",ce?ee:z),(0,K.Z)(m,"tabBarExtraContent",G),m)),le,he=X&&X.length?D.createElement(c.Z,(0,q.Z)({size:"large"},pe,{className:"".concat($,"-head-tabs"),onChange:A}),X.map(function(se){return D.createElement(c.Z.TabPane,{tab:se.tab,disabled:se.disabled,key:se.key})})):null;(V||R||he)&&(le=D.createElement("div",{className:"".concat($,"-head"),style:H},D.createElement("div",{className:"".concat($,"-head-wrapper")},V&&D.createElement("div",{className:"".concat($,"-head-title")},V),R&&D.createElement("div",{className:"".concat($,"-extra")},R)),he));var ve=U?D.createElement("div",{className:"".concat($,"-cover")},U):null,ge=D.createElement("div",{className:"".concat($,"-body"),style:Z},x?de:Y),ye=N&&N.length?D.createElement("ul",{className:"".concat($,"-actions")},i(N)):null,me=(0,y.Z)(fe,["onTabChange"]),ue=B||L,be=l()($,(g={},(0,K.Z)(g,"".concat($,"-loading"),x),(0,K.Z)(g,"".concat($,"-bordered"),T),(0,K.Z)(g,"".concat($,"-hoverable"),Q),(0,K.Z)(g,"".concat($,"-contain-grid"),w()),(0,K.Z)(g,"".concat($,"-contain-tabs"),X&&X.length),(0,K.Z)(g,"".concat($,"-").concat(ue),ue),(0,K.Z)(g,"".concat($,"-type-").concat(M),!!M),(0,K.Z)(g,"".concat($,"-rtl"),k==="rtl"),g),P);return D.createElement("div",(0,q.Z)({},me,{className:be}),le,ve,ge,ye)};s.Grid=f,s.Meta=a;var n=s},12399:function(re,J,W){"use strict";var K=W(43673),q=W.n(K),D=W(97432),I=W.n(D),l=W(84786),y=W(5317),u=W(52222)},28930:function(re,J,W){"use strict";var K=W(3066),q=W(19877),D=W(67294),I=W(35510),l=W.n(I),y=W(82321),u=W(68855),p=W(90826),d=W(82692),f=W(48429),E=W(96006),v=W(56701),a=W(16980),c=W(67170),o=W(95832),t=W(75447),r=W(31064),e=void 0,i=function(n,h){var _={};for(var m in n)Object.prototype.hasOwnProperty.call(n,m)&&h.indexOf(m)<0&&(_[m]=n[m]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,m=Object.getOwnPropertySymbols(n);g<m.length;g++)h.indexOf(m[g])<0&&Object.prototype.propertyIsEnumerable.call(n,m[g])&&(_[m[g]]=n[m[g]]);return _},s=D.forwardRef(function(n,h){var _=(0,y.Z)(!1,{value:n.visible,defaultValue:n.defaultVisible}),m=(0,q.Z)(_,2),g=m[0],S=m[1],C=function(N,X){var Y;S(N),(Y=n.onVisibleChange)===null||Y===void 0||Y.call(n,N,X)},k=function(N){var X;C(!1,N),(X=n.onConfirm)===null||X===void 0||X.call(e,N)},L=function(N){var X;C(!1,N),(X=n.onCancel)===null||X===void 0||X.call(e,N)},A=function(N){N.keyCode===p.Z.ESC&&g&&C(!1,N)},w=function(N){var X=n.disabled;X||C(N)},b=function(N,X){var Y=n.okButtonProps,ee=n.cancelButtonProps,z=n.title,G=n.cancelText,Q=n.okText,te=n.okType,oe=n.icon;return D.createElement("div",{className:"".concat(N,"-inner-content")},D.createElement("div",{className:"".concat(N,"-message")},oe,D.createElement("div",{className:"".concat(N,"-message-title")},(0,o.Z)(z))),D.createElement("div",{className:"".concat(N,"-buttons")},D.createElement(f.Z,(0,K.Z)({onClick:L,size:"small"},ee),G||X.cancelText),D.createElement(f.Z,(0,K.Z)({onClick:k},(0,E.n)(te),{size:"small"},Y),Q||X.okText)))},P=D.useContext(c.E_),R=P.getPrefixCls,j=n.prefixCls,H=n.placement,F=n.children,Z=n.overlayClassName,V=i(n,["prefixCls","placement","children","overlayClassName"]),x=R("popover",j),O=R("popconfirm",j),T=l()(O,Z),B=D.createElement(v.Z,{componentName:"Popconfirm",defaultLocale:a.Z.Popconfirm},function(U){return b(x,U)}),M=R();return D.createElement(d.Z,(0,K.Z)({},V,{prefixCls:x,placement:H,onVisibleChange:w,visible:g,overlay:B,overlayClassName:T,ref:h,transitionName:(0,r.m)(M,"zoom-big",n.transitionName)}),(0,t.Tm)(F,{onKeyDown:function(N){var X,Y;D.isValidElement(F)&&((Y=F==null?void 0:(X=F.props).onKeyDown)===null||Y===void 0||Y.call(X,N)),A(N)}}))});s.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:D.createElement(u.Z,null),disabled:!1},J.Z=s},43623:function(re,J,W){"use strict";var K=W(43673),q=W.n(K),D=W(34276),I=W(13753),l=W(81024),y=W.n(l)},45733:function(re,J,W){"use strict";W.d(J,{u:function(){return v},Z:function(){return t}});var K=W(3066),q=W(4763),D=W(19877),I=W(67294),l=W(35510),y=W.n(l),u=W(10048),p=W(67170);function d(r){var e=r.className,i=r.direction,s=r.index,n=r.marginDirection,h=r.children,_=r.split,m=r.wrap,g=I.useContext(v),S=g.horizontalSize,C=g.verticalSize,k=g.latestIndex,L=g.supportFlexGap,A={};return L||(i==="vertical"?s<k&&(A={marginBottom:S/(_?2:1)}):A=(0,K.Z)((0,K.Z)({},s<k&&(0,q.Z)({},n,S/(_?2:1))),m&&{paddingBottom:C})),h==null?null:I.createElement(I.Fragment,null,I.createElement("div",{className:e,style:A},h),s<k&&_&&I.createElement("span",{className:"".concat(e,"-split"),style:A},_))}var f=W(75675),E=function(r,e){var i={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(i[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(i[s[n]]=r[s[n]]);return i},v=I.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),a={small:8,middle:16,large:24};function c(r){return typeof r=="string"?a[r]:r||0}var o=function(e){var i,s=I.useContext(p.E_),n=s.getPrefixCls,h=s.space,_=s.direction,m=e.size,g=m===void 0?(h==null?void 0:h.size)||"small":m,S=e.align,C=e.className,k=e.children,L=e.direction,A=L===void 0?"horizontal":L,w=e.prefixCls,b=e.split,P=e.style,R=e.wrap,j=R===void 0?!1:R,H=E(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),F=(0,f.Z)(),Z=I.useMemo(function(){return(Array.isArray(g)?g:[g,g]).map(function(Q){return c(Q)})},[g]),V=(0,D.Z)(Z,2),x=V[0],O=V[1],T=(0,u.Z)(k,{keepEmpty:!0}),B=S===void 0&&A==="horizontal"?"center":S,M=n("space",w),U=y()(M,"".concat(M,"-").concat(A),(i={},(0,q.Z)(i,"".concat(M,"-rtl"),_==="rtl"),(0,q.Z)(i,"".concat(M,"-align-").concat(B),B),i),C),N="".concat(M,"-item"),X=_==="rtl"?"marginLeft":"marginRight",Y=0,ee=T.map(function(Q,te){return Q!=null&&(Y=te),I.createElement(d,{className:N,key:"".concat(N,"-").concat(te),direction:A,index:te,marginDirection:X,split:b,wrap:j},Q)}),z=I.useMemo(function(){return{horizontalSize:x,verticalSize:O,latestIndex:Y,supportFlexGap:F}},[x,O,Y,F]);if(T.length===0)return null;var G={};return j&&(G.flexWrap="wrap",F||(G.marginBottom=-O)),F&&(G.columnGap=x,G.rowGap=O),I.createElement("div",(0,K.Z)({className:U,style:(0,K.Z)((0,K.Z)({},G),P)},H),I.createElement(v.Provider,{value:z},ee))},t=o},25324:function(re,J,W){"use strict";var K=W(43673),q=W.n(K),D=W(46675),I=W.n(D)},11534:function(re){(function(J,W){re.exports=W()})(self,function(){return function(){"use strict";var J={775:function(q,D){Object.defineProperty(D,"__esModule",{value:!0}),D.FitAddon=void 0;var I=function(){function l(){}return l.prototype.activate=function(y){this._terminal=y},l.prototype.dispose=function(){},l.prototype.fit=function(){var y=this.proposeDimensions();if(y&&this._terminal){var u=this._terminal._core;this._terminal.rows===y.rows&&this._terminal.cols===y.cols||(u._renderService.clear(),this._terminal.resize(y.cols,y.rows))}},l.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var y=this._terminal._core;if(y._renderService.dimensions.actualCellWidth!==0&&y._renderService.dimensions.actualCellHeight!==0){var u=window.getComputedStyle(this._terminal.element.parentElement),p=parseInt(u.getPropertyValue("height")),d=Math.max(0,parseInt(u.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),E=p-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),v=d-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-y.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(v/y._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(E/y._renderService.dimensions.actualCellHeight))}}}},l}();D.FitAddon=I}},W={};return function K(q){if(W[q])return W[q].exports;var D=W[q]={exports:{}};return J[q](D,D.exports,K),D.exports}(775)}()})},40760:function(re){(function(J,W){re.exports=W()})(window,function(){return function(J){var W={};function K(q){if(W[q])return W[q].exports;var D=W[q]={i:q,l:!1,exports:{}};return J[q].call(D.exports,D,D.exports,K),D.l=!0,D.exports}return K.m=J,K.c=W,K.d=function(q,D,I){K.o(q,D)||Object.defineProperty(q,D,{enumerable:!0,get:I})},K.r=function(q){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(q,"__esModule",{value:!0})},K.t=function(q,D){if(1&D&&(q=K(q)),8&D||4&D&&typeof q=="object"&&q&&q.__esModule)return q;var I=Object.create(null);if(K.r(I),Object.defineProperty(I,"default",{enumerable:!0,value:q}),2&D&&typeof q!="string")for(var l in q)K.d(I,l,function(y){return q[y]}.bind(null,l));return I},K.n=function(q){var D=q&&q.__esModule?function(){return q.default}:function(){return q};return K.d(D,"a",D),D},K.o=function(q,D){return Object.prototype.hasOwnProperty.call(q,D)},K.p="",K(K.s=0)}([function(J,W,K){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.WebLinksAddon=void 0;var q=K(1),D=new RegExp(`(?:^|[^\\da-z\\.-]+)((https?:\\/\\/)((([\\da-z\\.-]+)\\.([a-z\\.]{2,6}))|((\\d{1,3}\\.){3}\\d{1,3})|(localhost))(:\\d{1,5})?((\\/[\\/\\w\\.\\-%~:+@]*)*([^:"'\\s]))?(\\?[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?(#[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?)($|[^\\/\\w\\.\\-%]+)`);function I(y,u){var p=window.open();p?(p.opener=null,p.location.href=u):console.warn("Opening link blocked as opener could not be cleared")}var l=function(){function y(u,p,d){u===void 0&&(u=I),p===void 0&&(p={}),d===void 0&&(d=!1),this._handler=u,this._options=p,this._useLinkProvider=d,this._options.matchIndex=1}return y.prototype.activate=function(u){this._terminal=u,this._useLinkProvider&&"registerLinkProvider"in this._terminal?this._linkProvider=this._terminal.registerLinkProvider(new q.WebLinkProvider(this._terminal,D,this._handler)):this._linkMatcherId=this._terminal.registerLinkMatcher(D,this._handler,this._options)},y.prototype.dispose=function(){var u;this._linkMatcherId!==void 0&&this._terminal!==void 0&&this._terminal.deregisterLinkMatcher(this._linkMatcherId),(u=this._linkProvider)===null||u===void 0||u.dispose()},y}();W.WebLinksAddon=l},function(J,W,K){"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.LinkComputer=W.WebLinkProvider=void 0;var q=function(){function I(l,y,u){this._terminal=l,this._regex=y,this._handler=u}return I.prototype.provideLinks=function(l,y){y(D.computeLink(l,this._regex,this._terminal,this._handler))},I}();W.WebLinkProvider=q;var D=function(){function I(){}return I.computeLink=function(l,y,u,p){for(var d,f=new RegExp(y.source,(y.flags||"")+"g"),E=I._translateBufferLineToStringWithWrap(l-1,!1,u),v=E[0],a=E[1],c=-1,o=[];(d=f.exec(v))!==null;){var t=d[1];if(!t){console.log("match found without corresponding matchIndex");break}if(c=v.indexOf(t,c+1),f.lastIndex=c+t.length,c<0)break;for(var r=c+t.length,e=a+1;r>u.cols;)r-=u.cols,e++;var i={start:{x:c+1,y:a+1},end:{x:r,y:e}};o.push({range:i,text:t,activate:p})}return o},I._translateBufferLineToStringWithWrap=function(l,y,u){var p,d,f="";do{if(!(v=u.buffer.active.getLine(l)))break;v.isWrapped&&l--,d=v.isWrapped}while(d);var E=l;do{var v,a=u.buffer.active.getLine(l+1);if(p=!!a&&a.isWrapped,!(v=u.buffer.active.getLine(l)))break;f+=v.translateToString(!p&&y).substring(0,u.cols),l++}while(p);return[f,E]},I}();W.LinkComputer=D}])})},9295:function(re){(function(J,W){if(!0)re.exports=W();else var K,q})(self,function(){return function(){"use strict";var J={4567:function(I,l,y){var u,p=this&&this.__extends||(u=function(e,i){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var h in n)Object.prototype.hasOwnProperty.call(n,h)&&(s[h]=n[h])})(e,i)},function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=r}u(r,e),r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.AccessibilityManager=void 0;var d=y(9042),f=y(6114),E=y(6193),v=y(3656),a=y(844),c=y(5596),o=y(9631),t=function(r){function e(i,s){var n=r.call(this)||this;n._terminal=i,n._renderService=s,n._liveRegionLineCount=0,n._charsToConsume=[],n._charsToAnnounce="",n._accessibilityTreeRoot=document.createElement("div"),n._accessibilityTreeRoot.classList.add("xterm-accessibility"),n._rowContainer=document.createElement("div"),n._rowContainer.setAttribute("role","list"),n._rowContainer.classList.add("xterm-accessibility-tree"),n._rowElements=[];for(var h=0;h<n._terminal.rows;h++)n._rowElements[h]=n._createAccessibilityTreeNode(),n._rowContainer.appendChild(n._rowElements[h]);if(n._topBoundaryFocusListener=function(_){return n._onBoundaryFocus(_,0)},n._bottomBoundaryFocusListener=function(_){return n._onBoundaryFocus(_,1)},n._rowElements[0].addEventListener("focus",n._topBoundaryFocusListener),n._rowElements[n._rowElements.length-1].addEventListener("focus",n._bottomBoundaryFocusListener),n._refreshRowsDimensions(),n._accessibilityTreeRoot.appendChild(n._rowContainer),n._renderRowsDebouncer=new E.RenderDebouncer(n._renderRows.bind(n)),n._refreshRows(),n._liveRegion=document.createElement("div"),n._liveRegion.classList.add("live-region"),n._liveRegion.setAttribute("aria-live","assertive"),n._accessibilityTreeRoot.appendChild(n._liveRegion),!n._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return n._terminal.element.insertAdjacentElement("afterbegin",n._accessibilityTreeRoot),n.register(n._renderRowsDebouncer),n.register(n._terminal.onResize(function(_){return n._onResize(_.rows)})),n.register(n._terminal.onRender(function(_){return n._refreshRows(_.start,_.end)})),n.register(n._terminal.onScroll(function(){return n._refreshRows()})),n.register(n._terminal.onA11yChar(function(_){return n._onChar(_)})),n.register(n._terminal.onLineFeed(function(){return n._onChar(`
`)})),n.register(n._terminal.onA11yTab(function(_){return n._onTab(_)})),n.register(n._terminal.onKey(function(_){return n._onKey(_.key)})),n.register(n._terminal.onBlur(function(){return n._clearLiveRegion()})),n.register(n._renderService.onDimensionsChange(function(){return n._refreshRowsDimensions()})),n._screenDprMonitor=new c.ScreenDprMonitor,n.register(n._screenDprMonitor),n._screenDprMonitor.setListener(function(){return n._refreshRowsDimensions()}),n.register(v.addDisposableDomListener(window,"resize",function(){return n._refreshRowsDimensions()})),n}return p(e,r),e.prototype.dispose=function(){r.prototype.dispose.call(this),o.removeElementFromParent(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(i,s){var n=i.target,h=this._rowElements[s===0?1:this._rowElements.length-2];if(n.getAttribute("aria-posinset")!==(s===0?"1":""+this._terminal.buffer.lines.length)&&i.relatedTarget===h){var _,m;if(s===0?(_=n,m=this._rowElements.pop(),this._rowContainer.removeChild(m)):(_=this._rowElements.shift(),m=n,this._rowContainer.removeChild(_)),_.removeEventListener("focus",this._topBoundaryFocusListener),m.removeEventListener("focus",this._bottomBoundaryFocusListener),s===0){var g=this._createAccessibilityTreeNode();this._rowElements.unshift(g),this._rowContainer.insertAdjacentElement("afterbegin",g)}else g=this._createAccessibilityTreeNode(),this._rowElements.push(g),this._rowContainer.appendChild(g);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(s===0?-1:1),this._rowElements[s===0?1:this._rowElements.length-2].focus(),i.preventDefault(),i.stopImmediatePropagation()}},e.prototype._onResize=function(i){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var s=this._rowContainer.children.length;s<this._terminal.rows;s++)this._rowElements[s]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[s]);for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var i=document.createElement("div");return i.setAttribute("role","listitem"),i.tabIndex=-1,this._refreshRowDimensions(i),i},e.prototype._onTab=function(i){for(var s=0;s<i;s++)this._onChar(" ")},e.prototype._onChar=function(i){var s=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==i&&(this._charsToAnnounce+=i):this._charsToAnnounce+=i,i===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)),f.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){s._accessibilityTreeRoot.appendChild(s._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,f.isMac&&o.removeElementFromParent(this._liveRegion)},e.prototype._onKey=function(i){this._clearLiveRegion(),this._charsToConsume.push(i)},e.prototype._refreshRows=function(i,s){this._renderRowsDebouncer.refresh(i,s,this._terminal.rows)},e.prototype._renderRows=function(i,s){for(var n=this._terminal.buffer,h=n.lines.length.toString(),_=i;_<=s;_++){var m=n.translateBufferLineToString(n.ydisp+_,!0),g=(n.ydisp+_+1).toString(),S=this._rowElements[_];S&&(m.length===0?S.innerText="\xA0":S.textContent=m,S.setAttribute("aria-posinset",g),S.setAttribute("aria-setsize",h))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var i=0;i<this._terminal.rows;i++)this._refreshRowDimensions(this._rowElements[i])}},e.prototype._refreshRowDimensions=function(i){i.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(a.Disposable);l.AccessibilityManager=t},3614:function(I,l){function y(f){return f.replace(/\r?\n/g,"\r")}function u(f,E){return E?"[200~"+f+"[201~":f}function p(f,E,v){f=u(f=y(f),v.decPrivateModes.bracketedPasteMode),v.triggerDataEvent(f,!0),E.value=""}function d(f,E,v){var a=v.getBoundingClientRect(),c=f.clientX-a.left-10,o=f.clientY-a.top-10;E.style.width="20px",E.style.height="20px",E.style.left=c+"px",E.style.top=o+"px",E.style.zIndex="1000",E.focus()}Object.defineProperty(l,"__esModule",{value:!0}),l.rightClickHandler=l.moveTextAreaUnderMouseCursor=l.paste=l.handlePasteEvent=l.copyHandler=l.bracketTextForPaste=l.prepareTextForTerminal=void 0,l.prepareTextForTerminal=y,l.bracketTextForPaste=u,l.copyHandler=function(f,E){f.clipboardData&&f.clipboardData.setData("text/plain",E.selectionText),f.preventDefault()},l.handlePasteEvent=function(f,E,v){f.stopPropagation(),f.clipboardData&&p(f.clipboardData.getData("text/plain"),E,v)},l.paste=p,l.moveTextAreaUnderMouseCursor=d,l.rightClickHandler=function(f,E,v,a,c){d(f,E,v),c&&a.rightClickSelect(f),E.value=a.selectionText,E.select()}},4774:function(I,l){var y,u,p,d;function f(v){var a=v.toString(16);return a.length<2?"0"+a:a}function E(v,a){return v<a?(a+.05)/(v+.05):(v+.05)/(a+.05)}Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=void 0,function(v){v.toCss=function(a,c,o,t){return t!==void 0?"#"+f(a)+f(c)+f(o)+f(t):"#"+f(a)+f(c)+f(o)},v.toRgba=function(a,c,o,t){return t===void 0&&(t=255),(a<<24|c<<16|o<<8|t)>>>0}}(y=l.channels||(l.channels={})),(u=l.color||(l.color={})).blend=function(v,a){var c=(255&a.rgba)/255;if(c===1)return{css:a.css,rgba:a.rgba};var o=a.rgba>>24&255,t=a.rgba>>16&255,r=a.rgba>>8&255,e=v.rgba>>24&255,i=v.rgba>>16&255,s=v.rgba>>8&255,n=e+Math.round((o-e)*c),h=i+Math.round((t-i)*c),_=s+Math.round((r-s)*c);return{css:y.toCss(n,h,_),rgba:y.toRgba(n,h,_)}},u.isOpaque=function(v){return(255&v.rgba)==255},u.ensureContrastRatio=function(v,a,c){var o=d.ensureContrastRatio(v.rgba,a.rgba,c);if(o)return d.toColor(o>>24&255,o>>16&255,o>>8&255)},u.opaque=function(v){var a=(255|v.rgba)>>>0,c=d.toChannels(a),o=c[0],t=c[1],r=c[2];return{css:y.toCss(o,t,r),rgba:a}},u.opacity=function(v,a){var c=Math.round(255*a),o=d.toChannels(v.rgba),t=o[0],r=o[1],e=o[2];return{css:y.toCss(t,r,e,c),rgba:y.toRgba(t,r,e,c)}},(l.css||(l.css={})).toColor=function(v){switch(v.length){case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(v){function a(c,o,t){var r=c/255,e=o/255,i=t/255;return .2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}v.relativeLuminance=function(c){return a(c>>16&255,c>>8&255,255&c)},v.relativeLuminance2=a}(p=l.rgb||(l.rgb={})),function(v){function a(o,t,r){for(var e=o>>24&255,i=o>>16&255,s=o>>8&255,n=t>>24&255,h=t>>16&255,_=t>>8&255,m=E(p.relativeLuminance2(n,_,h),p.relativeLuminance2(e,i,s));m<r&&(n>0||h>0||_>0);)n-=Math.max(0,Math.ceil(.1*n)),h-=Math.max(0,Math.ceil(.1*h)),_-=Math.max(0,Math.ceil(.1*_)),m=E(p.relativeLuminance2(n,_,h),p.relativeLuminance2(e,i,s));return(n<<24|h<<16|_<<8|255)>>>0}function c(o,t,r){for(var e=o>>24&255,i=o>>16&255,s=o>>8&255,n=t>>24&255,h=t>>16&255,_=t>>8&255,m=E(p.relativeLuminance2(n,_,h),p.relativeLuminance2(e,i,s));m<r&&(n<255||h<255||_<255);)n=Math.min(255,n+Math.ceil(.1*(255-n))),h=Math.min(255,h+Math.ceil(.1*(255-h))),_=Math.min(255,_+Math.ceil(.1*(255-_))),m=E(p.relativeLuminance2(n,_,h),p.relativeLuminance2(e,i,s));return(n<<24|h<<16|_<<8|255)>>>0}v.ensureContrastRatio=function(o,t,r){var e=p.relativeLuminance(o>>8),i=p.relativeLuminance(t>>8);if(E(e,i)<r)return i<e?a(o,t,r):c(o,t,r)},v.reduceLuminance=a,v.increaseLuminance=c,v.toChannels=function(o){return[o>>24&255,o>>16&255,o>>8&255,255&o]},v.toColor=function(o,t,r){return{css:y.toCss(o,t,r),rgba:y.toRgba(o,t,r)}}}(d=l.rgba||(l.rgba={})),l.toPaddedHex=f,l.contrastRatio=E},7239:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.ColorContrastCache=void 0;var y=function(){function u(){this._color={},this._rgba={}}return u.prototype.clear=function(){this._color={},this._rgba={}},u.prototype.setCss=function(p,d,f){this._rgba[p]||(this._rgba[p]={}),this._rgba[p][d]=f},u.prototype.getCss=function(p,d){return this._rgba[p]?this._rgba[p][d]:void 0},u.prototype.setColor=function(p,d,f){this._color[p]||(this._color[p]={}),this._color[p][d]=f},u.prototype.getColor=function(p,d){return this._color[p]?this._color[p][d]:void 0},u}();l.ColorContrastCache=y},5680:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.ColorManager=l.DEFAULT_ANSI_COLORS=void 0;var u=y(4774),p=y(7239),d=u.css.toColor("#ffffff"),f=u.css.toColor("#000000"),E=u.css.toColor("#ffffff"),v=u.css.toColor("#000000"),a={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};l.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var o=[u.css.toColor("#2e3436"),u.css.toColor("#cc0000"),u.css.toColor("#4e9a06"),u.css.toColor("#c4a000"),u.css.toColor("#3465a4"),u.css.toColor("#75507b"),u.css.toColor("#06989a"),u.css.toColor("#d3d7cf"),u.css.toColor("#555753"),u.css.toColor("#ef2929"),u.css.toColor("#8ae234"),u.css.toColor("#fce94f"),u.css.toColor("#729fcf"),u.css.toColor("#ad7fa8"),u.css.toColor("#34e2e2"),u.css.toColor("#eeeeec")],t=[0,95,135,175,215,255],r=0;r<216;r++){var e=t[r/36%6|0],i=t[r/6%6|0],s=t[r%6];o.push({css:u.channels.toCss(e,i,s),rgba:u.channels.toRgba(e,i,s)})}for(r=0;r<24;r++){var n=8+10*r;o.push({css:u.channels.toCss(n,n,n),rgba:u.channels.toRgba(n,n,n)})}return o}());var c=function(){function o(t,r){this.allowTransparency=r;var e=t.createElement("canvas");e.width=1,e.height=1;var i=e.getContext("2d");if(!i)throw new Error("Could not get rendering context");this._ctx=i,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new p.ColorContrastCache,this.colors={foreground:d,background:f,cursor:E,cursorAccent:v,selectionTransparent:a,selectionOpaque:u.color.blend(f,a),ansi:l.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return o.prototype.onOptionsChange=function(t){t==="minimumContrastRatio"&&this._contrastCache.clear()},o.prototype.setTheme=function(t){t===void 0&&(t={}),this.colors.foreground=this._parseColor(t.foreground,d),this.colors.background=this._parseColor(t.background,f),this.colors.cursor=this._parseColor(t.cursor,E,!0),this.colors.cursorAccent=this._parseColor(t.cursorAccent,v,!0),this.colors.selectionTransparent=this._parseColor(t.selection,a,!0),this.colors.selectionOpaque=u.color.blend(this.colors.background,this.colors.selectionTransparent),u.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=u.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(t.black,l.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(t.red,l.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(t.green,l.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(t.yellow,l.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(t.blue,l.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(t.magenta,l.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(t.cyan,l.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(t.white,l.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(t.brightBlack,l.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(t.brightRed,l.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(t.brightGreen,l.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(t.brightYellow,l.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(t.brightBlue,l.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(t.brightMagenta,l.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(t.brightCyan,l.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(t.brightWhite,l.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},o.prototype._parseColor=function(t,r,e){if(e===void 0&&(e=this.allowTransparency),t===void 0)return r;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=t,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+t+" is invalid using fallback "+r.css),r;this._ctx.fillRect(0,0,1,1);var i=this._ctx.getImageData(0,0,1,1).data;if(i[3]!==255){if(!e)return console.warn("Color: "+t+" is using transparency, but allowTransparency is false. Using fallback "+r.css+"."),r;var s=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(S){return Number(S)}),n=s[0],h=s[1],_=s[2],m=s[3],g=Math.round(255*m);return{rgba:u.channels.toRgba(n,h,_,g),css:t}}return{css:this._ctx.fillStyle,rgba:u.channels.toRgba(i[0],i[1],i[2],i[3])}},o}();l.ColorManager=c},9631:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.removeElementFromParent=void 0,l.removeElementFromParent=function(){for(var y,u=[],p=0;p<arguments.length;p++)u[p]=arguments[p];for(var d=0,f=u;d<f.length;d++){var E=f[d];(y=E==null?void 0:E.parentElement)===null||y===void 0||y.removeChild(E)}}},3656:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(y,u,p,d){y.addEventListener(u,p,d);var f=!1;return{dispose:function(){f||(f=!0,y.removeEventListener(u,p,d))}}}},3551:function(I,l,y){var u=this&&this.__decorate||function(a,c,o,t){var r,e=arguments.length,i=e<3?c:t===null?t=Object.getOwnPropertyDescriptor(c,o):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,c,o,t);else for(var s=a.length-1;s>=0;s--)(r=a[s])&&(i=(e<3?r(i):e>3?r(c,o,i):r(c,o))||i);return e>3&&i&&Object.defineProperty(c,o,i),i},p=this&&this.__param||function(a,c){return function(o,t){c(o,t,a)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseZone=l.Linkifier=void 0;var d=y(8460),f=y(2585),E=function(){function a(c,o,t){this._bufferService=c,this._logService=o,this._unicodeService=t,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new d.EventEmitter,this._onHideLinkUnderline=new d.EventEmitter,this._onLinkTooltip=new d.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(a.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),a.prototype.attachToDom=function(c,o){this._element=c,this._mouseZoneManager=o},a.prototype.linkifyRows=function(c,o){var t=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=c,this._rowsToLinkify.end=o):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,c),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,o)),this._mouseZoneManager.clearAll(c,o),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return t._linkifyRows()},a._timeBeforeLatency))},a.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var c=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var o=c.ydisp+this._rowsToLinkify.start;if(!(o>=c.lines.length)){for(var t=c.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,r=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,o,t,r,r);e.hasNext();)for(var i=e.next(),s=0;s<this._linkMatchers.length;s++)this._doLinkifyRow(i.range.first,i.content,this._linkMatchers[s]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},a.prototype.registerLinkMatcher=function(c,o,t){if(t===void 0&&(t={}),!o)throw new Error("handler must be defined");var r={id:this._nextLinkMatcherId++,regex:c,handler:o,matchIndex:t.matchIndex,validationCallback:t.validationCallback,hoverTooltipCallback:t.tooltipCallback,hoverLeaveCallback:t.leaveCallback,willLinkActivate:t.willLinkActivate,priority:t.priority||0};return this._addLinkMatcherToList(r),r.id},a.prototype._addLinkMatcherToList=function(c){if(this._linkMatchers.length!==0){for(var o=this._linkMatchers.length-1;o>=0;o--)if(c.priority<=this._linkMatchers[o].priority)return void this._linkMatchers.splice(o+1,0,c);this._linkMatchers.splice(0,0,c)}else this._linkMatchers.push(c)},a.prototype.deregisterLinkMatcher=function(c){for(var o=0;o<this._linkMatchers.length;o++)if(this._linkMatchers[o].id===c)return this._linkMatchers.splice(o,1),!0;return!1},a.prototype._doLinkifyRow=function(c,o,t){for(var r,e=this,i=new RegExp(t.regex.source,(t.regex.flags||"")+"g"),s=-1,n=function(){var m=r[typeof t.matchIndex!="number"?0:t.matchIndex];if(!m)return h._logService.debug("match found without corresponding matchIndex",r,t),"break";if(s=o.indexOf(m,s+1),i.lastIndex=s+m.length,s<0)return"break";var g=h._bufferService.buffer.stringIndexToBufferIndex(c,s);if(g[0]<0)return"break";var S=h._bufferService.buffer.lines.get(g[0]);if(!S)return"break";var C=S.getFg(g[1]),k=C?C>>9&511:void 0;t.validationCallback?t.validationCallback(m,function(L){e._rowsTimeoutId||L&&e._addLink(g[1],g[0]-e._bufferService.buffer.ydisp,m,t,k)}):h._addLink(g[1],g[0]-h._bufferService.buffer.ydisp,m,t,k)},h=this;(r=i.exec(o))!==null&&n()!=="break";);},a.prototype._addLink=function(c,o,t,r,e){var i=this;if(this._mouseZoneManager&&this._element){var s=this._unicodeService.getStringCellWidth(t),n=c%this._bufferService.cols,h=o+Math.floor(c/this._bufferService.cols),_=(n+s)%this._bufferService.cols,m=h+Math.floor((n+s)/this._bufferService.cols);_===0&&(_=this._bufferService.cols,m--),this._mouseZoneManager.add(new v(n+1,h+1,_+1,m+1,function(g){if(r.handler)return r.handler(g,t);var S=window.open();S?(S.opener=null,S.location.href=t):console.warn("Opening link blocked as opener could not be cleared")},function(){i._onShowLinkUnderline.fire(i._createLinkHoverEvent(n,h,_,m,e)),i._element.classList.add("xterm-cursor-pointer")},function(g){i._onLinkTooltip.fire(i._createLinkHoverEvent(n,h,_,m,e)),r.hoverTooltipCallback&&r.hoverTooltipCallback(g,t,{start:{x:n,y:h},end:{x:_,y:m}})},function(){i._onHideLinkUnderline.fire(i._createLinkHoverEvent(n,h,_,m,e)),i._element.classList.remove("xterm-cursor-pointer"),r.hoverLeaveCallback&&r.hoverLeaveCallback()},function(g){return!r.willLinkActivate||r.willLinkActivate(g,t)}))}},a.prototype._createLinkHoverEvent=function(c,o,t,r,e){return{x1:c,y1:o,x2:t,y2:r,cols:this._bufferService.cols,fg:e}},a._timeBeforeLatency=200,a=u([p(0,f.IBufferService),p(1,f.ILogService),p(2,f.IUnicodeService)],a)}();l.Linkifier=E;var v=function(c,o,t,r,e,i,s,n,h){this.x1=c,this.y1=o,this.x2=t,this.y2=r,this.clickCallback=e,this.hoverCallback=i,this.tooltipCallback=s,this.leaveCallback=n,this.willLinkActivate=h};l.MouseZone=v},6465:function(I,l,y){var u,p=this&&this.__extends||(u=function(r,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i[n]=s[n])})(r,e)},function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}u(t,r),t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),d=this&&this.__decorate||function(t,r,e,i){var s,n=arguments.length,h=n<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(t,r,e,i);else for(var _=t.length-1;_>=0;_--)(s=t[_])&&(h=(n<3?s(h):n>3?s(r,e,h):s(r,e))||h);return n>3&&h&&Object.defineProperty(r,e,h),h},f=this&&this.__param||function(t,r){return function(e,i){r(e,i,t)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Linkifier2=void 0;var E=y(2585),v=y(8460),a=y(844),c=y(3656),o=function(t){function r(e){var i=t.call(this)||this;return i._bufferService=e,i._linkProviders=[],i._linkCacheDisposables=[],i._isMouseOut=!0,i._activeLine=-1,i._onShowLinkUnderline=i.register(new v.EventEmitter),i._onHideLinkUnderline=i.register(new v.EventEmitter),i.register(a.getDisposeArrayDisposable(i._linkCacheDisposables)),i}return p(r,t),Object.defineProperty(r.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),r.prototype.registerLinkProvider=function(e){var i=this;return this._linkProviders.push(e),{dispose:function(){var n=i._linkProviders.indexOf(e);n!==-1&&i._linkProviders.splice(n,1)}}},r.prototype.attachToDom=function(e,i,s){var n=this;this._element=e,this._mouseService=i,this._renderService=s,this.register(c.addDisposableDomListener(this._element,"mouseleave",function(){n._isMouseOut=!0,n._clearCurrentLink()})),this.register(c.addDisposableDomListener(this._element,"mousemove",this._onMouseMove.bind(this))),this.register(c.addDisposableDomListener(this._element,"click",this._onClick.bind(this)))},r.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var i=this._positionFromMouseEvent(e,this._element,this._mouseService);if(i){this._isMouseOut=!1;for(var s=e.composedPath(),n=0;n<s.length;n++){var h=s[n];if(h.classList.contains("xterm"))break;if(h.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._onHover(i),this._lastBufferCell=i)}}},r.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},r.prototype._askForLink=function(e,i){var s,n=this;this._activeProviderReplies&&i||((s=this._activeProviderReplies)===null||s===void 0||s.forEach(function(_){_==null||_.forEach(function(m){m.link.dispose&&m.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);var h=!1;this._linkProviders.forEach(function(_,m){var g;i?((g=n._activeProviderReplies)===null||g===void 0?void 0:g.get(m))&&(h=n._checkLinkProviderResult(m,e,h)):_.provideLinks(e.y,function(S){var C,k;if(!n._isMouseOut){var L=S==null?void 0:S.map(function(A){return{link:A}});(C=n._activeProviderReplies)===null||C===void 0||C.set(m,L),h=n._checkLinkProviderResult(m,e,h),((k=n._activeProviderReplies)===null||k===void 0?void 0:k.size)===n._linkProviders.length&&n._removeIntersectingLinks(e.y,n._activeProviderReplies)}})})},r.prototype._removeIntersectingLinks=function(e,i){for(var s=new Set,n=0;n<i.size;n++){var h=i.get(n);if(h)for(var _=0;_<h.length;_++)for(var m=h[_],g=m.link.range.start.y<e?0:m.link.range.start.x,S=m.link.range.end.y>e?this._bufferService.cols:m.link.range.end.x,C=g;C<=S;C++){if(s.has(C)){h.splice(_--,1);break}s.add(C)}}},r.prototype._checkLinkProviderResult=function(e,i,s){var n,h=this;if(!this._activeProviderReplies)return s;for(var _=this._activeProviderReplies.get(e),m=!1,g=0;g<e;g++)this._activeProviderReplies.has(g)&&!this._activeProviderReplies.get(g)||(m=!0);if(!m&&_){var S=_.find(function(k){return h._linkAtPosition(k.link,i)});S&&(s=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!s)for(g=0;g<this._activeProviderReplies.size;g++){var C=(n=this._activeProviderReplies.get(g))===null||n===void 0?void 0:n.find(function(k){return h._linkAtPosition(k.link,i)});if(C){s=!0,this._handleNewLink(C);break}}return s},r.prototype._onClick=function(e){if(this._element&&this._mouseService&&this._currentLink){var i=this._positionFromMouseEvent(e,this._element,this._mouseService);i&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},r.prototype._clearCurrentLink=function(e,i){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!i||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,a.disposeArray(this._linkCacheDisposables))},r.prototype._handleNewLink=function(e){var i=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._linkAtPosition(e.link,s)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var h,_;return(_=(h=i._currentLink)===null||h===void 0?void 0:h.state)===null||_===void 0?void 0:_.decorations.pointerCursor},set:function(h){var _,m;((_=i._currentLink)===null||_===void 0?void 0:_.state)&&i._currentLink.state.decorations.pointerCursor!==h&&(i._currentLink.state.decorations.pointerCursor=h,i._currentLink.state.isHovered&&((m=i._element)===null||m===void 0||m.classList.toggle("xterm-cursor-pointer",h)))}},underline:{get:function(){var h,_;return(_=(h=i._currentLink)===null||h===void 0?void 0:h.state)===null||_===void 0?void 0:_.decorations.underline},set:function(h){var _,m,g;((_=i._currentLink)===null||_===void 0?void 0:_.state)&&((g=(m=i._currentLink)===null||m===void 0?void 0:m.state)===null||g===void 0?void 0:g.decorations.underline)!==h&&(i._currentLink.state.decorations.underline=h,i._currentLink.state.isHovered&&i._fireUnderlineEvent(e.link,h))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(n){var h=n.start===0?0:n.start+1+i._bufferService.buffer.ydisp;i._clearCurrentLink(h,n.end+1+i._bufferService.buffer.ydisp)})))}},r.prototype._linkHover=function(e,i,s){var n;((n=this._currentLink)===null||n===void 0?void 0:n.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(s,i.text)},r.prototype._fireUnderlineEvent=function(e,i){var s=e.range,n=this._bufferService.buffer.ydisp,h=this._createLinkUnderlineEvent(s.start.x-1,s.start.y-n-1,s.end.x,s.end.y-n-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(h)},r.prototype._linkLeave=function(e,i,s){var n;((n=this._currentLink)===null||n===void 0?void 0:n.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(s,i.text)},r.prototype._linkAtPosition=function(e,i){var s=e.range.start.y===e.range.end.y,n=e.range.start.y<i.y,h=e.range.end.y>i.y;return(s&&e.range.start.x<=i.x&&e.range.end.x>=i.x||n&&e.range.end.x>=i.x||h&&e.range.start.x<=i.x||n&&h)&&e.range.start.y<=i.y&&e.range.end.y>=i.y},r.prototype._positionFromMouseEvent=function(e,i,s){var n=s.getCoords(e,i,this._bufferService.cols,this._bufferService.rows);if(n)return{x:n[0],y:n[1]+this._bufferService.buffer.ydisp}},r.prototype._createLinkUnderlineEvent=function(e,i,s,n,h){return{x1:e,y1:i,x2:s,y2:n,cols:this._bufferService.cols,fg:h}},d([f(0,E.IBufferService)],r)}(a.Disposable);l.Linkifier2=o},9042:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.tooMuchOutput=l.promptLabel=void 0,l.promptLabel="Terminal input",l.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(I,l,y){var u,p=this&&this.__extends||(u=function(r,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i[n]=s[n])})(r,e)},function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}u(t,r),t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),d=this&&this.__decorate||function(t,r,e,i){var s,n=arguments.length,h=n<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(t,r,e,i);else for(var _=t.length-1;_>=0;_--)(s=t[_])&&(h=(n<3?s(h):n>3?s(r,e,h):s(r,e))||h);return n>3&&h&&Object.defineProperty(r,e,h),h},f=this&&this.__param||function(t,r){return function(e,i){r(e,i,t)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseZoneManager=void 0;var E=y(844),v=y(3656),a=y(4725),c=y(2585),o=function(t){function r(e,i,s,n,h,_){var m=t.call(this)||this;return m._element=e,m._screenElement=i,m._bufferService=s,m._mouseService=n,m._selectionService=h,m._optionsService=_,m._zones=[],m._areZonesActive=!1,m._lastHoverCoords=[void 0,void 0],m._initialSelectionLength=0,m.register(v.addDisposableDomListener(m._element,"mousedown",function(g){return m._onMouseDown(g)})),m._mouseMoveListener=function(g){return m._onMouseMove(g)},m._mouseLeaveListener=function(g){return m._onMouseLeave(g)},m._clickListener=function(g){return m._onClick(g)},m}return p(r,t),r.prototype.dispose=function(){t.prototype.dispose.call(this),this._deactivate()},r.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},r.prototype.clearAll=function(e,i){if(this._zones.length!==0){e&&i||(e=0,i=this._bufferService.rows-1);for(var s=0;s<this._zones.length;s++){var n=this._zones[s];(n.y1>e&&n.y1<=i+1||n.y2>e&&n.y2<=i+1||n.y1<e&&n.y2>i+1)&&(this._currentZone&&this._currentZone===n&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(s--,1))}this._zones.length===0&&this._deactivate()}},r.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},r.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},r.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},r.prototype._onHover=function(e){var i=this,s=this._findZoneEventAt(e);s!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),s&&(this._currentZone=s,s.hoverCallback&&s.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return i._onTooltip(e)},this._optionsService.options.linkTooltipHoverDuration)))},r.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var i=this._findZoneEventAt(e);i==null||i.tooltipCallback(e)},r.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var i=this._findZoneEventAt(e);(i==null?void 0:i.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},r.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},r.prototype._onClick=function(e){var i=this._findZoneEventAt(e),s=this._getSelectionLength();i&&s===this._initialSelectionLength&&(i.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},r.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},r.prototype._findZoneEventAt=function(e){var i=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(i)for(var s=i[0],n=i[1],h=0;h<this._zones.length;h++){var _=this._zones[h];if(_.y1===_.y2){if(n===_.y1&&s>=_.x1&&s<_.x2)return _}else if(n===_.y1&&s>=_.x1||n===_.y2&&s<_.x2||n>_.y1&&n<_.y2)return _}},d([f(2,c.IBufferService),f(3,a.IMouseService),f(4,a.ISelectionService),f(5,c.IOptionsService)],r)}(E.Disposable);l.MouseZoneManager=o},6193:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.RenderDebouncer=void 0;var y=function(){function u(p){this._renderCallback=p}return u.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},u.prototype.refresh=function(p,d,f){var E=this;this._rowCount=f,p=p!==void 0?p:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,p):p,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return E._innerRefresh()}))},u.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var p=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(p,d)}},u}();l.RenderDebouncer=y},5596:function(I,l,y){var u,p=this&&this.__extends||(u=function(E,v){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&(a[o]=c[o])})(E,v)},function(f,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function v(){this.constructor=f}u(f,E),f.prototype=E===null?Object.create(E):(v.prototype=E.prototype,new v)});Object.defineProperty(l,"__esModule",{value:!0}),l.ScreenDprMonitor=void 0;var d=function(f){function E(){var v=f!==null&&f.apply(this,arguments)||this;return v._currentDevicePixelRatio=window.devicePixelRatio,v}return p(E,f),E.prototype.setListener=function(v){var a=this;this._listener&&this.clearListener(),this._listener=v,this._outerListener=function(){a._listener&&(a._listener(window.devicePixelRatio,a._currentDevicePixelRatio),a._updateDpr())},this._updateDpr()},E.prototype.dispose=function(){f.prototype.dispose.call(this),this.clearListener()},E.prototype._updateDpr=function(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},E.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},E}(y(844).Disposable);l.ScreenDprMonitor=d},3236:function(I,l,y){var u,p=this&&this.__extends||(u=function(x,O){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,B){T.__proto__=B}||function(T,B){for(var M in B)Object.prototype.hasOwnProperty.call(B,M)&&(T[M]=B[M])})(x,O)},function(V,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function O(){this.constructor=V}u(V,x),V.prototype=x===null?Object.create(x):(O.prototype=x.prototype,new O)});Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;var d=y(2950),f=y(1680),E=y(3614),v=y(2584),a=y(5435),c=y(3525),o=y(3551),t=y(9312),r=y(6114),e=y(3656),i=y(9042),s=y(357),n=y(6954),h=y(4567),_=y(1296),m=y(7399),g=y(8460),S=y(8437),C=y(5680),k=y(3230),L=y(4725),A=y(428),w=y(8934),b=y(6465),P=y(5114),R=y(8969),j=y(4774),H=y(4269),F=typeof window!="undefined"?window.document:null,Z=function(V){function x(O){O===void 0&&(O={});var T=V.call(this,O)||this;return T.browser=r,T._keyDownHandled=!1,T._onCursorMove=new g.EventEmitter,T._onKey=new g.EventEmitter,T._onRender=new g.EventEmitter,T._onSelectionChange=new g.EventEmitter,T._onTitleChange=new g.EventEmitter,T._onBell=new g.EventEmitter,T._onFocus=new g.EventEmitter,T._onBlur=new g.EventEmitter,T._onA11yCharEmitter=new g.EventEmitter,T._onA11yTabEmitter=new g.EventEmitter,T._setup(),T.linkifier=T._instantiationService.createInstance(o.Linkifier),T.linkifier2=T.register(T._instantiationService.createInstance(b.Linkifier2)),T.register(T._inputHandler.onRequestBell(function(){return T.bell()})),T.register(T._inputHandler.onRequestRefreshRows(function(B,M){return T.refresh(B,M)})),T.register(T._inputHandler.onRequestReset(function(){return T.reset()})),T.register(T._inputHandler.onRequestWindowsOptionsReport(function(B){return T._reportWindowsOptions(B)})),T.register(T._inputHandler.onAnsiColorChange(function(B){return T._changeAnsiColor(B)})),T.register(g.forwardEvent(T._inputHandler.onCursorMove,T._onCursorMove)),T.register(g.forwardEvent(T._inputHandler.onTitleChange,T._onTitleChange)),T.register(g.forwardEvent(T._inputHandler.onA11yChar,T._onA11yCharEmitter)),T.register(g.forwardEvent(T._inputHandler.onA11yTab,T._onA11yTabEmitter)),T.register(T._bufferService.onResize(function(B){return T._afterResize(B.cols,B.rows)})),T}return p(x,V),Object.defineProperty(x.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),x.prototype._changeAnsiColor=function(O){var T,B;if(this._colorManager){for(var M=0,U=O.colors;M<U.length;M++){var N=U[M],X=j.rgba.toColor(N.red,N.green,N.blue);this._colorManager.colors.ansi[N.colorIndex]=X}(T=this._renderService)===null||T===void 0||T.setColors(this._colorManager.colors),(B=this.viewport)===null||B===void 0||B.onThemeChange(this._colorManager.colors)}},x.prototype.dispose=function(){var O,T,B;this._isDisposed||(V.prototype.dispose.call(this),(O=this._renderService)===null||O===void 0||O.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(B=(T=this.element)===null||T===void 0?void 0:T.parentNode)===null||B===void 0||B.removeChild(this.element))},x.prototype._setup=function(){V.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(x.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),x.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},x.prototype._updateOptions=function(O){var T,B,M,U;switch(V.prototype._updateOptions.call(this,O),O){case"fontFamily":case"fontSize":(T=this._renderService)===null||T===void 0||T.clear(),(B=this._charSizeService)===null||B===void 0||B.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(M=this.viewport)===null||M===void 0||M.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new h.AccessibilityManager(this,this._renderService)):((U=this._accessibilityManager)===null||U===void 0||U.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},x.prototype._onTextAreaFocus=function(O){this._coreService.decPrivateModes.sendFocus&&this._coreService.triggerDataEvent(v.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},x.prototype.blur=function(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()},x.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this._coreService.decPrivateModes.sendFocus&&this._coreService.triggerDataEvent(v.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},x.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var O=this.buffer.ybase+this.buffer.y,T=this.buffer.lines.get(O);if(T){var B=Math.min(this.buffer.x,this.cols-1),M=this._renderService.dimensions.actualCellHeight,U=T.getWidth(B),N=this._renderService.dimensions.actualCellWidth*U,X=this.buffer.y*this._renderService.dimensions.actualCellHeight,Y=B*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=Y+"px",this.textarea.style.top=X+"px",this.textarea.style.width=N+"px",this.textarea.style.height=M+"px",this.textarea.style.lineHeight=M+"px",this.textarea.style.zIndex="-5"}}},x.prototype._initGlobal=function(){var O=this;this._bindKeys(),this.register(e.addDisposableDomListener(this.element,"copy",function(B){O.hasSelection()&&E.copyHandler(B,O._selectionService)}));var T=function(M){return E.handlePasteEvent(M,O.textarea,O._coreService)};this.register(e.addDisposableDomListener(this.textarea,"paste",T)),this.register(e.addDisposableDomListener(this.element,"paste",T)),r.isFirefox?this.register(e.addDisposableDomListener(this.element,"mousedown",function(B){B.button===2&&E.rightClickHandler(B,O.textarea,O.screenElement,O._selectionService,O.options.rightClickSelectsWord)})):this.register(e.addDisposableDomListener(this.element,"contextmenu",function(B){E.rightClickHandler(B,O.textarea,O.screenElement,O._selectionService,O.options.rightClickSelectsWord)})),r.isLinux&&this.register(e.addDisposableDomListener(this.element,"auxclick",function(B){B.button===1&&E.moveTextAreaUnderMouseCursor(B,O.textarea,O.screenElement)}))},x.prototype._bindKeys=function(){var O=this;this.register(e.addDisposableDomListener(this.textarea,"keyup",function(T){return O._keyUp(T)},!0)),this.register(e.addDisposableDomListener(this.textarea,"keydown",function(T){return O._keyDown(T)},!0)),this.register(e.addDisposableDomListener(this.textarea,"keypress",function(T){return O._keyPress(T)},!0)),this.register(e.addDisposableDomListener(this.textarea,"compositionstart",function(){return O._compositionHelper.compositionstart()})),this.register(e.addDisposableDomListener(this.textarea,"compositionupdate",function(T){return O._compositionHelper.compositionupdate(T)})),this.register(e.addDisposableDomListener(this.textarea,"compositionend",function(){return O._compositionHelper.compositionend()})),this.register(this.onRender(function(){return O._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(T){return O._queueLinkification(T.start,T.end)}))},x.prototype.open=function(O){var T=this;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("role","document"),O.appendChild(this.element);var B=F.createDocumentFragment();this._viewportElement=F.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),B.appendChild(this._viewportElement),this._viewportScrollArea=F.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=F.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=F.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),B.appendChild(this.screenElement),this.textarea=F.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",i.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(e.addDisposableDomListener(this.textarea,"focus",function(N){return T._onTextAreaFocus(N)})),this.register(e.addDisposableDomListener(this.textarea,"blur",function(){return T._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var M=this._instantiationService.createInstance(P.CoreBrowserService,this.textarea);this._instantiationService.setService(L.ICoreBrowserService,M),this._charSizeService=this._instantiationService.createInstance(A.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new C.ColorManager(F,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(N){return T._colorManager.onOptionsChange(N)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(H.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService);var U=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,U,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(N){return T._onRender.fire(N)})),this.onResize(function(N){return T._renderService.resize(N.cols,N.rows)}),this._compositionView=F.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(B),this._soundService=this._instantiationService.createInstance(s.SoundService),this._instantiationService.setService(L.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(w.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(f.Viewport,function(N){return T.scrollLines(N,!0,1)},this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return T.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){T._renderService.onCursorMove(),T._syncTextArea()})),this.register(this.onResize(function(){return T._renderService.onResize(T.cols,T.rows)})),this.register(this.onBlur(function(){return T._renderService.onBlur()})),this.register(this.onFocus(function(){return T._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return T.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(t.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(N){return T.scrollLines(N.amount,N.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return T._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(N){return T._renderService.onSelectionChanged(N.start,N.end,N.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(N){T.textarea.value=N,T.textarea.focus(),T.textarea.select()})),this.register(this._onScroll.event(function(N){T.viewport.syncScrollArea(),T._selectionService.refresh()})),this.register(e.addDisposableDomListener(this._viewportElement,"scroll",function(){return T._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(n.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return T._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService),this.register(e.addDisposableDomListener(this.element,"mousedown",function(N){return T._selectionService.onMouseDown(N)})),this._coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new h.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},x.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(c.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(_.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},x.prototype._setTheme=function(O){var T,B,M;this._theme=O,(T=this._colorManager)===null||T===void 0||T.setTheme(O),(B=this._renderService)===null||B===void 0||B.setColors(this._colorManager.colors),(M=this.viewport)===null||M===void 0||M.onThemeChange(this._colorManager.colors)},x.prototype.bindMouse=function(){var O=this,T=this,B=this.element;function M(z){var G,Q,te=T._mouseService.getRawByteCoords(z,T.screenElement,T.cols,T.rows);if(!te)return!1;switch(z.overrideType||z.type){case"mousemove":Q=32,z.buttons===void 0?(G=3,z.button!==void 0&&(G=z.button<3?z.button:3)):G=1&z.buttons?0:4&z.buttons?1:2&z.buttons?2:3;break;case"mouseup":Q=0,G=z.button<3?z.button:3;break;case"mousedown":Q=1,G=z.button<3?z.button:3;break;case"wheel":z.deltaY!==0&&(Q=z.deltaY<0?0:1),G=4;break;default:return!1}return!(Q===void 0||G===void 0||G>4)&&T._coreMouseService.triggerMouseEvent({col:te.x-33,row:te.y-33,button:G,action:Q,ctrl:z.ctrlKey,alt:z.altKey,shift:z.shiftKey})}var U={mouseup:null,wheel:null,mousedrag:null,mousemove:null},N=function(G){return M(G),G.buttons||(O._document.removeEventListener("mouseup",U.mouseup),U.mousedrag&&O._document.removeEventListener("mousemove",U.mousedrag)),O.cancel(G)},X=function(G){return M(G),G.preventDefault(),O.cancel(G)},Y=function(G){G.buttons&&M(G)},ee=function(G){G.buttons||M(G)};this.register(this._coreMouseService.onProtocolChange(function(z){z?(O.optionsService.options.logLevel==="debug"&&O._logService.debug("Binding to mouse events:",O._coreMouseService.explainEvents(z)),O.element.classList.add("enable-mouse-events"),O._selectionService.disable()):(O._logService.debug("Unbinding from mouse events."),O.element.classList.remove("enable-mouse-events"),O._selectionService.enable()),8&z?U.mousemove||(B.addEventListener("mousemove",ee),U.mousemove=ee):(B.removeEventListener("mousemove",U.mousemove),U.mousemove=null),16&z?U.wheel||(B.addEventListener("wheel",X,{passive:!1}),U.wheel=X):(B.removeEventListener("wheel",U.wheel),U.wheel=null),2&z?U.mouseup||(U.mouseup=N):(O._document.removeEventListener("mouseup",U.mouseup),U.mouseup=null),4&z?U.mousedrag||(U.mousedrag=Y):(O._document.removeEventListener("mousemove",U.mousedrag),U.mousedrag=null)})),this._coreMouseService.activeProtocol=this._coreMouseService.activeProtocol,this.register(e.addDisposableDomListener(B,"mousedown",function(z){if(z.preventDefault(),O.focus(),O._coreMouseService.areMouseEventsActive&&!O._selectionService.shouldForceSelection(z))return M(z),U.mouseup&&O._document.addEventListener("mouseup",U.mouseup),U.mousedrag&&O._document.addEventListener("mousemove",U.mousedrag),O.cancel(z)})),this.register(e.addDisposableDomListener(B,"wheel",function(z){if(!U.wheel){if(!O.buffer.hasScrollback){var G=O.viewport.getLinesScrolled(z);if(G===0)return;for(var Q=v.C0.ESC+(O._coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(z.deltaY<0?"A":"B"),te="",oe=0;oe<Math.abs(G);oe++)te+=Q;O._coreService.triggerDataEvent(te,!0)}}},{passive:!0})),this.register(e.addDisposableDomListener(B,"wheel",function(z){if(!U.wheel)return O.viewport.onWheel(z)?void 0:O.cancel(z)},{passive:!1})),this.register(e.addDisposableDomListener(B,"touchstart",function(z){if(!O._coreMouseService.areMouseEventsActive)return O.viewport.onTouchStart(z),O.cancel(z)},{passive:!0})),this.register(e.addDisposableDomListener(B,"touchmove",function(z){if(!O._coreMouseService.areMouseEventsActive)return O.viewport.onTouchMove(z)?void 0:O.cancel(z)},{passive:!1}))},x.prototype.refresh=function(O,T){var B;(B=this._renderService)===null||B===void 0||B.refreshRows(O,T)},x.prototype._queueLinkification=function(O,T){var B;(B=this.linkifier)===null||B===void 0||B.linkifyRows(O,T)},x.prototype.updateCursorStyle=function(O){var T;((T=this._selectionService)===null||T===void 0?void 0:T.shouldColumnSelect(O))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},x.prototype._showCursor=function(){this._coreService.isCursorInitialized||(this._coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},x.prototype.scrollLines=function(O,T,B){B===void 0&&(B=0),V.prototype.scrollLines.call(this,O,T,B),this.refresh(0,this.rows-1)},x.prototype.paste=function(O){E.paste(O,this.textarea,this._coreService)},x.prototype.attachCustomKeyEventHandler=function(O){this._customKeyEventHandler=O},x.prototype.registerLinkMatcher=function(O,T,B){var M=this.linkifier.registerLinkMatcher(O,T,B);return this.refresh(0,this.rows-1),M},x.prototype.deregisterLinkMatcher=function(O){this.linkifier.deregisterLinkMatcher(O)&&this.refresh(0,this.rows-1)},x.prototype.registerLinkProvider=function(O){return this.linkifier2.registerLinkProvider(O)},x.prototype.registerCharacterJoiner=function(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var T=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),T},x.prototype.deregisterCharacterJoiner=function(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)},Object.defineProperty(x.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),x.prototype.addMarker=function(O){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)},x.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},x.prototype.select=function(O,T,B){this._selectionService.setSelection(O,T,B)},x.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},x.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},x.prototype.clearSelection=function(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()},x.prototype.selectAll=function(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()},x.prototype.selectLines=function(O,T){var B;(B=this._selectionService)===null||B===void 0||B.selectLines(O,T)},x.prototype._keyDown=function(O){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(!this._compositionHelper.keydown(O))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;var T=m.evaluateKeyboardEvent(O,this._coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),T.type===3||T.type===2){var B=this.rows-1;return this.scrollLines(T.type===2?-B:B),this.cancel(O,!0)}return T.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(T.cancel&&this.cancel(O,!0),!T.key||(T.key!==v.C0.ETX&&T.key!==v.C0.CR||(this.textarea.value=""),this._onKey.fire({key:T.key,domEvent:O}),this._showCursor(),this._coreService.triggerDataEvent(T.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(O,!0)))},x.prototype._isThirdLevelShift=function(O,T){var B=O.isMac&&!this.options.macOptionIsMeta&&T.altKey&&!T.ctrlKey&&!T.metaKey||O.isWindows&&T.altKey&&T.ctrlKey&&!T.metaKey;return T.type==="keypress"?B:B&&(!T.keyCode||T.keyCode>47)},x.prototype._keyUp=function(O){this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(T){return T.keyCode===16||T.keyCode===17||T.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O))},x.prototype._keyPress=function(O){var T;if(this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)T=O.charCode;else if(O.which===null||O.which===void 0)T=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;T=O.which}return!(!T||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(T=String.fromCharCode(T),this._onKey.fire({key:T,domEvent:O}),this._showCursor(),this._coreService.triggerDataEvent(T,!0),0))},x.prototype.bell=function(){var O;this._soundBell()&&((O=this._soundService)===null||O===void 0||O.playBellSound()),this._onBell.fire()},x.prototype.resize=function(O,T){O!==this.cols||T!==this.rows?V.prototype.resize.call(this,O,T):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},x.prototype._afterResize=function(O,T){var B,M;(B=this._charSizeService)===null||B===void 0||B.measure(),(M=this.viewport)===null||M===void 0||M.syncScrollArea(!0)},x.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var O=1;O<this.rows;O++)this.buffer.lines.push(this.buffer.getBlankLine(S.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},x.prototype.reset=function(){var O,T;this.options.rows=this.rows,this.options.cols=this.cols;var B=this._customKeyEventHandler;this._setup(),V.prototype.reset.call(this),(O=this._selectionService)===null||O===void 0||O.reset(),this._customKeyEventHandler=B,this.refresh(0,this.rows-1),(T=this.viewport)===null||T===void 0||T.syncScrollArea()},x.prototype._reportWindowsOptions=function(O){if(this._renderService)switch(O){case a.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var T=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),B=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this._coreService.triggerDataEvent(v.C0.ESC+"[4;"+B+";"+T+"t");break;case a.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var M=this._renderService.dimensions.scaledCellWidth.toFixed(0),U=this._renderService.dimensions.scaledCellHeight.toFixed(0);this._coreService.triggerDataEvent(v.C0.ESC+"[6;"+U+";"+M+"t")}},x.prototype.cancel=function(O,T){if(this.options.cancelEvents||T)return O.preventDefault(),O.stopPropagation(),!1},x.prototype._visualBell=function(){return!1},x.prototype._soundBell=function(){return this.options.bellStyle==="sound"},x}(R.CoreTerminal);l.Terminal=Z},1680:function(I,l,y){var u,p=this&&this.__extends||(u=function(r,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i[n]=s[n])})(r,e)},function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}u(t,r),t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),d=this&&this.__decorate||function(t,r,e,i){var s,n=arguments.length,h=n<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(t,r,e,i);else for(var _=t.length-1;_>=0;_--)(s=t[_])&&(h=(n<3?s(h):n>3?s(r,e,h):s(r,e))||h);return n>3&&h&&Object.defineProperty(r,e,h),h},f=this&&this.__param||function(t,r){return function(e,i){r(e,i,t)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Viewport=void 0;var E=y(844),v=y(3656),a=y(4725),c=y(2585),o=function(t){function r(e,i,s,n,h,_,m){var g=t.call(this)||this;return g._scrollLines=e,g._viewportElement=i,g._scrollArea=s,g._bufferService=n,g._optionsService=h,g._charSizeService=_,g._renderService=m,g.scrollBarWidth=0,g._currentRowHeight=0,g._lastRecordedBufferLength=0,g._lastRecordedViewportHeight=0,g._lastRecordedBufferHeight=0,g._lastTouchY=0,g._lastScrollTop=0,g._wheelPartialScroll=0,g._refreshAnimationFrame=null,g._ignoreNextScrollEvent=!1,g.scrollBarWidth=g._viewportElement.offsetWidth-g._scrollArea.offsetWidth||15,g.register(v.addDisposableDomListener(g._viewportElement,"scroll",g._onScroll.bind(g))),setTimeout(function(){return g.syncScrollArea()},0),g}return p(r,t),r.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},r.prototype._refresh=function(e){var i=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return i._innerRefresh()}))},r.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==i&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=i),this._refreshAnimationFrame=null},r.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);if(this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight){var i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._lastScrollTop===i&&this._lastScrollTop===this._viewportElement.scrollTop&&this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh(e)}else this._refresh(e)},r.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var i=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(i)}},r.prototype._bubbleScroll=function(e,i){var s=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(i<0&&this._viewportElement.scrollTop!==0||i>0&&s<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},r.prototype.onWheel=function(e){var i=this._getPixelsScrolled(e);return i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(e,i))},r.prototype._getPixelsScrolled=function(e){if(e.deltaY===0)return 0;var i=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._currentRowHeight*this._bufferService.rows),i},r.prototype.getLinesScrolled=function(e){if(e.deltaY===0)return 0;var i=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(i/=this._currentRowHeight+0,this._wheelPartialScroll+=i,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i},r.prototype._applyScrollModifier=function(e,i){var s=this._optionsService.options.fastScrollModifier;return s==="alt"&&i.altKey||s==="ctrl"&&i.ctrlKey||s==="shift"&&i.shiftKey?e*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:e*this._optionsService.options.scrollSensitivity},r.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},r.prototype.onTouchMove=function(e){var i=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(e,i))},d([f(3,c.IBufferService),f(4,c.IOptionsService),f(5,a.ICharSizeService),f(6,a.IRenderService)],r)}(E.Disposable);l.Viewport=o},2950:function(I,l,y){var u=this&&this.__decorate||function(v,a,c,o){var t,r=arguments.length,e=r<3?a:o===null?o=Object.getOwnPropertyDescriptor(a,c):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(v,a,c,o);else for(var i=v.length-1;i>=0;i--)(t=v[i])&&(e=(r<3?t(e):r>3?t(a,c,e):t(a,c))||e);return r>3&&e&&Object.defineProperty(a,c,e),e},p=this&&this.__param||function(v,a){return function(c,o){a(c,o,v)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CompositionHelper=void 0;var d=y(4725),f=y(2585),E=function(){function v(a,c,o,t,r,e){this._textarea=a,this._compositionView=c,this._bufferService=o,this._optionsService=t,this._coreService=r,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(v.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),v.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},v.prototype.compositionupdate=function(a){var c=this;this._compositionView.textContent=a.data,this.updateCompositionElements(),setTimeout(function(){c._compositionPosition.end=c._textarea.value.length},0)},v.prototype.compositionend=function(){this._finalizeComposition(!0)},v.prototype.keydown=function(a){if(this._isComposing||this._isSendingComposition){if(a.keyCode===229||a.keyCode===16||a.keyCode===17||a.keyCode===18)return!1;this._finalizeComposition(!1)}return a.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},v.prototype._finalizeComposition=function(a){var c=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,a){var o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(c._isSendingComposition){c._isSendingComposition=!1;var r;o.start+=c._dataAlreadySent.length,(r=c._isComposing?c._textarea.value.substring(o.start,o.end):c._textarea.value.substring(o.start)).length>0&&c._coreService.triggerDataEvent(r,!0)}},0)}else{this._isSendingComposition=!1;var t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}},v.prototype._handleAnyTextareaChanges=function(){var a=this,c=this._textarea.value;setTimeout(function(){if(!a._isComposing){var o=a._textarea.value.replace(c,"");o.length>0&&(a._dataAlreadySent=o,a._coreService.triggerDataEvent(o,!0))}},0)},v.prototype.updateCompositionElements=function(a){var c=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),t=this._renderService.dimensions.actualCellHeight,r=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=o*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=r+"px",this._compositionView.style.height=t+"px",this._compositionView.style.lineHeight=t+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var i=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=r+"px",this._textarea.style.width=Math.max(i.width,1)+"px",this._textarea.style.height=Math.max(i.height,1)+"px",this._textarea.style.lineHeight=i.height+"px"}a||setTimeout(function(){return c.updateCompositionElements(!0)},0)}},u([p(2,f.IBufferService),p(3,f.IOptionsService),p(4,f.ICoreService),p(5,d.IRenderService)],v)}();l.CompositionHelper=E},9806:function(I,l){function y(u,p){var d=p.getBoundingClientRect();return[u.clientX-d.left,u.clientY-d.top]}Object.defineProperty(l,"__esModule",{value:!0}),l.getRawByteCoords=l.getCoords=l.getCoordsRelativeToElement=void 0,l.getCoordsRelativeToElement=y,l.getCoords=function(u,p,d,f,E,v,a,c){if(E){var o=y(u,p);if(o)return o[0]=Math.ceil((o[0]+(c?v/2:0))/v),o[1]=Math.ceil(o[1]/a),o[0]=Math.min(Math.max(o[0],1),d+(c?1:0)),o[1]=Math.min(Math.max(o[1],1),f),o}},l.getRawByteCoords=function(u){if(u)return{x:u[0]+32,y:u[1]+32}}},9504:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.moveToCellSequence=void 0;var u=y(2584);function p(c,o,t,r){var e=c-d(t,c),i=o-d(t,o);return a(Math.abs(e-i)-function(s,n,h){for(var _=0,m=s-d(h,s),g=n-d(h,n),S=0;S<Math.abs(m-g);S++){var C=f(s,n)==="A"?-1:1,k=h.buffer.lines.get(m+C*S);k&&k.isWrapped&&_++}return _}(c,o,t),v(f(c,o),r))}function d(c,o){for(var t=0,r=c.buffer.lines.get(o),e=r&&r.isWrapped;e&&o>=0&&o<c.rows;)t++,e=(r=c.buffer.lines.get(--o))&&r.isWrapped;return t}function f(c,o){return c>o?"A":"B"}function E(c,o,t,r,e,i){for(var s=c,n=o,h="";s!==t||n!==r;)s+=e?1:-1,e&&s>i.cols-1?(h+=i.buffer.translateBufferLineToString(n,!1,c,s),s=0,c=0,n++):!e&&s<0&&(h+=i.buffer.translateBufferLineToString(n,!1,0,c+1),c=s=i.cols-1,n--);return h+i.buffer.translateBufferLineToString(n,!1,c,s)}function v(c,o){var t=o?"O":"[";return u.C0.ESC+t+c}function a(c,o){c=Math.floor(c);for(var t="",r=0;r<c;r++)t+=o;return t}l.moveToCellSequence=function(c,o,t,r){var e,i=t.buffer.x,s=t.buffer.y;if(!t.buffer.hasScrollback)return function(h,_,m,g,S,C){return p(_,g,S,C).length===0?"":a(E(h,_,h,_-d(S,_),!1,S).length,v("D",C))}(i,s,0,o,t,r)+p(s,o,t,r)+function(h,_,m,g,S,C){var k;k=p(_,g,S,C).length>0?g-d(S,g):_;var L=g,A=function(w,b,P,R,j,H){var F;return F=p(P,R,j,H).length>0?R-d(j,R):b,w<P&&F<=R||w>=P&&F<R?"C":"D"}(h,_,m,g,S,C);return a(E(h,k,m,L,A==="C",S).length,v(A,C))}(i,s,c,o,t,r);if(s===o)return e=i>c?"D":"C",a(Math.abs(i-c),v(e,r));e=s>o?"D":"C";var n=Math.abs(s-o);return a(function(h,_){return _.cols-h}(s>o?c:i,t)+(n-1)*t.cols+1+((s>o?i:c)-1),v(e,r))}},244:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.AddonManager=void 0;var y=function(){function u(){this._addons=[]}return u.prototype.dispose=function(){for(var p=this._addons.length-1;p>=0;p--)this._addons[p].instance.dispose()},u.prototype.loadAddon=function(p,d){var f=this,E={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(E),d.dispose=function(){return f._wrappedAddonDispose(E)},d.activate(p)},u.prototype._wrappedAddonDispose=function(p){if(!p.isDisposed){for(var d=-1,f=0;f<this._addons.length;f++)if(this._addons[f]===p){d=f;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");p.isDisposed=!0,p.dispose.apply(p.instance),this._addons.splice(d,1)}},u}();l.AddonManager=y},1546:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.BaseRenderLayer=void 0;var u=y(643),p=y(8803),d=y(1420),f=y(3734),E=y(1752),v=y(4774),a=y(9631),c=function(){function o(t,r,e,i,s,n,h,_){this._container=t,this._alpha=i,this._colors=s,this._rendererId=n,this._bufferService=h,this._optionsService=_,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+r+"-layer"),this._canvas.style.zIndex=e.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return o.prototype.dispose=function(){var t;a.removeElementFromParent(this._canvas),(t=this._charAtlas)===null||t===void 0||t.dispose()},o.prototype._initCanvas=function(){this._ctx=E.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},o.prototype.onOptionsChanged=function(){},o.prototype.onBlur=function(){},o.prototype.onFocus=function(){},o.prototype.onCursorMove=function(){},o.prototype.onGridChanged=function(t,r){},o.prototype.onSelectionChanged=function(t,r,e){e===void 0&&(e=!1)},o.prototype.setColors=function(t){this._refreshCharAtlas(t)},o.prototype._setTransparency=function(t){if(t!==this._alpha){var r=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,r),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},o.prototype._refreshCharAtlas=function(t){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=d.acquireCharAtlas(this._optionsService.options,this._rendererId,t,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},o.prototype.resize=function(t){this._scaledCellWidth=t.scaledCellWidth,this._scaledCellHeight=t.scaledCellHeight,this._scaledCharWidth=t.scaledCharWidth,this._scaledCharHeight=t.scaledCharHeight,this._scaledCharLeft=t.scaledCharLeft,this._scaledCharTop=t.scaledCharTop,this._canvas.width=t.scaledCanvasWidth,this._canvas.height=t.scaledCanvasHeight,this._canvas.style.width=t.canvasWidth+"px",this._canvas.style.height=t.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},o.prototype._fillCells=function(t,r,e,i){this._ctx.fillRect(t*this._scaledCellWidth,r*this._scaledCellHeight,e*this._scaledCellWidth,i*this._scaledCellHeight)},o.prototype._fillBottomLineAtCells=function(t,r,e){e===void 0&&(e=1),this._ctx.fillRect(t*this._scaledCellWidth,(r+1)*this._scaledCellHeight-window.devicePixelRatio-1,e*this._scaledCellWidth,window.devicePixelRatio)},o.prototype._fillLeftLineAtCell=function(t,r,e){this._ctx.fillRect(t*this._scaledCellWidth,r*this._scaledCellHeight,window.devicePixelRatio*e,this._scaledCellHeight)},o.prototype._strokeRectAtCell=function(t,r,e,i){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(t*this._scaledCellWidth+window.devicePixelRatio/2,r*this._scaledCellHeight+window.devicePixelRatio/2,e*this._scaledCellWidth-window.devicePixelRatio,i*this._scaledCellHeight-window.devicePixelRatio)},o.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},o.prototype._clearCells=function(t,r,e,i){this._alpha?this._ctx.clearRect(t*this._scaledCellWidth,r*this._scaledCellHeight,e*this._scaledCellWidth,i*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(t*this._scaledCellWidth,r*this._scaledCellHeight,e*this._scaledCellWidth,i*this._scaledCellHeight))},o.prototype._fillCharTrueColor=function(t,r,e){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="ideographic",this._clipRow(e),this._ctx.fillText(t.getChars(),r*this._scaledCellWidth+this._scaledCharLeft,e*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},o.prototype._drawChars=function(t,r,e){var i,s,n=this._getContrastColor(t);n||t.isFgRGB()||t.isBgRGB()?this._drawUncachedChars(t,r,e,n):(t.isInverse()?(i=t.isBgDefault()?p.INVERTED_DEFAULT_COLOR:t.getBgColor(),s=t.isFgDefault()?p.INVERTED_DEFAULT_COLOR:t.getFgColor()):(s=t.isBgDefault()?u.DEFAULT_COLOR:t.getBgColor(),i=t.isFgDefault()?u.DEFAULT_COLOR:t.getFgColor()),i+=this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&i<8?8:0,this._currentGlyphIdentifier.chars=t.getChars()||u.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=t.getCode()||u.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=s,this._currentGlyphIdentifier.fg=i,this._currentGlyphIdentifier.bold=!!t.isBold(),this._currentGlyphIdentifier.dim=!!t.isDim(),this._currentGlyphIdentifier.italic=!!t.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,r*this._scaledCellWidth+this._scaledCharLeft,e*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(t,r,e))},o.prototype._drawUncachedChars=function(t,r,e,i){if(this._ctx.save(),this._ctx.font=this._getFont(!!t.isBold(),!!t.isItalic()),this._ctx.textBaseline="ideographic",t.isInverse())if(i)this._ctx.fillStyle=i.css;else if(t.isBgDefault())this._ctx.fillStyle=v.color.opaque(this._colors.background).css;else if(t.isBgRGB())this._ctx.fillStyle="rgb("+f.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var s=t.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&s<8&&(s+=8),this._ctx.fillStyle=this._colors.ansi[s].css}else if(i)this._ctx.fillStyle=i.css;else if(t.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(t.isFgRGB())this._ctx.fillStyle="rgb("+f.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var n=t.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&n<8&&(n+=8),this._ctx.fillStyle=this._colors.ansi[n].css}this._clipRow(e),t.isDim()&&(this._ctx.globalAlpha=p.DIM_OPACITY),this._ctx.fillText(t.getChars(),r*this._scaledCellWidth+this._scaledCharLeft,e*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},o.prototype._clipRow=function(t){this._ctx.beginPath(),this._ctx.rect(0,t*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},o.prototype._getFont=function(t,r){return(r?"italic":"")+" "+(t?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},o.prototype._getContrastColor=function(t){if(this._optionsService.options.minimumContrastRatio!==1){var r=this._colors.contrastCache.getColor(t.bg,t.fg);if(r!==void 0)return r||void 0;var e=t.getFgColor(),i=t.getFgColorMode(),s=t.getBgColor(),n=t.getBgColorMode(),h=!!t.isInverse(),_=!!t.isInverse();if(h){var m=e;e=s,s=m;var g=i;i=n,n=g}var S=this._resolveBackgroundRgba(n,s,h),C=this._resolveForegroundRgba(i,e,h,_),k=v.rgba.ensureContrastRatio(S,C,this._optionsService.options.minimumContrastRatio);if(k){var L={css:v.channels.toCss(k>>24&255,k>>16&255,k>>8&255),rgba:k};return this._colors.contrastCache.setColor(t.bg,t.fg,L),L}this._colors.contrastCache.setColor(t.bg,t.fg,null)}},o.prototype._resolveBackgroundRgba=function(t,r,e){switch(t){case 16777216:case 33554432:return this._colors.ansi[r].rgba;case 50331648:return r<<8;case 0:default:return e?this._colors.foreground.rgba:this._colors.background.rgba}},o.prototype._resolveForegroundRgba=function(t,r,e,i){switch(t){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&i&&r<8&&(r+=8),this._colors.ansi[r].rgba;case 50331648:return r<<8;case 0:default:return e?this._colors.background.rgba:this._colors.foreground.rgba}},o}();l.BaseRenderLayer=c},2512:function(I,l,y){var u,p=this&&this.__extends||(u=function(i,s){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,h){n.__proto__=h}||function(n,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(n[_]=h[_])})(i,s)},function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}u(e,i),e.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}),d=this&&this.__decorate||function(e,i,s,n){var h,_=arguments.length,m=_<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,s):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,i,s,n);else for(var g=e.length-1;g>=0;g--)(h=e[g])&&(m=(_<3?h(m):_>3?h(i,s,m):h(i,s))||m);return _>3&&m&&Object.defineProperty(i,s,m),m},f=this&&this.__param||function(e,i){return function(s,n){i(s,n,e)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CursorRenderLayer=void 0;var E=y(1546),v=y(511),a=y(2585),c=y(4725),o=600,t=function(e){function i(s,n,h,_,m,g,S,C,k){var L=e.call(this,s,"cursor",n,!0,h,_,g,S)||this;return L._onRequestRedraw=m,L._coreService=C,L._coreBrowserService=k,L._cell=new v.CellData,L._state={x:0,y:0,isFocused:!1,style:"",width:0},L._cursorRenderers={bar:L._renderBarCursor.bind(L),block:L._renderBlockCursor.bind(L),underline:L._renderUnderlineCursor.bind(L)},L}return p(i,e),i.prototype.resize=function(s){e.prototype.resize.call(this,s),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},i.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},i.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onOptionsChanged=function(){var s,n=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new r(this._coreBrowserService.isFocused,function(){n._render(!0)})):((s=this._cursorBlinkStateManager)===null||s===void 0||s.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},i.prototype.onGridChanged=function(s,n){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},i.prototype._render=function(s){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var n=this._bufferService.buffer.ybase+this._bufferService.buffer.y,h=n-this._bufferService.buffer.ydisp;if(h<0||h>=this._bufferService.rows)this._clearCursor();else{var _=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(n).loadCell(_,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var m=this._optionsService.options.cursorStyle;return m&&m!=="block"?this._cursorRenderers[m](_,h,this._cell):this._renderBlurCursor(_,h,this._cell),this._ctx.restore(),this._state.x=_,this._state.y=h,this._state.isFocused=!1,this._state.style=m,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===_&&this._state.y===h&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](_,h,this._cell),this._ctx.restore(),this._state.x=_,this._state.y=h,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},i.prototype._clearCursor=function(){this._state&&(this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},i.prototype._renderBarCursor=function(s,n,h){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(s,n,this._optionsService.options.cursorWidth),this._ctx.restore()},i.prototype._renderBlockCursor=function(s,n,h){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(s,n,h.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(h,s,n),this._ctx.restore()},i.prototype._renderUnderlineCursor=function(s,n,h){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(s,n),this._ctx.restore()},i.prototype._renderBlurCursor=function(s,n,h){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(s,n,h.getWidth(),1),this._ctx.restore()},d([f(5,a.IBufferService),f(6,a.IOptionsService),f(7,a.ICoreService),f(8,c.ICoreBrowserService)],i)}(E.BaseRenderLayer);l.CursorRenderLayer=t;var r=function(){function e(i,s){this._renderCallback=s,this.isCursorVisible=!0,i&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var i=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){i._renderCallback(),i._animationFrame=void 0})))},e.prototype._restartInterval=function(i){var s=this;i===void 0&&(i=o),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=window.setTimeout(function(){if(s._animationTimeRestarted){var n=o-(Date.now()-s._animationTimeRestarted);if(s._animationTimeRestarted=void 0,n>0)return void s._restartInterval(n)}s.isCursorVisible=!1,s._animationFrame=window.requestAnimationFrame(function(){s._renderCallback(),s._animationFrame=void 0}),s._blinkInterval=window.setInterval(function(){if(s._animationTimeRestarted){var h=o-(Date.now()-s._animationTimeRestarted);return s._animationTimeRestarted=void 0,void s._restartInterval(h)}s.isCursorVisible=!s.isCursorVisible,s._animationFrame=window.requestAnimationFrame(function(){s._renderCallback(),s._animationFrame=void 0})},o)},i)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},3700:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.GridCache=void 0;var y=function(){function u(){this.cache=[]}return u.prototype.resize=function(p,d){for(var f=0;f<p;f++){this.cache.length<=f&&this.cache.push([]);for(var E=this.cache[f].length;E<d;E++)this.cache[f].push(void 0);this.cache[f].length=d}this.cache.length=p},u.prototype.clear=function(){for(var p=0;p<this.cache.length;p++)for(var d=0;d<this.cache[p].length;d++)this.cache[p][d]=void 0},u}();l.GridCache=y},5098:function(I,l,y){var u,p=this&&this.__extends||(u=function(r,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i[n]=s[n])})(r,e)},function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}u(t,r),t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),d=this&&this.__decorate||function(t,r,e,i){var s,n=arguments.length,h=n<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(t,r,e,i);else for(var _=t.length-1;_>=0;_--)(s=t[_])&&(h=(n<3?s(h):n>3?s(r,e,h):s(r,e))||h);return n>3&&h&&Object.defineProperty(r,e,h),h},f=this&&this.__param||function(t,r){return function(e,i){r(e,i,t)}};Object.defineProperty(l,"__esModule",{value:!0}),l.LinkRenderLayer=void 0;var E=y(1546),v=y(8803),a=y(2040),c=y(2585),o=function(t){function r(e,i,s,n,h,_,m,g){var S=t.call(this,e,"link",i,!0,s,n,m,g)||this;return h.onShowLinkUnderline(function(C){return S._onShowLinkUnderline(C)}),h.onHideLinkUnderline(function(C){return S._onHideLinkUnderline(C)}),_.onShowLinkUnderline(function(C){return S._onShowLinkUnderline(C)}),_.onHideLinkUnderline(function(C){return S._onHideLinkUnderline(C)}),S}return p(r,t),r.prototype.resize=function(e){t.prototype.resize.call(this,e),this._state=void 0},r.prototype.reset=function(){this._clearCurrentLink()},r.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},r.prototype._onShowLinkUnderline=function(e){if(e.fg===v.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&a.is256Color(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var i=e.y1+1;i<e.y2;i++)this._fillBottomLineAtCells(0,i,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},r.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},d([f(6,c.IBufferService),f(7,c.IOptionsService)],r)}(E.BaseRenderLayer);l.LinkRenderLayer=o},3525:function(I,l,y){var u,p=this&&this.__extends||(u=function(_,m){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,S){g.__proto__=S}||function(g,S){for(var C in S)Object.prototype.hasOwnProperty.call(S,C)&&(g[C]=S[C])})(_,m)},function(h,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function m(){this.constructor=h}u(h,_),h.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}),d=this&&this.__decorate||function(h,_,m,g){var S,C=arguments.length,k=C<3?_:g===null?g=Object.getOwnPropertyDescriptor(_,m):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(h,_,m,g);else for(var L=h.length-1;L>=0;L--)(S=h[L])&&(k=(C<3?S(k):C>3?S(_,m,k):S(_,m))||k);return C>3&&k&&Object.defineProperty(_,m,k),k},f=this&&this.__param||function(h,_){return function(m,g){_(m,g,h)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Renderer=void 0;var E=y(9596),v=y(4149),a=y(2512),c=y(5098),o=y(844),t=y(4725),r=y(2585),e=y(1420),i=y(8460),s=1,n=function(h){function _(m,g,S,C,k,L,A,w){var b=h.call(this)||this;b._colors=m,b._screenElement=g,b._bufferService=L,b._charSizeService=A,b._optionsService=w,b._id=s++,b._onRequestRedraw=new i.EventEmitter;var P=b._optionsService.options.allowTransparency;return b._renderLayers=[k.createInstance(E.TextRenderLayer,b._screenElement,0,b._colors,P,b._id),k.createInstance(v.SelectionRenderLayer,b._screenElement,1,b._colors,b._id),k.createInstance(c.LinkRenderLayer,b._screenElement,2,b._colors,b._id,S,C),k.createInstance(a.CursorRenderLayer,b._screenElement,3,b._colors,b._id,b._onRequestRedraw)],b.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},b._devicePixelRatio=window.devicePixelRatio,b._updateDimensions(),b.onOptionsChanged(),b}return p(_,h),Object.defineProperty(_.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),_.prototype.dispose=function(){for(var m=0,g=this._renderLayers;m<g.length;m++)g[m].dispose();h.prototype.dispose.call(this),e.removeTerminalFromCache(this._id)},_.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},_.prototype.setColors=function(m){this._colors=m;for(var g=0,S=this._renderLayers;g<S.length;g++){var C=S[g];C.setColors(this._colors),C.reset()}},_.prototype.onResize=function(m,g){this._updateDimensions();for(var S=0,C=this._renderLayers;S<C.length;S++)C[S].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},_.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},_.prototype.onBlur=function(){this._runOperation(function(m){return m.onBlur()})},_.prototype.onFocus=function(){this._runOperation(function(m){return m.onFocus()})},_.prototype.onSelectionChanged=function(m,g,S){S===void 0&&(S=!1),this._runOperation(function(C){return C.onSelectionChanged(m,g,S)})},_.prototype.onCursorMove=function(){this._runOperation(function(m){return m.onCursorMove()})},_.prototype.onOptionsChanged=function(){this._runOperation(function(m){return m.onOptionsChanged()})},_.prototype.clear=function(){this._runOperation(function(m){return m.reset()})},_.prototype._runOperation=function(m){for(var g=0,S=this._renderLayers;g<S.length;g++)m(S[g])},_.prototype.renderRows=function(m,g){for(var S=0,C=this._renderLayers;S<C.length;S++)C[S].onGridChanged(m,g)},_.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},d([f(4,r.IInstantiationService),f(5,r.IBufferService),f(6,t.ICharSizeService),f(7,r.IOptionsService)],_)}(o.Disposable);l.Renderer=n},1752:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.throwIfFalsy=void 0,l.throwIfFalsy=function(y){if(!y)throw new Error("value must not be falsy");return y}},4149:function(I,l,y){var u,p=this&&this.__extends||(u=function(o,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])})(o,t)},function(c,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function t(){this.constructor=c}u(c,o),c.prototype=o===null?Object.create(o):(t.prototype=o.prototype,new t)}),d=this&&this.__decorate||function(c,o,t,r){var e,i=arguments.length,s=i<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(c,o,t,r);else for(var n=c.length-1;n>=0;n--)(e=c[n])&&(s=(i<3?e(s):i>3?e(o,t,s):e(o,t))||s);return i>3&&s&&Object.defineProperty(o,t,s),s},f=this&&this.__param||function(c,o){return function(t,r){o(t,r,c)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionRenderLayer=void 0;var E=y(1546),v=y(2585),a=function(c){function o(t,r,e,i,s,n){var h=c.call(this,t,"selection",r,!0,e,i,s,n)||this;return h._clearState(),h}return p(o,c),o.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},o.prototype.resize=function(t){c.prototype.resize.call(this,t),this._clearState()},o.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},o.prototype.onSelectionChanged=function(t,r,e){if(this._didStateChange(t,r,e,this._bufferService.buffer.ydisp))if(this._clearAll(),t&&r){var i=t[1]-this._bufferService.buffer.ydisp,s=r[1]-this._bufferService.buffer.ydisp,n=Math.max(i,0),h=Math.min(s,this._bufferService.rows-1);if(n>=this._bufferService.rows||h<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var _=t[0],m=r[0]-_,g=h-n+1;this._fillCells(_,n,m,g)}else{_=i===n?t[0]:0;var S=n===s?r[0]:this._bufferService.cols;this._fillCells(_,n,S-_,1);var C=Math.max(h-n-1,0);if(this._fillCells(0,n+1,this._bufferService.cols,C),n!==h){var k=s===h?r[0]:this._bufferService.cols;this._fillCells(0,h,k,1)}}this._state.start=[t[0],t[1]],this._state.end=[r[0],r[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},o.prototype._didStateChange=function(t,r,e,i){return!this._areCoordinatesEqual(t,this._state.start)||!this._areCoordinatesEqual(r,this._state.end)||e!==this._state.columnSelectMode||i!==this._state.ydisp},o.prototype._areCoordinatesEqual=function(t,r){return!(!t||!r)&&t[0]===r[0]&&t[1]===r[1]},d([f(4,v.IBufferService),f(5,v.IOptionsService)],o)}(E.BaseRenderLayer);l.SelectionRenderLayer=a},9596:function(I,l,y){var u,p=this&&this.__extends||(u=function(n,h){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,m){_.__proto__=m}||function(_,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(_[g]=m[g])})(n,h)},function(s,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function h(){this.constructor=s}u(s,n),s.prototype=n===null?Object.create(n):(h.prototype=n.prototype,new h)}),d=this&&this.__decorate||function(s,n,h,_){var m,g=arguments.length,S=g<3?n:_===null?_=Object.getOwnPropertyDescriptor(n,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(s,n,h,_);else for(var C=s.length-1;C>=0;C--)(m=s[C])&&(S=(g<3?m(S):g>3?m(n,h,S):m(n,h))||S);return g>3&&S&&Object.defineProperty(n,h,S),S},f=this&&this.__param||function(s,n){return function(h,_){n(h,_,s)}};Object.defineProperty(l,"__esModule",{value:!0}),l.TextRenderLayer=void 0;var E=y(3700),v=y(1546),a=y(3734),c=y(643),o=y(511),t=y(2585),r=y(4725),e=y(4269),i=function(s){function n(h,_,m,g,S,C,k,L){var A=s.call(this,h,"text",_,g,m,S,C,k)||this;return A._characterJoinerService=L,A._characterWidth=0,A._characterFont="",A._characterOverlapCache={},A._workCell=new o.CellData,A._state=new E.GridCache,A}return p(n,s),n.prototype.resize=function(h){s.prototype.resize.call(this,h);var _=this._getFont(!1,!1);this._characterWidth===h.scaledCharWidth&&this._characterFont===_||(this._characterWidth=h.scaledCharWidth,this._characterFont=_,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},n.prototype.reset=function(){this._state.clear(),this._clearAll()},n.prototype._forEachCell=function(h,_,m){for(var g=h;g<=_;g++)for(var S=g+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.lines.get(S),k=this._characterJoinerService.getJoinedCharacters(S),L=0;L<this._bufferService.cols;L++){C.loadCell(L,this._workCell);var A=this._workCell,w=!1,b=L;if(A.getWidth()!==0){if(k.length>0&&L===k[0][0]){w=!0;var P=k.shift();A=new e.JoinedCellData(this._workCell,C.translateToString(!0,P[0],P[1]),P[1]-P[0]),b=P[1]-1}!w&&this._isOverlapping(A)&&b<C.length-1&&C.getCodePoint(b+1)===c.NULL_CELL_CODE&&(A.content&=-12582913,A.content|=2<<22),m(A,L,g),L=b}}},n.prototype._drawBackground=function(h,_){var m=this,g=this._ctx,S=this._bufferService.cols,C=0,k=0,L=null;g.save(),this._forEachCell(h,_,function(A,w,b){var P=null;A.isInverse()?P=A.isFgDefault()?m._colors.foreground.css:A.isFgRGB()?"rgb("+a.AttributeData.toColorRGB(A.getFgColor()).join(",")+")":m._colors.ansi[A.getFgColor()].css:A.isBgRGB()?P="rgb("+a.AttributeData.toColorRGB(A.getBgColor()).join(",")+")":A.isBgPalette()&&(P=m._colors.ansi[A.getBgColor()].css),L===null&&(C=w,k=b),b!==k?(g.fillStyle=L||"",m._fillCells(C,k,S-C,1),C=w,k=b):L!==P&&(g.fillStyle=L||"",m._fillCells(C,k,w-C,1),C=w,k=b),L=P}),L!==null&&(g.fillStyle=L,this._fillCells(C,k,S-C,1)),g.restore()},n.prototype._drawForeground=function(h,_){var m=this;this._forEachCell(h,_,function(g,S,C){if(!g.isInvisible()&&(m._drawChars(g,S,C),g.isUnderline())){if(m._ctx.save(),g.isInverse())if(g.isBgDefault())m._ctx.fillStyle=m._colors.background.css;else if(g.isBgRGB())m._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(g.getBgColor()).join(",")+")";else{var k=g.getBgColor();m._optionsService.options.drawBoldTextInBrightColors&&g.isBold()&&k<8&&(k+=8),m._ctx.fillStyle=m._colors.ansi[k].css}else if(g.isFgDefault())m._ctx.fillStyle=m._colors.foreground.css;else if(g.isFgRGB())m._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(g.getFgColor()).join(",")+")";else{var L=g.getFgColor();m._optionsService.options.drawBoldTextInBrightColors&&g.isBold()&&L<8&&(L+=8),m._ctx.fillStyle=m._colors.ansi[L].css}m._fillBottomLineAtCells(S,C,g.getWidth()),m._ctx.restore()}})},n.prototype.onGridChanged=function(h,_){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,h,this._bufferService.cols,_-h+1),this._drawBackground(h,_),this._drawForeground(h,_))},n.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},n.prototype._isOverlapping=function(h){if(h.getWidth()!==1||h.getCode()<256)return!1;var _=h.getChars();if(this._characterOverlapCache.hasOwnProperty(_))return this._characterOverlapCache[_];this._ctx.save(),this._ctx.font=this._characterFont;var m=Math.floor(this._ctx.measureText(_).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[_]=m,m},d([f(5,t.IBufferService),f(6,t.IOptionsService),f(7,r.ICharacterJoinerService)],n)}(v.BaseRenderLayer);l.TextRenderLayer=i},9616:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.BaseCharAtlas=void 0;var y=function(){function u(){this._didWarmUp=!1}return u.prototype.dispose=function(){},u.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},u.prototype._doWarmUp=function(){},u.prototype.beginFrame=function(){},u}();l.BaseCharAtlas=y},1420:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.removeTerminalFromCache=l.acquireCharAtlas=void 0;var u=y(2040),p=y(1906),d=[];l.acquireCharAtlas=function(f,E,v,a,c){for(var o=u.generateConfig(a,c,f,v),t=0;t<d.length;t++){var r=(e=d[t]).ownedBy.indexOf(E);if(r>=0){if(u.configEquals(e.config,o))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),d.splice(t,1)):e.ownedBy.splice(r,1);break}}for(t=0;t<d.length;t++){var e=d[t];if(u.configEquals(e.config,o))return e.ownedBy.push(E),e.atlas}var i={atlas:new p.DynamicCharAtlas(document,o),config:o,ownedBy:[E]};return d.push(i),i.atlas},l.removeTerminalFromCache=function(f){for(var E=0;E<d.length;E++){var v=d[E].ownedBy.indexOf(f);if(v!==-1){d[E].ownedBy.length===1?(d[E].atlas.dispose(),d.splice(E,1)):d[E].ownedBy.splice(v,1);break}}}},2040:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.is256Color=l.configEquals=l.generateConfig=void 0;var u=y(643);l.generateConfig=function(p,d,f,E){var v={foreground:E.foreground,background:E.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:E.ansi};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:p,scaledCharHeight:d,fontFamily:f.fontFamily,fontSize:f.fontSize,fontWeight:f.fontWeight,fontWeightBold:f.fontWeightBold,allowTransparency:f.allowTransparency,colors:v}},l.configEquals=function(p,d){for(var f=0;f<p.colors.ansi.length;f++)if(p.colors.ansi[f].rgba!==d.colors.ansi[f].rgba)return!1;return p.devicePixelRatio===d.devicePixelRatio&&p.fontFamily===d.fontFamily&&p.fontSize===d.fontSize&&p.fontWeight===d.fontWeight&&p.fontWeightBold===d.fontWeightBold&&p.allowTransparency===d.allowTransparency&&p.scaledCharWidth===d.scaledCharWidth&&p.scaledCharHeight===d.scaledCharHeight&&p.colors.foreground===d.colors.foreground&&p.colors.background===d.colors.background},l.is256Color=function(p){return p<u.DEFAULT_COLOR}},8803:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.CHAR_ATLAS_CELL_SPACING=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0,l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.CHAR_ATLAS_CELL_SPACING=1},1906:function(I,l,y){var u,p=this&&this.__extends||(u=function(n,h){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,m){_.__proto__=m}||function(_,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(_[g]=m[g])})(n,h)},function(s,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function h(){this.constructor=s}u(s,n),s.prototype=n===null?Object.create(n):(h.prototype=n.prototype,new h)});Object.defineProperty(l,"__esModule",{value:!0}),l.NoneCharAtlas=l.DynamicCharAtlas=l.getGlyphCacheKey=void 0;var d=y(8803),f=y(9616),E=y(5680),v=y(7001),a=y(6114),c=y(1752),o=y(4774),t={css:"rgba(0, 0, 0, 0)",rgba:0};function r(s){return s.code<<21|s.bg<<12|s.fg<<3|(s.bold?0:4)+(s.dim?0:2)+(s.italic?0:1)}l.getGlyphCacheKey=r;var e=function(s){function n(h,_){var m=s.call(this)||this;m._config=_,m._drawToCacheCount=0,m._glyphsWaitingOnBitmap=[],m._bitmapCommitTimeout=null,m._bitmap=null,m._cacheCanvas=h.createElement("canvas"),m._cacheCanvas.width=1024,m._cacheCanvas.height=1024,m._cacheCtx=c.throwIfFalsy(m._cacheCanvas.getContext("2d",{alpha:!0}));var g=h.createElement("canvas");g.width=m._config.scaledCharWidth,g.height=m._config.scaledCharHeight,m._tmpCtx=c.throwIfFalsy(g.getContext("2d",{alpha:m._config.allowTransparency})),m._width=Math.floor(1024/m._config.scaledCharWidth),m._height=Math.floor(1024/m._config.scaledCharHeight);var S=m._width*m._height;return m._cacheMap=new v.LRUMap(S),m._cacheMap.prealloc(S),m}return p(n,s),n.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},n.prototype.beginFrame=function(){this._drawToCacheCount=0},n.prototype.draw=function(h,_,m,g){if(_.code===32)return!0;if(!this._canCache(_))return!1;var S=r(_),C=this._cacheMap.get(S);if(C!=null)return this._drawFromCache(h,C,m,g),!0;if(this._drawToCacheCount<100){var k;k=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var L=this._drawToCache(_,k);return this._cacheMap.set(S,L),this._drawFromCache(h,L,m,g),!0}return!1},n.prototype._canCache=function(h){return h.code<256},n.prototype._toCoordinateX=function(h){return h%this._width*this._config.scaledCharWidth},n.prototype._toCoordinateY=function(h){return Math.floor(h/this._width)*this._config.scaledCharHeight},n.prototype._drawFromCache=function(h,_,m,g){if(!_.isEmpty){var S=this._toCoordinateX(_.index),C=this._toCoordinateY(_.index);h.drawImage(_.inBitmap?this._bitmap:this._cacheCanvas,S,C,this._config.scaledCharWidth,this._config.scaledCharHeight,m,g,this._config.scaledCharWidth,this._config.scaledCharHeight)}},n.prototype._getColorFromAnsiIndex=function(h){return h<this._config.colors.ansi.length?this._config.colors.ansi[h]:E.DEFAULT_ANSI_COLORS[h]},n.prototype._getBackgroundColor=function(h){return this._config.allowTransparency?t:h.bg===d.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:h.bg<256?this._getColorFromAnsiIndex(h.bg):this._config.colors.background},n.prototype._getForegroundColor=function(h){return h.fg===d.INVERTED_DEFAULT_COLOR?o.color.opaque(this._config.colors.background):h.fg<256?this._getColorFromAnsiIndex(h.fg):this._config.colors.foreground},n.prototype._drawToCache=function(h,_){this._drawToCacheCount++,this._tmpCtx.save();var m=this._getBackgroundColor(h);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=m.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var g=h.bold?this._config.fontWeightBold:this._config.fontWeight,S=h.italic?"italic":"";this._tmpCtx.font=S+" "+g+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="ideographic",this._tmpCtx.fillStyle=this._getForegroundColor(h).css,h.dim&&(this._tmpCtx.globalAlpha=d.DIM_OPACITY),this._tmpCtx.fillText(h.chars,0,this._config.scaledCharHeight),this._tmpCtx.restore();var C=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),k=!1;this._config.allowTransparency||(k=function(b,P){for(var R=!0,j=P.rgba>>>24,H=P.rgba>>>16&255,F=P.rgba>>>8&255,Z=0;Z<b.data.length;Z+=4)b.data[Z]===j&&b.data[Z+1]===H&&b.data[Z+2]===F?b.data[Z+3]=0:R=!1;return R}(C,m));var L=this._toCoordinateX(_),A=this._toCoordinateY(_);this._cacheCtx.putImageData(C,L,A);var w={index:_,isEmpty:k,inBitmap:!1};return this._addGlyphToBitmap(w),w},n.prototype._addGlyphToBitmap=function(h){var _=this;!("createImageBitmap"in window)||a.isFirefox||a.isSafari||(this._glyphsWaitingOnBitmap.push(h),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return _._generateBitmap()},100)))},n.prototype._generateBitmap=function(){var h=this,_=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(m){h._bitmap=m;for(var g=0;g<_.length;g++)_[g].inBitmap=!0}),this._bitmapCommitTimeout=null},n}(f.BaseCharAtlas);l.DynamicCharAtlas=e;var i=function(s){function n(h,_){return s.call(this)||this}return p(n,s),n.prototype.draw=function(h,_,m,g){return!1},n}(f.BaseCharAtlas);l.NoneCharAtlas=i},7001:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.LRUMap=void 0;var y=function(){function u(p){this.capacity=p,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return u.prototype._unlinkNode=function(p){var d=p.prev,f=p.next;p===this._head&&(this._head=f),p===this._tail&&(this._tail=d),d!==null&&(d.next=f),f!==null&&(f.prev=d)},u.prototype._appendNode=function(p){var d=this._tail;d!==null&&(d.next=p),p.prev=d,p.next=null,this._tail=p,this._head===null&&(this._head=p)},u.prototype.prealloc=function(p){for(var d=this._nodePool,f=0;f<p;f++)d.push({prev:null,next:null,key:null,value:null})},u.prototype.get=function(p){var d=this._map[p];return d!==void 0?(this._unlinkNode(d),this._appendNode(d),d.value):null},u.prototype.peekValue=function(p){var d=this._map[p];return d!==void 0?d.value:null},u.prototype.peek=function(){var p=this._head;return p===null?null:p.value},u.prototype.set=function(p,d){var f=this._map[p];if(f!==void 0)f=this._map[p],this._unlinkNode(f),f.value=d;else if(this.size>=this.capacity)f=this._head,this._unlinkNode(f),delete this._map[f.key],f.key=p,f.value=d,this._map[p]=f;else{var E=this._nodePool;E.length>0?((f=E.pop()).key=p,f.value=d):f={prev:null,next:null,key:p,value:d},this._map[p]=f,this.size++}this._appendNode(f)},u}();l.LRUMap=y},1296:function(I,l,y){var u,p=this&&this.__extends||(u=function(S,C){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var A in L)Object.prototype.hasOwnProperty.call(L,A)&&(k[A]=L[A])})(S,C)},function(g,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function C(){this.constructor=g}u(g,S),g.prototype=S===null?Object.create(S):(C.prototype=S.prototype,new C)}),d=this&&this.__decorate||function(g,S,C,k){var L,A=arguments.length,w=A<3?S:k===null?k=Object.getOwnPropertyDescriptor(S,C):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,S,C,k);else for(var b=g.length-1;b>=0;b--)(L=g[b])&&(w=(A<3?L(w):A>3?L(S,C,w):L(S,C))||w);return A>3&&w&&Object.defineProperty(S,C,w),w},f=this&&this.__param||function(g,S){return function(C,k){S(C,k,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRenderer=void 0;var E=y(3787),v=y(8803),a=y(844),c=y(4725),o=y(2585),t=y(8460),r=y(4774),e=y(9631),i="xterm-dom-renderer-owner-",s="xterm-fg-",n="xterm-bg-",h="xterm-focus",_=1,m=function(g){function S(C,k,L,A,w,b,P,R,j,H){var F=g.call(this)||this;return F._colors=C,F._element=k,F._screenElement=L,F._viewportElement=A,F._linkifier=w,F._linkifier2=b,F._charSizeService=R,F._optionsService=j,F._bufferService=H,F._terminalClass=_++,F._rowElements=[],F._rowContainer=document.createElement("div"),F._rowContainer.classList.add("xterm-rows"),F._rowContainer.style.lineHeight="normal",F._rowContainer.setAttribute("aria-hidden","true"),F._refreshRowElements(F._bufferService.cols,F._bufferService.rows),F._selectionContainer=document.createElement("div"),F._selectionContainer.classList.add("xterm-selection"),F._selectionContainer.setAttribute("aria-hidden","true"),F.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},F._updateDimensions(),F._injectCss(),F._rowFactory=P.createInstance(E.DomRendererRowFactory,document,F._colors),F._element.classList.add(i+F._terminalClass),F._screenElement.appendChild(F._rowContainer),F._screenElement.appendChild(F._selectionContainer),F._linkifier.onShowLinkUnderline(function(Z){return F._onLinkHover(Z)}),F._linkifier.onHideLinkUnderline(function(Z){return F._onLinkLeave(Z)}),F._linkifier2.onShowLinkUnderline(function(Z){return F._onLinkHover(Z)}),F._linkifier2.onHideLinkUnderline(function(Z){return F._onLinkLeave(Z)}),F}return p(S,g),Object.defineProperty(S.prototype,"onRequestRedraw",{get:function(){return new t.EventEmitter().event},enumerable:!1,configurable:!0}),S.prototype.dispose=function(){this._element.classList.remove(i+this._terminalClass),e.removeElementFromParent(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),g.prototype.dispose.call(this)},S.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var C=0,k=this._rowElements;C<k.length;C++){var L=k[C];L.style.width=this.dimensions.canvasWidth+"px",L.style.height=this.dimensions.actualCellHeight+"px",L.style.lineHeight=this.dimensions.actualCellHeight+"px",L.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var A=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=A,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},S.prototype.setColors=function(C){this._colors=C,this._injectCss()},S.prototype._injectCss=function(){var C=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var k=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";k+=this._terminalSelector+" span:not(."+E.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+E.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+E.ITALIC_CLASS+" { font-style: italic;}",k+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",k+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",k+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+E.CURSOR_CLASS+"."+E.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+E.CURSOR_CLASS+"."+E.CURSOR_BLINK_CLASS+":not(."+E.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+E.CURSOR_CLASS+"."+E.CURSOR_BLINK_CLASS+"."+E.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+E.CURSOR_CLASS+"."+E.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+E.CURSOR_CLASS+"."+E.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+E.CURSOR_CLASS+"."+E.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",k+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(L,A){k+=C._terminalSelector+" ."+s+A+" { color: "+L.css+"; }"+C._terminalSelector+" ."+n+A+" { background-color: "+L.css+"; }"}),k+=this._terminalSelector+" ."+s+v.INVERTED_DEFAULT_COLOR+" { color: "+r.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+n+v.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=k},S.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},S.prototype._refreshRowElements=function(C,k){for(var L=this._rowElements.length;L<=k;L++){var A=document.createElement("div");this._rowContainer.appendChild(A),this._rowElements.push(A)}for(;this._rowElements.length>k;)this._rowContainer.removeChild(this._rowElements.pop())},S.prototype.onResize=function(C,k){this._refreshRowElements(C,k),this._updateDimensions()},S.prototype.onCharSizeChanged=function(){this._updateDimensions()},S.prototype.onBlur=function(){this._rowContainer.classList.remove(h)},S.prototype.onFocus=function(){this._rowContainer.classList.add(h)},S.prototype.onSelectionChanged=function(C,k,L){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(C&&k){var A=C[1]-this._bufferService.buffer.ydisp,w=k[1]-this._bufferService.buffer.ydisp,b=Math.max(A,0),P=Math.min(w,this._bufferService.rows-1);if(!(b>=this._bufferService.rows||P<0)){var R=document.createDocumentFragment();if(L)R.appendChild(this._createSelectionElement(b,C[0],k[0],P-b+1));else{var j=A===b?C[0]:0,H=b===w?k[0]:this._bufferService.cols;R.appendChild(this._createSelectionElement(b,j,H));var F=P-b-1;if(R.appendChild(this._createSelectionElement(b+1,0,this._bufferService.cols,F)),b!==P){var Z=w===P?k[0]:this._bufferService.cols;R.appendChild(this._createSelectionElement(P,0,Z))}}this._selectionContainer.appendChild(R)}}},S.prototype._createSelectionElement=function(C,k,L,A){A===void 0&&(A=1);var w=document.createElement("div");return w.style.height=A*this.dimensions.actualCellHeight+"px",w.style.top=C*this.dimensions.actualCellHeight+"px",w.style.left=k*this.dimensions.actualCellWidth+"px",w.style.width=this.dimensions.actualCellWidth*(L-k)+"px",w},S.prototype.onCursorMove=function(){},S.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},S.prototype.clear=function(){for(var C=0,k=this._rowElements;C<k.length;C++)k[C].innerText=""},S.prototype.renderRows=function(C,k){for(var L=this._bufferService.buffer.ybase+this._bufferService.buffer.y,A=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),w=this._optionsService.options.cursorBlink,b=C;b<=k;b++){var P=this._rowElements[b];P.innerText="";var R=b+this._bufferService.buffer.ydisp,j=this._bufferService.buffer.lines.get(R),H=this._optionsService.options.cursorStyle;P.appendChild(this._rowFactory.createRow(j,R,R===L,H,A,w,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(S.prototype,"_terminalSelector",{get:function(){return"."+i+this._terminalClass},enumerable:!1,configurable:!0}),S.prototype._onLinkHover=function(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!0)},S.prototype._onLinkLeave=function(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!1)},S.prototype._setCellUnderline=function(C,k,L,A,w,b){for(;C!==k||L!==A;){var P=this._rowElements[L];if(!P)return;var R=P.children[C];R&&(R.style.textDecoration=b?"underline":"none"),++C>=w&&(C=0,L++)}},d([f(6,o.IInstantiationService),f(7,c.ICharSizeService),f(8,o.IOptionsService),f(9,o.IBufferService)],S)}(a.Disposable);l.DomRenderer=m},3787:function(I,l,y){var u=this&&this.__decorate||function(e,i,s,n){var h,_=arguments.length,m=_<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,s):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,i,s,n);else for(var g=e.length-1;g>=0;g--)(h=e[g])&&(m=(_<3?h(m):_>3?h(i,s,m):h(i,s))||m);return _>3&&m&&Object.defineProperty(i,s,m),m},p=this&&this.__param||function(e,i){return function(s,n){i(s,n,e)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRendererRowFactory=l.CURSOR_STYLE_UNDERLINE_CLASS=l.CURSOR_STYLE_BAR_CLASS=l.CURSOR_STYLE_BLOCK_CLASS=l.CURSOR_BLINK_CLASS=l.CURSOR_CLASS=l.UNDERLINE_CLASS=l.ITALIC_CLASS=l.DIM_CLASS=l.BOLD_CLASS=void 0;var d=y(8803),f=y(643),E=y(511),v=y(2585),a=y(4774),c=y(4725),o=y(4269);l.BOLD_CLASS="xterm-bold",l.DIM_CLASS="xterm-dim",l.ITALIC_CLASS="xterm-italic",l.UNDERLINE_CLASS="xterm-underline",l.CURSOR_CLASS="xterm-cursor",l.CURSOR_BLINK_CLASS="xterm-cursor-blink",l.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",l.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",l.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var t=function(){function e(i,s,n,h){this._document=i,this._colors=s,this._characterJoinerService=n,this._optionsService=h,this._workCell=new E.CellData}return e.prototype.setColors=function(i){this._colors=i},e.prototype.createRow=function(i,s,n,h,_,m,g,S){for(var C=this._document.createDocumentFragment(),k=this._characterJoinerService.getJoinedCharacters(s),L=0,A=Math.min(i.length,S)-1;A>=0;A--)if(i.loadCell(A,this._workCell).getCode()!==f.NULL_CELL_CODE||n&&A===_){L=A+1;break}for(A=0;A<L;A++){i.loadCell(A,this._workCell);var w=this._workCell.getWidth();if(w!==0){var b=!1,P=A,R=this._workCell;if(k.length>0&&A===k[0][0]){b=!0;var j=k.shift();R=new o.JoinedCellData(this._workCell,i.translateToString(!0,j[0],j[1]),j[1]-j[0]),P=j[1]-1,w=R.getWidth()}var H=this._document.createElement("span");if(w>1&&(H.style.width=g*w+"px"),b&&(H.style.display="inline",_>=A&&_<=P&&(_=A)),n&&A===_)switch(H.classList.add(l.CURSOR_CLASS),m&&H.classList.add(l.CURSOR_BLINK_CLASS),h){case"bar":H.classList.add(l.CURSOR_STYLE_BAR_CLASS);break;case"underline":H.classList.add(l.CURSOR_STYLE_UNDERLINE_CLASS);break;default:H.classList.add(l.CURSOR_STYLE_BLOCK_CLASS)}R.isBold()&&H.classList.add(l.BOLD_CLASS),R.isItalic()&&H.classList.add(l.ITALIC_CLASS),R.isDim()&&H.classList.add(l.DIM_CLASS),R.isUnderline()&&H.classList.add(l.UNDERLINE_CLASS),R.isInvisible()?H.textContent=f.WHITESPACE_CELL_CHAR:H.textContent=R.getChars()||f.WHITESPACE_CELL_CHAR;var F=R.getFgColor(),Z=R.getFgColorMode(),V=R.getBgColor(),x=R.getBgColorMode(),O=!!R.isInverse();if(O){var T=F;F=V,V=T;var B=Z;Z=x,x=B}switch(Z){case 16777216:case 33554432:R.isBold()&&F<8&&this._optionsService.options.drawBoldTextInBrightColors&&(F+=8),this._applyMinimumContrast(H,this._colors.background,this._colors.ansi[F])||H.classList.add("xterm-fg-"+F);break;case 50331648:var M=a.rgba.toColor(F>>16&255,F>>8&255,255&F);this._applyMinimumContrast(H,this._colors.background,M)||this._addStyle(H,"color:#"+r(F.toString(16),"0",6));break;case 0:default:this._applyMinimumContrast(H,this._colors.background,this._colors.foreground)||O&&H.classList.add("xterm-fg-"+d.INVERTED_DEFAULT_COLOR)}switch(x){case 16777216:case 33554432:H.classList.add("xterm-bg-"+V);break;case 50331648:this._addStyle(H,"background-color:#"+r(V.toString(16),"0",6));break;case 0:default:O&&H.classList.add("xterm-bg-"+d.INVERTED_DEFAULT_COLOR)}C.appendChild(H),A=P}}return C},e.prototype._applyMinimumContrast=function(i,s,n){if(this._optionsService.options.minimumContrastRatio===1)return!1;var h=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return h===void 0&&(h=a.color.ensureContrastRatio(s,n,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,h!=null?h:null)),!!h&&(this._addStyle(i,"color:"+h.css),!0)},e.prototype._addStyle=function(i,s){i.setAttribute("style",""+(i.getAttribute("style")||"")+s+";")},u([p(2,c.ICharacterJoinerService),p(3,v.IOptionsService)],e)}();function r(e,i,s){for(;e.length<s;)e=i+e;return e}l.DomRendererRowFactory=t},456:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionModel=void 0;var y=function(){function u(p){this._bufferService=p,this.isSelectAllActive=!1,this.selectionStartLength=0}return u.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(u.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[d,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),u.prototype.areSelectionValuesReversed=function(){var p=this.selectionStart,d=this.selectionEnd;return!(!p||!d)&&(p[1]>d[1]||p[1]===d[1]&&p[0]>d[0])},u.prototype.onTrim=function(p){return this.selectionStart&&(this.selectionStart[1]-=p),this.selectionEnd&&(this.selectionEnd[1]-=p),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},u}();l.SelectionModel=y},428:function(I,l,y){var u=this&&this.__decorate||function(a,c,o,t){var r,e=arguments.length,i=e<3?c:t===null?t=Object.getOwnPropertyDescriptor(c,o):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,c,o,t);else for(var s=a.length-1;s>=0;s--)(r=a[s])&&(i=(e<3?r(i):e>3?r(c,o,i):r(c,o))||i);return e>3&&i&&Object.defineProperty(c,o,i),i},p=this&&this.__param||function(a,c){return function(o,t){c(o,t,a)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharSizeService=void 0;var d=y(2585),f=y(8460),E=function(){function a(c,o,t){this._optionsService=t,this.width=0,this.height=0,this._onCharSizeChange=new f.EventEmitter,this._measureStrategy=new v(c,o,this._optionsService)}return Object.defineProperty(a.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),a.prototype.measure=function(){var c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())},u([p(2,d.IOptionsService)],a)}();l.CharSizeService=E;var v=function(){function a(c,o,t){this._document=c,this._parentElement=o,this._optionsService=t,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return a.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var c=this._measureElement.getBoundingClientRect();return c.width!==0&&c.height!==0&&(this._result.width=c.width,this._result.height=Math.ceil(c.height)),this._result},a}()},4269:function(I,l,y){var u,p=this&&this.__extends||(u=function(e,i){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var h in n)Object.prototype.hasOwnProperty.call(n,h)&&(s[h]=n[h])})(e,i)},function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=r}u(r,e),r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}),d=this&&this.__decorate||function(r,e,i,s){var n,h=arguments.length,_=h<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(r,e,i,s);else for(var m=r.length-1;m>=0;m--)(n=r[m])&&(_=(h<3?n(_):h>3?n(e,i,_):n(e,i))||_);return h>3&&_&&Object.defineProperty(e,i,_),_},f=this&&this.__param||function(r,e){return function(i,s){e(i,s,r)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;var E=y(3734),v=y(643),a=y(511),c=y(2585),o=function(r){function e(i,s,n){var h=r.call(this)||this;return h.content=0,h.combinedData="",h.fg=i.fg,h.bg=i.bg,h.combinedData=s,h._width=n,h}return p(e,r),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(i){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(E.AttributeData);l.JoinedCellData=o;var t=function(){function r(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new a.CellData}return r.prototype.register=function(e){var i={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(i),i.id},r.prototype.deregister=function(e){for(var i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===e)return this._characterJoiners.splice(i,1),!0;return!1},r.prototype.getJoinedCharacters=function(e){if(this._characterJoiners.length===0)return[];var i=this._bufferService.buffer.lines.get(e);if(!i||i.length===0)return[];for(var s=[],n=i.translateToString(!0),h=0,_=0,m=0,g=i.getFg(0),S=i.getBg(0),C=0;C<i.getTrimmedLength();C++)if(i.loadCell(C,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==g||this._workCell.bg!==S){if(C-h>1)for(var k=this._getJoinedRanges(n,m,_,i,h),L=0;L<k.length;L++)s.push(k[L]);h=C,m=_,g=this._workCell.fg,S=this._workCell.bg}_+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-h>1)for(k=this._getJoinedRanges(n,m,_,i,h),L=0;L<k.length;L++)s.push(k[L]);return s},r.prototype._getJoinedRanges=function(e,i,s,n,h){for(var _=e.substring(i,s),m=this._characterJoiners[0].handler(_),g=1;g<this._characterJoiners.length;g++)for(var S=this._characterJoiners[g].handler(_),C=0;C<S.length;C++)r._mergeRanges(m,S[C]);return this._stringRangesToCellRanges(m,n,h),m},r.prototype._stringRangesToCellRanges=function(e,i,s){var n=0,h=!1,_=0,m=e[n];if(m){for(var g=s;g<this._bufferService.cols;g++){var S=i.getWidth(g),C=i.getString(g).length||v.WHITESPACE_CELL_CHAR.length;if(S!==0){if(!h&&m[0]<=_&&(m[0]=g,h=!0),m[1]<=_){if(m[1]=g,!(m=e[++n]))break;m[0]<=_?(m[0]=g,h=!0):h=!1}_+=C}}m&&(m[1]=this._bufferService.cols)}},r._mergeRanges=function(e,i){for(var s=!1,n=0;n<e.length;n++){var h=e[n];if(s){if(i[1]<=h[0])return e[n-1][1]=i[1],e;if(i[1]<=h[1])return e[n-1][1]=Math.max(i[1],h[1]),e.splice(n,1),e;e.splice(n,1),n--}else{if(i[1]<=h[0])return e.splice(n,0,i),e;if(i[1]<=h[1])return h[0]=Math.min(i[0],h[0]),e;i[0]<h[1]&&(h[0]=Math.min(i[0],h[0]),s=!0)}}return s?e[e.length-1][1]=i[1]:e.push(i),e},r=d([f(0,c.IBufferService)],r)}();l.CharacterJoinerService=t},5114:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.CoreBrowserService=void 0;var y=function(){function u(p){this._textarea=p}return Object.defineProperty(u.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),u}();l.CoreBrowserService=y},8934:function(I,l,y){var u=this&&this.__decorate||function(v,a,c,o){var t,r=arguments.length,e=r<3?a:o===null?o=Object.getOwnPropertyDescriptor(a,c):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(v,a,c,o);else for(var i=v.length-1;i>=0;i--)(t=v[i])&&(e=(r<3?t(e):r>3?t(a,c,e):t(a,c))||e);return r>3&&e&&Object.defineProperty(a,c,e),e},p=this&&this.__param||function(v,a){return function(c,o){a(c,o,v)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseService=void 0;var d=y(4725),f=y(9806),E=function(){function v(a,c){this._renderService=a,this._charSizeService=c}return v.prototype.getCoords=function(a,c,o,t,r){return f.getCoords(a,c,o,t,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,r)},v.prototype.getRawByteCoords=function(a,c,o,t){var r=this.getCoords(a,c,o,t);return f.getRawByteCoords(r)},u([p(0,d.IRenderService),p(1,d.ICharSizeService)],v)}();l.MouseService=E},3230:function(I,l,y){var u,p=this&&this.__extends||(u=function(s,n){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(h[m]=_[m])})(s,n)},function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function n(){this.constructor=i}u(i,s),i.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}),d=this&&this.__decorate||function(i,s,n,h){var _,m=arguments.length,g=m<3?s:h===null?h=Object.getOwnPropertyDescriptor(s,n):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(i,s,n,h);else for(var S=i.length-1;S>=0;S--)(_=i[S])&&(g=(m<3?_(g):m>3?_(s,n,g):_(s,n))||g);return m>3&&g&&Object.defineProperty(s,n,g),g},f=this&&this.__param||function(i,s){return function(n,h){s(n,h,i)}};Object.defineProperty(l,"__esModule",{value:!0}),l.RenderService=void 0;var E=y(6193),v=y(8460),a=y(844),c=y(5596),o=y(3656),t=y(2585),r=y(4725),e=function(i){function s(n,h,_,m,g,S){var C=i.call(this)||this;if(C._renderer=n,C._rowCount=h,C._charSizeService=g,C._isPaused=!1,C._needsFullRefresh=!1,C._isNextRenderRedrawOnly=!0,C._needsSelectionRefresh=!1,C._canvasWidth=0,C._canvasHeight=0,C._selectionState={start:void 0,end:void 0,columnSelectMode:!1},C._onDimensionsChange=new v.EventEmitter,C._onRender=new v.EventEmitter,C._onRefreshRequest=new v.EventEmitter,C.register({dispose:function(){return C._renderer.dispose()}}),C._renderDebouncer=new E.RenderDebouncer(function(L,A){return C._renderRows(L,A)}),C.register(C._renderDebouncer),C._screenDprMonitor=new c.ScreenDprMonitor,C._screenDprMonitor.setListener(function(){return C.onDevicePixelRatioChange()}),C.register(C._screenDprMonitor),C.register(S.onResize(function(L){return C._fullRefresh()})),C.register(m.onOptionChange(function(){return C._renderer.onOptionsChanged()})),C.register(C._charSizeService.onCharSizeChange(function(){return C.onCharSizeChanged()})),C._renderer.onRequestRedraw(function(L){return C.refreshRows(L.start,L.end,!0)}),C.register(o.addDisposableDomListener(window,"resize",function(){return C.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var k=new IntersectionObserver(function(L){return C._onIntersectionChange(L[L.length-1])},{threshold:0});k.observe(_),C.register({dispose:function(){return k.disconnect()}})}return C}return p(s,i),Object.defineProperty(s.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),s.prototype._onIntersectionChange=function(n){this._isPaused=n.isIntersecting===void 0?n.intersectionRatio===0:!n.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},s.prototype.refreshRows=function(n,h,_){_===void 0&&(_=!1),this._isPaused?this._needsFullRefresh=!0:(_||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(n,h,this._rowCount))},s.prototype._renderRows=function(n,h){this._renderer.renderRows(n,h),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:n,end:h}),this._isNextRenderRedrawOnly=!0},s.prototype.resize=function(n,h){this._rowCount=h,this._fireOnCanvasResize()},s.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},s.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},s.prototype.dispose=function(){i.prototype.dispose.call(this)},s.prototype.setRenderer=function(n){var h=this;this._renderer.dispose(),this._renderer=n,this._renderer.onRequestRedraw(function(_){return h.refreshRows(_.start,_.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},s.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},s.prototype.setColors=function(n){this._renderer.setColors(n),this._fullRefresh()},s.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},s.prototype.onResize=function(n,h){this._renderer.onResize(n,h),this._fullRefresh()},s.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},s.prototype.onBlur=function(){this._renderer.onBlur()},s.prototype.onFocus=function(){this._renderer.onFocus()},s.prototype.onSelectionChanged=function(n,h,_){this._selectionState.start=n,this._selectionState.end=h,this._selectionState.columnSelectMode=_,this._renderer.onSelectionChanged(n,h,_)},s.prototype.onCursorMove=function(){this._renderer.onCursorMove()},s.prototype.clear=function(){this._renderer.clear()},d([f(3,t.IOptionsService),f(4,r.ICharSizeService),f(5,t.IBufferService)],s)}(a.Disposable);l.RenderService=e},9312:function(I,l,y){var u,p=this&&this.__extends||(u=function(g,S){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,k){C.__proto__=k}||function(C,k){for(var L in k)Object.prototype.hasOwnProperty.call(k,L)&&(C[L]=k[L])})(g,S)},function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function S(){this.constructor=m}u(m,g),m.prototype=g===null?Object.create(g):(S.prototype=g.prototype,new S)}),d=this&&this.__decorate||function(m,g,S,C){var k,L=arguments.length,A=L<3?g:C===null?C=Object.getOwnPropertyDescriptor(g,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(m,g,S,C);else for(var w=m.length-1;w>=0;w--)(k=m[w])&&(A=(L<3?k(A):L>3?k(g,S,A):k(g,S))||A);return L>3&&A&&Object.defineProperty(g,S,A),A},f=this&&this.__param||function(m,g){return function(S,C){g(S,C,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionService=void 0;var E=y(6114),v=y(456),a=y(511),c=y(8460),o=y(4725),t=y(2585),r=y(9806),e=y(9504),i=y(844),s=y(4841),n=String.fromCharCode(160),h=new RegExp(n,"g"),_=function(m){function g(S,C,k,L,A,w,b,P){var R=m.call(this)||this;return R._element=S,R._screenElement=C,R._linkifier=k,R._bufferService=L,R._coreService=A,R._mouseService=w,R._optionsService=b,R._renderService=P,R._dragScrollAmount=0,R._enabled=!0,R._workCell=new a.CellData,R._mouseDownTimeStamp=0,R._oldHasSelection=!1,R._oldSelectionStart=void 0,R._oldSelectionEnd=void 0,R._onLinuxMouseSelection=R.register(new c.EventEmitter),R._onRedrawRequest=R.register(new c.EventEmitter),R._onSelectionChange=R.register(new c.EventEmitter),R._onRequestScrollLines=R.register(new c.EventEmitter),R._mouseMoveListener=function(j){return R._onMouseMove(j)},R._mouseUpListener=function(j){return R._onMouseUp(j)},R._coreService.onUserInput(function(){R.hasSelection&&R.clearSelection()}),R._trimListener=R._bufferService.buffer.lines.onTrim(function(j){return R._onTrim(j)}),R.register(R._bufferService.buffers.onBufferActivate(function(j){return R._onBufferActivate(j)})),R.enable(),R._model=new v.SelectionModel(R._bufferService),R._activeSelectionMode=0,R}return p(g,m),Object.defineProperty(g.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),g.prototype.dispose=function(){this._removeMouseDownListeners()},g.prototype.reset=function(){this.clearSelection()},g.prototype.disable=function(){this.clearSelection(),this._enabled=!1},g.prototype.enable=function(){this._enabled=!0},Object.defineProperty(g.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"hasSelection",{get:function(){var C=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!(!C||!k||C[0]===k[0]&&C[1]===k[1])},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"selectionText",{get:function(){var C=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;if(!C||!k)return"";var L=this._bufferService.buffer,A=[];if(this._activeSelectionMode===3){if(C[0]===k[0])return"";for(var w=C[1];w<=k[1];w++){var b=L.translateBufferLineToString(w,!0,C[0],k[0]);A.push(b)}}else{var P=C[1]===k[1]?k[0]:void 0;for(A.push(L.translateBufferLineToString(C[1],!0,C[0],P)),w=C[1]+1;w<=k[1]-1;w++){var R=L.lines.get(w);b=L.translateBufferLineToString(w,!0),R&&R.isWrapped?A[A.length-1]+=b:A.push(b)}C[1]!==k[1]&&(R=L.lines.get(k[1]),b=L.translateBufferLineToString(k[1],!0,0,k[0]),R&&R.isWrapped?A[A.length-1]+=b:A.push(b))}return A.map(function(j){return j.replace(h," ")}).join(E.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),g.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},g.prototype.refresh=function(S){var C=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return C._refresh()})),E.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},g.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},g.prototype._isClickInSelection=function(S){var C=this._getMouseBufferCoords(S),k=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!!(k&&L&&C)&&this._areCoordsInSelection(C,k,L)},g.prototype._areCoordsInSelection=function(S,C,k){return S[1]>C[1]&&S[1]<k[1]||C[1]===k[1]&&S[1]===C[1]&&S[0]>=C[0]&&S[0]<k[0]||C[1]<k[1]&&S[1]===k[1]&&S[0]<k[0]||C[1]<k[1]&&S[1]===C[1]&&S[0]>=C[0]},g.prototype._selectWordAtCursor=function(S,C){var k,L,A=(L=(k=this._linkifier.currentLink)===null||k===void 0?void 0:k.link)===null||L===void 0?void 0:L.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=s.getRangeLength(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var w=this._getMouseBufferCoords(S);return!!w&&(this._selectWordAt(w,C),this._model.selectionEnd=void 0,!0)},g.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},g.prototype.selectLines=function(S,C){this._model.clearSelection(),S=Math.max(S,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()},g.prototype._onTrim=function(S){this._model.onTrim(S)&&this.refresh()},g.prototype._getMouseBufferCoords=function(S){var C=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C},g.prototype._getMouseEventScrollAmount=function(S){var C=r.getCoordsRelativeToElement(S,this._screenElement)[1],k=this._renderService.dimensions.canvasHeight;return C>=0&&C<=k?0:(C>k&&(C-=k),C=Math.min(Math.max(C,-50),50),(C/=50)/Math.abs(C)+Math.round(14*C))},g.prototype.shouldForceSelection=function(S){return E.isMac?S.altKey&&this._optionsService.options.macOptionClickForcesSelection:S.shiftKey},g.prototype.onMouseDown=function(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._onIncrementalClick(S):S.detail===1?this._onSingleClick(S):S.detail===2?this._onDoubleClick(S):S.detail===3&&this._onTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}},g.prototype._addMouseDownListeners=function(){var S=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return S._dragScroll()},50)},g.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},g.prototype._onIncrementalClick=function(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))},g.prototype._onSingleClick=function(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),this._model.selectionStart){this._model.selectionEnd=void 0;var C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&C.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},g.prototype._onDoubleClick=function(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)},g.prototype._onTripleClick=function(S){var C=this._getMouseBufferCoords(S);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))},g.prototype.shouldColumnSelect=function(S){return S.altKey&&!(E.isMac&&this._optionsService.options.macOptionClickForcesSelection)},g.prototype._onMouseMove=function(S){if(S.stopImmediatePropagation(),this._model.selectionStart){var C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var k=this._bufferService.buffer;if(this._model.selectionEnd[1]<k.lines.length){var L=k.lines.get(this._model.selectionEnd[1]);L&&L.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},g.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}},g.prototype._onMouseUp=function(S){var C=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&S.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var k=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(k&&k[0]!==void 0&&k[1]!==void 0){var L=e.moveToCellSequence(k[0]-1,k[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(L,!0)}}}else this._fireEventIfSelectionChanged()},g.prototype._fireEventIfSelectionChanged=function(){var S=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,k=!(!S||!C||S[0]===C[0]&&S[1]===C[1]);k?S&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,C,k)):this._oldHasSelection&&this._fireOnSelectionChange(S,C,k)},g.prototype._fireOnSelectionChange=function(S,C,k){this._oldSelectionStart=S,this._oldSelectionEnd=C,this._oldHasSelection=k,this._onSelectionChange.fire()},g.prototype._onBufferActivate=function(S){var C=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(function(k){return C._onTrim(k)})},g.prototype._convertViewportColToCharacterIndex=function(S,C){for(var k=C[0],L=0;C[0]>=L;L++){var A=S.loadCell(L,this._workCell).getChars().length;this._workCell.getWidth()===0?k--:A>1&&C[0]!==L&&(k+=A-1)}return k},g.prototype.setSelection=function(S,C,k){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,C],this._model.selectionStartLength=k,this.refresh()},g.prototype.rightClickSelect=function(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},g.prototype._getWordAt=function(S,C,k,L){if(k===void 0&&(k=!0),L===void 0&&(L=!0),!(S[0]>=this._bufferService.cols)){var A=this._bufferService.buffer,w=A.lines.get(S[1]);if(w){var b=A.translateBufferLineToString(S[1],!1),P=this._convertViewportColToCharacterIndex(w,S),R=P,j=S[0]-P,H=0,F=0,Z=0,V=0;if(b.charAt(P)===" "){for(;P>0&&b.charAt(P-1)===" ";)P--;for(;R<b.length&&b.charAt(R+1)===" ";)R++}else{var x=S[0],O=S[0];w.getWidth(x)===0&&(H++,x--),w.getWidth(O)===2&&(F++,O++);var T=w.getString(O).length;for(T>1&&(V+=T-1,R+=T-1);x>0&&P>0&&!this._isCharWordSeparator(w.loadCell(x-1,this._workCell));){w.loadCell(x-1,this._workCell);var B=this._workCell.getChars().length;this._workCell.getWidth()===0?(H++,x--):B>1&&(Z+=B-1,P-=B-1),P--,x--}for(;O<w.length&&R+1<b.length&&!this._isCharWordSeparator(w.loadCell(O+1,this._workCell));){w.loadCell(O+1,this._workCell);var M=this._workCell.getChars().length;this._workCell.getWidth()===2?(F++,O++):M>1&&(V+=M-1,R+=M-1),R++,O++}}R++;var U=P+j-H+Z,N=Math.min(this._bufferService.cols,R-P+H+F-Z-V);if(C||b.slice(P,R).trim()!==""){if(k&&U===0&&w.getCodePoint(0)!==32){var X=A.lines.get(S[1]-1);if(X&&w.isWrapped&&X.getCodePoint(this._bufferService.cols-1)!==32){var Y=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(Y){var ee=this._bufferService.cols-Y.start;U-=ee,N+=ee}}}if(L&&U+N===this._bufferService.cols&&w.getCodePoint(this._bufferService.cols-1)!==32){var z=A.lines.get(S[1]+1);if(z&&z.isWrapped&&z.getCodePoint(0)!==32){var G=this._getWordAt([0,S[1]+1],!1,!1,!0);G&&(N+=G.length)}}return{start:U,length:N}}}}},g.prototype._selectWordAt=function(S,C){var k=this._getWordAt(S,C);if(k){for(;k.start<0;)k.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[k.start,S[1]],this._model.selectionStartLength=k.length}},g.prototype._selectToWordAt=function(S){var C=this._getWordAt(S,!0);if(C){for(var k=S[1];C.start<0;)C.start+=this._bufferService.cols,k--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,k++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,k]}},g.prototype._isCharWordSeparator=function(S){return S.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(S.getChars())>=0},g.prototype._selectLineAt=function(S){var C=this._bufferService.buffer.getWrappedRangeForLine(S);this._model.selectionStart=[0,C.first],this._model.selectionEnd=[this._bufferService.cols,C.last],this._model.selectionStartLength=0},d([f(3,t.IBufferService),f(4,t.ICoreService),f(5,o.IMouseService),f(6,t.IOptionsService),f(7,o.IRenderService)],g)}(i.Disposable);l.SelectionService=_},4725:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.ICharacterJoinerService=l.ISoundService=l.ISelectionService=l.IRenderService=l.IMouseService=l.ICoreBrowserService=l.ICharSizeService=void 0;var u=y(8343);l.ICharSizeService=u.createDecorator("CharSizeService"),l.ICoreBrowserService=u.createDecorator("CoreBrowserService"),l.IMouseService=u.createDecorator("MouseService"),l.IRenderService=u.createDecorator("RenderService"),l.ISelectionService=u.createDecorator("SelectionService"),l.ISoundService=u.createDecorator("SoundService"),l.ICharacterJoinerService=u.createDecorator("CharacterJoinerService")},357:function(I,l,y){var u=this&&this.__decorate||function(E,v,a,c){var o,t=arguments.length,r=t<3?v:c===null?c=Object.getOwnPropertyDescriptor(v,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(E,v,a,c);else for(var e=E.length-1;e>=0;e--)(o=E[e])&&(r=(t<3?o(r):t>3?o(v,a,r):o(v,a))||r);return t>3&&r&&Object.defineProperty(v,a,r),r},p=this&&this.__param||function(E,v){return function(a,c){v(a,c,E)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SoundService=void 0;var d=y(2585),f=function(){function E(v){this._optionsService=v}return Object.defineProperty(E,"audioContext",{get:function(){if(!E._audioContext){var a=window.AudioContext||window.webkitAudioContext;if(!a)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;E._audioContext=new a}return E._audioContext},enumerable:!1,configurable:!0}),E.prototype.playBellSound=function(){var v=E.audioContext;if(v){var a=v.createBufferSource();v.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(c){a.buffer=c,a.connect(v.destination),a.start(0)})}},E.prototype._base64ToArrayBuffer=function(v){for(var a=window.atob(v),c=a.length,o=new Uint8Array(c),t=0;t<c;t++)o[t]=a.charCodeAt(t);return o.buffer},E.prototype._removeMimeType=function(v){return v.split(",")[1]},E=u([p(0,d.IOptionsService)],E)}();l.SoundService=f},6349:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.CircularList=void 0;var u=y(8460),p=function(){function d(f){this._maxLength=f,this.onDeleteEmitter=new u.EventEmitter,this.onInsertEmitter=new u.EventEmitter,this.onTrimEmitter=new u.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(d.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"maxLength",{get:function(){return this._maxLength},set:function(E){if(this._maxLength!==E){for(var v=new Array(E),a=0;a<Math.min(E,this.length);a++)v[a]=this._array[this._getCyclicIndex(a)];this._array=v,this._maxLength=E,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"length",{get:function(){return this._length},set:function(E){if(E>this._length)for(var v=this._length;v<E;v++)this._array[v]=void 0;this._length=E},enumerable:!1,configurable:!0}),d.prototype.get=function(f){return this._array[this._getCyclicIndex(f)]},d.prototype.set=function(f,E){this._array[this._getCyclicIndex(f)]=E},d.prototype.push=function(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},d.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(d.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),d.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},d.prototype.splice=function(f,E){for(var v=[],a=2;a<arguments.length;a++)v[a-2]=arguments[a];if(E){for(var c=f;c<this._length-E;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+E)];this._length-=E,this.onDeleteEmitter.fire({index:f,amount:E})}for(c=this._length-1;c>=f;c--)this._array[this._getCyclicIndex(c+v.length)]=this._array[this._getCyclicIndex(c)];for(c=0;c<v.length;c++)this._array[this._getCyclicIndex(f+c)]=v[c];if(v.length&&this.onInsertEmitter.fire({index:f,amount:v.length}),this._length+v.length>this._maxLength){var o=this._length+v.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=v.length},d.prototype.trimStart=function(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)},d.prototype.shiftElements=function(f,E,v){if(!(E<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(var a=E-1;a>=0;a--)this.set(f+a+v,this.get(f+a));var c=f+E+v-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(a=0;a<E;a++)this.set(f+a+v,this.get(f+a))}},d.prototype._getCyclicIndex=function(f){return(this._startIndex+f)%this._maxLength},d}();l.CircularList=p},1439:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.clone=void 0,l.clone=function y(u,p){if(p===void 0&&(p=5),typeof u!="object")return u;var d=Array.isArray(u)?[]:{};for(var f in u)d[f]=p<=1?u[f]:u[f]&&y(u[f],p-1);return d}},8969:function(I,l,y){var u,p=this&&this.__extends||(u=function(C,k){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,A){L.__proto__=A}||function(L,A){for(var w in A)Object.prototype.hasOwnProperty.call(A,w)&&(L[w]=A[w])})(C,k)},function(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function k(){this.constructor=S}u(S,C),S.prototype=C===null?Object.create(C):(k.prototype=C.prototype,new k)});Object.defineProperty(l,"__esModule",{value:!0}),l.CoreTerminal=void 0;var d=y(844),f=y(2585),E=y(4348),v=y(7866),a=y(744),c=y(7302),o=y(6975),t=y(8460),r=y(1753),e=y(3730),i=y(1480),s=y(7994),n=y(9282),h=y(5435),_=y(5981),m=!1,g=function(S){function C(k){var L=S.call(this)||this;return L._onBinary=new t.EventEmitter,L._onData=new t.EventEmitter,L._onLineFeed=new t.EventEmitter,L._onResize=new t.EventEmitter,L._onScroll=new t.EventEmitter,L._instantiationService=new E.InstantiationService,L.optionsService=new c.OptionsService(k),L._instantiationService.setService(f.IOptionsService,L.optionsService),L._bufferService=L.register(L._instantiationService.createInstance(a.BufferService)),L._instantiationService.setService(f.IBufferService,L._bufferService),L._logService=L._instantiationService.createInstance(v.LogService),L._instantiationService.setService(f.ILogService,L._logService),L._coreService=L.register(L._instantiationService.createInstance(o.CoreService,function(){return L.scrollToBottom()})),L._instantiationService.setService(f.ICoreService,L._coreService),L._coreMouseService=L._instantiationService.createInstance(r.CoreMouseService),L._instantiationService.setService(f.ICoreMouseService,L._coreMouseService),L._dirtyRowService=L._instantiationService.createInstance(e.DirtyRowService),L._instantiationService.setService(f.IDirtyRowService,L._dirtyRowService),L.unicodeService=L._instantiationService.createInstance(i.UnicodeService),L._instantiationService.setService(f.IUnicodeService,L.unicodeService),L._charsetService=L._instantiationService.createInstance(s.CharsetService),L._instantiationService.setService(f.ICharsetService,L._charsetService),L._inputHandler=new h.InputHandler(L._bufferService,L._charsetService,L._coreService,L._dirtyRowService,L._logService,L.optionsService,L._coreMouseService,L.unicodeService),L.register(t.forwardEvent(L._inputHandler.onLineFeed,L._onLineFeed)),L.register(L._inputHandler),L.register(t.forwardEvent(L._bufferService.onResize,L._onResize)),L.register(t.forwardEvent(L._coreService.onData,L._onData)),L.register(t.forwardEvent(L._coreService.onBinary,L._onBinary)),L.register(L.optionsService.onOptionChange(function(A){return L._updateOptions(A)})),L.register(L._bufferService.onScroll(function(A){L._onScroll.fire({position:L._bufferService.buffer.ydisp,source:0}),L._dirtyRowService.markRangeDirty(L._bufferService.buffer.scrollTop,L._bufferService.buffer.scrollBottom)})),L._writeBuffer=new _.WriteBuffer(function(A,w){return L._inputHandler.parse(A,w)}),L}return p(C,S),Object.defineProperty(C.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onScroll",{get:function(){var L=this;return this._onScrollApi||(this._onScrollApi=new t.EventEmitter,this.register(this._onScroll.event(function(A){var w;(w=L._onScrollApi)===null||w===void 0||w.fire(A.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){var k;this._isDisposed||(S.prototype.dispose.call(this),(k=this._windowsMode)===null||k===void 0||k.dispose(),this._windowsMode=void 0)},C.prototype.write=function(k,L){this._writeBuffer.write(k,L)},C.prototype.writeSync=function(k,L){this._logService.logLevel<=f.LogLevelEnum.WARN&&!m&&(this._logService.warn("writeSync is unreliable and will be removed soon."),m=!0),this._writeBuffer.writeSync(k,L)},C.prototype.resize=function(k,L){isNaN(k)||isNaN(L)||(k=Math.max(k,a.MINIMUM_COLS),L=Math.max(L,a.MINIMUM_ROWS),this._bufferService.resize(k,L))},C.prototype.scroll=function(k,L){L===void 0&&(L=!1),this._bufferService.scroll(k,L)},C.prototype.scrollLines=function(k,L,A){this._bufferService.scrollLines(k,L,A)},C.prototype.scrollPages=function(k){this._bufferService.scrollPages(k)},C.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},C.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},C.prototype.scrollToLine=function(k){this._bufferService.scrollToLine(k)},C.prototype.registerEscHandler=function(k,L){return this._inputHandler.registerEscHandler(k,L)},C.prototype.registerDcsHandler=function(k,L){return this._inputHandler.registerDcsHandler(k,L)},C.prototype.registerCsiHandler=function(k,L){return this._inputHandler.registerCsiHandler(k,L)},C.prototype.registerOscHandler=function(k,L){return this._inputHandler.registerOscHandler(k,L)},C.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},C.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this._coreService.reset(),this._coreMouseService.reset()},C.prototype._updateOptions=function(k){var L;switch(k){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():((L=this._windowsMode)===null||L===void 0||L.dispose(),this._windowsMode=void 0)}},C.prototype._enableWindowsMode=function(){var k=this;if(!this._windowsMode){var L=[];L.push(this.onLineFeed(n.updateWindowsModeWrappedState.bind(null,this._bufferService))),L.push(this.registerCsiHandler({final:"H"},function(){return n.updateWindowsModeWrappedState(k._bufferService),!1})),this._windowsMode={dispose:function(){for(var w=0,b=L;w<b.length;w++)b[w].dispose()}}}},C}(d.Disposable);l.CoreTerminal=g},8460:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.forwardEvent=l.EventEmitter=void 0;var y=function(){function u(){this._listeners=[],this._disposed=!1}return Object.defineProperty(u.prototype,"event",{get:function(){var d=this;return this._event||(this._event=function(f){return d._listeners.push(f),{dispose:function(){if(!d._disposed){for(var v=0;v<d._listeners.length;v++)if(d._listeners[v]===f)return void d._listeners.splice(v,1)}}}}),this._event},enumerable:!1,configurable:!0}),u.prototype.fire=function(p,d){for(var f=[],E=0;E<this._listeners.length;E++)f.push(this._listeners[E]);for(E=0;E<f.length;E++)f[E].call(void 0,p,d)},u.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},u}();l.EventEmitter=y,l.forwardEvent=function(u,p){return u(function(d){return p.fire(d)})}},5435:function(I,l,y){var u,p=this&&this.__extends||(u=function(A,w){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,P){b.__proto__=P}||function(b,P){for(var R in P)Object.prototype.hasOwnProperty.call(P,R)&&(b[R]=P[R])})(A,w)},function(L,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function w(){this.constructor=L}u(L,A),L.prototype=A===null?Object.create(A):(w.prototype=A.prototype,new w)});Object.defineProperty(l,"__esModule",{value:!0}),l.InputHandler=l.WindowsOptionsReportType=void 0;var d,f=y(2584),E=y(7116),v=y(2015),a=y(844),c=y(8273),o=y(482),t=y(8437),r=y(8460),e=y(643),i=y(511),s=y(3734),n=y(2585),h=y(6242),_=y(6351),m={"(":0,")":1,"*":2,"+":3,"-":1,".":2},g=131072;function S(L,A){if(L>24)return A.setWinLines||!1;switch(L){case 1:return!!A.restoreWin;case 2:return!!A.minimizeWin;case 3:return!!A.setWinPosition;case 4:return!!A.setWinSizePixels;case 5:return!!A.raiseWin;case 6:return!!A.lowerWin;case 7:return!!A.refreshWin;case 8:return!!A.setWinSizeChars;case 9:return!!A.maximizeWin;case 10:return!!A.fullscreenWin;case 11:return!!A.getWinState;case 13:return!!A.getWinPosition;case 14:return!!A.getWinSizePixels;case 15:return!!A.getScreenSizePixels;case 16:return!!A.getCellSizePixels;case 18:return!!A.getWinSizeChars;case 19:return!!A.getScreenSizeChars;case 20:return!!A.getIconTitle;case 21:return!!A.getWinTitle;case 22:return!!A.pushTitle;case 23:return!!A.popTitle;case 24:return!!A.setWinLines}return!1}(function(L){L[L.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",L[L.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(d=l.WindowsOptionsReportType||(l.WindowsOptionsReportType={}));var C=function(){function L(A,w,b,P){this._bufferService=A,this._coreService=w,this._logService=b,this._optionsService=P,this._data=new Uint32Array(0)}return L.prototype.hook=function(A){this._data=new Uint32Array(0)},L.prototype.put=function(A,w,b){this._data=c.concat(this._data,A.subarray(w,b))},L.prototype.unhook=function(A){if(!A)return this._data=new Uint32Array(0),!0;var w=o.utf32ToString(this._data);switch(this._data=new Uint32Array(0),w){case'"q':this._coreService.triggerDataEvent(f.C0.ESC+'P1$r0"q'+f.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(f.C0.ESC+'P1$r61;1"p'+f.C0.ESC+"\\");break;case"r":var b=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(f.C0.ESC+"P1$r"+b+f.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(f.C0.ESC+"P1$r0m"+f.C0.ESC+"\\");break;case" q":var P={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];P-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(f.C0.ESC+"P1$r"+P+" q"+f.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",w),this._coreService.triggerDataEvent(f.C0.ESC+"P0$r"+f.C0.ESC+"\\")}return!0},L}(),k=function(L){function A(w,b,P,R,j,H,F,Z,V){V===void 0&&(V=new v.EscapeSequenceParser);var x=L.call(this)||this;x._bufferService=w,x._charsetService=b,x._coreService=P,x._dirtyRowService=R,x._logService=j,x._optionsService=H,x._coreMouseService=F,x._unicodeService=Z,x._parser=V,x._parseBuffer=new Uint32Array(4096),x._stringDecoder=new o.StringToUtf32,x._utf8Decoder=new o.Utf8ToUtf32,x._workCell=new i.CellData,x._windowTitle="",x._iconName="",x._windowTitleStack=[],x._iconNameStack=[],x._curAttrData=t.DEFAULT_ATTR_DATA.clone(),x._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone(),x._onRequestBell=new r.EventEmitter,x._onRequestRefreshRows=new r.EventEmitter,x._onRequestReset=new r.EventEmitter,x._onRequestSyncScrollBar=new r.EventEmitter,x._onRequestWindowsOptionsReport=new r.EventEmitter,x._onA11yChar=new r.EventEmitter,x._onA11yTab=new r.EventEmitter,x._onCursorMove=new r.EventEmitter,x._onLineFeed=new r.EventEmitter,x._onScroll=new r.EventEmitter,x._onTitleChange=new r.EventEmitter,x._onAnsiColorChange=new r.EventEmitter,x._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},x.register(x._parser),x._parser.setCsiHandlerFallback(function(M,U){x._logService.debug("Unknown CSI code: ",{identifier:x._parser.identToString(M),params:U.toArray()})}),x._parser.setEscHandlerFallback(function(M){x._logService.debug("Unknown ESC code: ",{identifier:x._parser.identToString(M)})}),x._parser.setExecuteHandlerFallback(function(M){x._logService.debug("Unknown EXECUTE code: ",{code:M})}),x._parser.setOscHandlerFallback(function(M,U,N){x._logService.debug("Unknown OSC code: ",{identifier:M,action:U,data:N})}),x._parser.setDcsHandlerFallback(function(M,U,N){U==="HOOK"&&(N=N.toArray()),x._logService.debug("Unknown DCS code: ",{identifier:x._parser.identToString(M),action:U,payload:N})}),x._parser.setPrintHandler(function(M,U,N){return x.print(M,U,N)}),x._parser.registerCsiHandler({final:"@"},function(M){return x.insertChars(M)}),x._parser.registerCsiHandler({intermediates:" ",final:"@"},function(M){return x.scrollLeft(M)}),x._parser.registerCsiHandler({final:"A"},function(M){return x.cursorUp(M)}),x._parser.registerCsiHandler({intermediates:" ",final:"A"},function(M){return x.scrollRight(M)}),x._parser.registerCsiHandler({final:"B"},function(M){return x.cursorDown(M)}),x._parser.registerCsiHandler({final:"C"},function(M){return x.cursorForward(M)}),x._parser.registerCsiHandler({final:"D"},function(M){return x.cursorBackward(M)}),x._parser.registerCsiHandler({final:"E"},function(M){return x.cursorNextLine(M)}),x._parser.registerCsiHandler({final:"F"},function(M){return x.cursorPrecedingLine(M)}),x._parser.registerCsiHandler({final:"G"},function(M){return x.cursorCharAbsolute(M)}),x._parser.registerCsiHandler({final:"H"},function(M){return x.cursorPosition(M)}),x._parser.registerCsiHandler({final:"I"},function(M){return x.cursorForwardTab(M)}),x._parser.registerCsiHandler({final:"J"},function(M){return x.eraseInDisplay(M)}),x._parser.registerCsiHandler({prefix:"?",final:"J"},function(M){return x.eraseInDisplay(M)}),x._parser.registerCsiHandler({final:"K"},function(M){return x.eraseInLine(M)}),x._parser.registerCsiHandler({prefix:"?",final:"K"},function(M){return x.eraseInLine(M)}),x._parser.registerCsiHandler({final:"L"},function(M){return x.insertLines(M)}),x._parser.registerCsiHandler({final:"M"},function(M){return x.deleteLines(M)}),x._parser.registerCsiHandler({final:"P"},function(M){return x.deleteChars(M)}),x._parser.registerCsiHandler({final:"S"},function(M){return x.scrollUp(M)}),x._parser.registerCsiHandler({final:"T"},function(M){return x.scrollDown(M)}),x._parser.registerCsiHandler({final:"X"},function(M){return x.eraseChars(M)}),x._parser.registerCsiHandler({final:"Z"},function(M){return x.cursorBackwardTab(M)}),x._parser.registerCsiHandler({final:"`"},function(M){return x.charPosAbsolute(M)}),x._parser.registerCsiHandler({final:"a"},function(M){return x.hPositionRelative(M)}),x._parser.registerCsiHandler({final:"b"},function(M){return x.repeatPrecedingCharacter(M)}),x._parser.registerCsiHandler({final:"c"},function(M){return x.sendDeviceAttributesPrimary(M)}),x._parser.registerCsiHandler({prefix:">",final:"c"},function(M){return x.sendDeviceAttributesSecondary(M)}),x._parser.registerCsiHandler({final:"d"},function(M){return x.linePosAbsolute(M)}),x._parser.registerCsiHandler({final:"e"},function(M){return x.vPositionRelative(M)}),x._parser.registerCsiHandler({final:"f"},function(M){return x.hVPosition(M)}),x._parser.registerCsiHandler({final:"g"},function(M){return x.tabClear(M)}),x._parser.registerCsiHandler({final:"h"},function(M){return x.setMode(M)}),x._parser.registerCsiHandler({prefix:"?",final:"h"},function(M){return x.setModePrivate(M)}),x._parser.registerCsiHandler({final:"l"},function(M){return x.resetMode(M)}),x._parser.registerCsiHandler({prefix:"?",final:"l"},function(M){return x.resetModePrivate(M)}),x._parser.registerCsiHandler({final:"m"},function(M){return x.charAttributes(M)}),x._parser.registerCsiHandler({final:"n"},function(M){return x.deviceStatus(M)}),x._parser.registerCsiHandler({prefix:"?",final:"n"},function(M){return x.deviceStatusPrivate(M)}),x._parser.registerCsiHandler({intermediates:"!",final:"p"},function(M){return x.softReset(M)}),x._parser.registerCsiHandler({intermediates:" ",final:"q"},function(M){return x.setCursorStyle(M)}),x._parser.registerCsiHandler({final:"r"},function(M){return x.setScrollRegion(M)}),x._parser.registerCsiHandler({final:"s"},function(M){return x.saveCursor(M)}),x._parser.registerCsiHandler({final:"t"},function(M){return x.windowOptions(M)}),x._parser.registerCsiHandler({final:"u"},function(M){return x.restoreCursor(M)}),x._parser.registerCsiHandler({intermediates:"'",final:"}"},function(M){return x.insertColumns(M)}),x._parser.registerCsiHandler({intermediates:"'",final:"~"},function(M){return x.deleteColumns(M)}),x._parser.setExecuteHandler(f.C0.BEL,function(){return x.bell()}),x._parser.setExecuteHandler(f.C0.LF,function(){return x.lineFeed()}),x._parser.setExecuteHandler(f.C0.VT,function(){return x.lineFeed()}),x._parser.setExecuteHandler(f.C0.FF,function(){return x.lineFeed()}),x._parser.setExecuteHandler(f.C0.CR,function(){return x.carriageReturn()}),x._parser.setExecuteHandler(f.C0.BS,function(){return x.backspace()}),x._parser.setExecuteHandler(f.C0.HT,function(){return x.tab()}),x._parser.setExecuteHandler(f.C0.SO,function(){return x.shiftOut()}),x._parser.setExecuteHandler(f.C0.SI,function(){return x.shiftIn()}),x._parser.setExecuteHandler(f.C1.IND,function(){return x.index()}),x._parser.setExecuteHandler(f.C1.NEL,function(){return x.nextLine()}),x._parser.setExecuteHandler(f.C1.HTS,function(){return x.tabSet()}),x._parser.registerOscHandler(0,new h.OscHandler(function(M){return x.setTitle(M),x.setIconName(M),!0})),x._parser.registerOscHandler(1,new h.OscHandler(function(M){return x.setIconName(M)})),x._parser.registerOscHandler(2,new h.OscHandler(function(M){return x.setTitle(M)})),x._parser.registerOscHandler(4,new h.OscHandler(function(M){return x.setAnsiColor(M)})),x._parser.registerEscHandler({final:"7"},function(){return x.saveCursor()}),x._parser.registerEscHandler({final:"8"},function(){return x.restoreCursor()}),x._parser.registerEscHandler({final:"D"},function(){return x.index()}),x._parser.registerEscHandler({final:"E"},function(){return x.nextLine()}),x._parser.registerEscHandler({final:"H"},function(){return x.tabSet()}),x._parser.registerEscHandler({final:"M"},function(){return x.reverseIndex()}),x._parser.registerEscHandler({final:"="},function(){return x.keypadApplicationMode()}),x._parser.registerEscHandler({final:">"},function(){return x.keypadNumericMode()}),x._parser.registerEscHandler({final:"c"},function(){return x.fullReset()}),x._parser.registerEscHandler({final:"n"},function(){return x.setgLevel(2)}),x._parser.registerEscHandler({final:"o"},function(){return x.setgLevel(3)}),x._parser.registerEscHandler({final:"|"},function(){return x.setgLevel(3)}),x._parser.registerEscHandler({final:"}"},function(){return x.setgLevel(2)}),x._parser.registerEscHandler({final:"~"},function(){return x.setgLevel(1)}),x._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return x.selectDefaultCharset()}),x._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return x.selectDefaultCharset()});var O=function(U){T._parser.registerEscHandler({intermediates:"(",final:U},function(){return x.selectCharset("("+U)}),T._parser.registerEscHandler({intermediates:")",final:U},function(){return x.selectCharset(")"+U)}),T._parser.registerEscHandler({intermediates:"*",final:U},function(){return x.selectCharset("*"+U)}),T._parser.registerEscHandler({intermediates:"+",final:U},function(){return x.selectCharset("+"+U)}),T._parser.registerEscHandler({intermediates:"-",final:U},function(){return x.selectCharset("-"+U)}),T._parser.registerEscHandler({intermediates:".",final:U},function(){return x.selectCharset("."+U)}),T._parser.registerEscHandler({intermediates:"/",final:U},function(){return x.selectCharset("/"+U)})},T=this;for(var B in E.CHARSETS)O(B);return x._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return x.screenAlignmentPattern()}),x._parser.setErrorHandler(function(M){return x._logService.error("Parsing error: ",M),M}),x._parser.registerDcsHandler({intermediates:"$",final:"q"},new C(x._bufferService,x._coreService,x._logService,x._optionsService)),x}return p(A,L),Object.defineProperty(A.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onAnsiColorChange",{get:function(){return this._onAnsiColorChange.event},enumerable:!1,configurable:!0}),A.prototype.dispose=function(){L.prototype.dispose.call(this)},A.prototype._preserveStack=function(w,b,P,R){this._parseStack.paused=!0,this._parseStack.cursorStartX=w,this._parseStack.cursorStartY=b,this._parseStack.decodedLength=P,this._parseStack.position=R},A.prototype._logSlowResolvingAsync=function(w){this._logService.logLevel<=n.LogLevelEnum.WARN&&Promise.race([w,new Promise(function(b,P){return setTimeout(function(){return P("#SLOW_TIMEOUT")},5e3)})]).catch(function(b){if(b!=="#SLOW_TIMEOUT")throw b;console.warn("async parser handler taking longer than 5000 ms")})},A.prototype.parse=function(w,b){var P,R=this._bufferService.buffer,j=R.x,H=R.y,F=0,Z=this._parseStack.paused;if(Z){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,b))return this._logSlowResolvingAsync(P),P;j=this._parseStack.cursorStartX,H=this._parseStack.cursorStartY,this._parseStack.paused=!1,w.length>g&&(F=this._parseStack.position+g)}if(this._logService.debug("parsing data",w),this._parseBuffer.length<w.length&&this._parseBuffer.length<g&&(this._parseBuffer=new Uint32Array(Math.min(w.length,g))),Z||this._dirtyRowService.clearRange(),w.length>g)for(var V=F;V<w.length;V+=g){var x=V+g<w.length?V+g:w.length,O=typeof w=="string"?this._stringDecoder.decode(w.substring(V,x),this._parseBuffer):this._utf8Decoder.decode(w.subarray(V,x),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,O))return this._preserveStack(j,H,O,V),this._logSlowResolvingAsync(P),P}else if(!Z&&(O=typeof w=="string"?this._stringDecoder.decode(w,this._parseBuffer):this._utf8Decoder.decode(w,this._parseBuffer),P=this._parser.parse(this._parseBuffer,O)))return this._preserveStack(j,H,O,0),this._logSlowResolvingAsync(P),P;(R=this._bufferService.buffer).x===j&&R.y===H||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},A.prototype.print=function(w,b,P){var R,j,H=this._bufferService.buffer,F=this._charsetService.charset,Z=this._optionsService.options.screenReaderMode,V=this._bufferService.cols,x=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,T=this._curAttrData,B=H.lines.get(H.ybase+H.y);this._dirtyRowService.markDirty(H.y),H.x&&P-b>0&&B.getWidth(H.x-1)===2&&B.setCellFromCodePoint(H.x-1,0,1,T.fg,T.bg,T.extended);for(var M=b;M<P;++M){if(R=w[M],j=this._unicodeService.wcwidth(R),R<127&&F){var U=F[String.fromCharCode(R)];U&&(R=U.charCodeAt(0))}if(Z&&this._onA11yChar.fire(o.stringFromCodePoint(R)),j||!H.x){if(H.x+j-1>=V){if(x){for(;H.x<V;)B.setCellFromCodePoint(H.x++,0,1,T.fg,T.bg,T.extended);H.x=0,H.y++,H.y===H.scrollBottom+1?(H.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(H.y>=this._bufferService.rows&&(H.y=this._bufferService.rows-1),H.lines.get(H.ybase+H.y).isWrapped=!0),B=H.lines.get(H.ybase+H.y)}else if(H.x=V-1,j===2)continue}if(O&&(B.insertCells(H.x,j,H.getNullCell(T),T),B.getWidth(V-1)===2&&B.setCellFromCodePoint(V-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,T.fg,T.bg,T.extended)),B.setCellFromCodePoint(H.x++,R,j,T.fg,T.bg,T.extended),j>0)for(;--j;)B.setCellFromCodePoint(H.x++,0,0,T.fg,T.bg,T.extended)}else B.getWidth(H.x-1)?B.addCodepointToCell(H.x-1,R):B.addCodepointToCell(H.x-2,R)}P-b>0&&(B.loadCell(H.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),H.x<V&&P-b>0&&B.getWidth(H.x)===0&&!B.hasContent(H.x)&&B.setCellFromCodePoint(H.x,0,1,T.fg,T.bg,T.extended),this._dirtyRowService.markDirty(H.y)},A.prototype.registerCsiHandler=function(w,b){var P=this;return w.final!=="t"||w.prefix||w.intermediates?this._parser.registerCsiHandler(w,b):this._parser.registerCsiHandler(w,function(R){return!S(R.params[0],P._optionsService.options.windowOptions)||b(R)})},A.prototype.registerDcsHandler=function(w,b){return this._parser.registerDcsHandler(w,new _.DcsHandler(b))},A.prototype.registerEscHandler=function(w,b){return this._parser.registerEscHandler(w,b)},A.prototype.registerOscHandler=function(w,b){return this._parser.registerOscHandler(w,new h.OscHandler(b))},A.prototype.bell=function(){return this._onRequestBell.fire(),!0},A.prototype.lineFeed=function(){var w=this._bufferService.buffer;return this._dirtyRowService.markDirty(w.y),this._optionsService.options.convertEol&&(w.x=0),w.y++,w.y===w.scrollBottom+1?(w.y--,this._bufferService.scroll(this._eraseAttrData())):w.y>=this._bufferService.rows&&(w.y=this._bufferService.rows-1),w.x>=this._bufferService.cols&&w.x--,this._dirtyRowService.markDirty(w.y),this._onLineFeed.fire(),!0},A.prototype.carriageReturn=function(){return this._bufferService.buffer.x=0,!0},A.prototype.backspace=function(){var w,b=this._bufferService.buffer;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),b.x>0&&b.x--,!0;if(this._restrictCursor(this._bufferService.cols),b.x>0)b.x--;else if(b.x===0&&b.y>b.scrollTop&&b.y<=b.scrollBottom&&((w=b.lines.get(b.ybase+b.y))===null||w===void 0?void 0:w.isWrapped)){b.lines.get(b.ybase+b.y).isWrapped=!1,b.y--,b.x=this._bufferService.cols-1;var P=b.lines.get(b.ybase+b.y);P.hasWidth(b.x)&&!P.hasContent(b.x)&&b.x--}return this._restrictCursor(),!0},A.prototype.tab=function(){if(this._bufferService.buffer.x>=this._bufferService.cols)return!0;var w=this._bufferService.buffer.x;return this._bufferService.buffer.x=this._bufferService.buffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._bufferService.buffer.x-w),!0},A.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},A.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},A.prototype._restrictCursor=function(w){w===void 0&&(w=this._bufferService.cols-1),this._bufferService.buffer.x=Math.min(w,Math.max(0,this._bufferService.buffer.x)),this._bufferService.buffer.y=this._coreService.decPrivateModes.origin?Math.min(this._bufferService.buffer.scrollBottom,Math.max(this._bufferService.buffer.scrollTop,this._bufferService.buffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._bufferService.buffer.y)),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},A.prototype._setCursor=function(w,b){this._dirtyRowService.markDirty(this._bufferService.buffer.y),this._coreService.decPrivateModes.origin?(this._bufferService.buffer.x=w,this._bufferService.buffer.y=this._bufferService.buffer.scrollTop+b):(this._bufferService.buffer.x=w,this._bufferService.buffer.y=b),this._restrictCursor(),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},A.prototype._moveCursor=function(w,b){this._restrictCursor(),this._setCursor(this._bufferService.buffer.x+w,this._bufferService.buffer.y+b)},A.prototype.cursorUp=function(w){var b=this._bufferService.buffer.y-this._bufferService.buffer.scrollTop;return b>=0?this._moveCursor(0,-Math.min(b,w.params[0]||1)):this._moveCursor(0,-(w.params[0]||1)),!0},A.prototype.cursorDown=function(w){var b=this._bufferService.buffer.scrollBottom-this._bufferService.buffer.y;return b>=0?this._moveCursor(0,Math.min(b,w.params[0]||1)):this._moveCursor(0,w.params[0]||1),!0},A.prototype.cursorForward=function(w){return this._moveCursor(w.params[0]||1,0),!0},A.prototype.cursorBackward=function(w){return this._moveCursor(-(w.params[0]||1),0),!0},A.prototype.cursorNextLine=function(w){return this.cursorDown(w),this._bufferService.buffer.x=0,!0},A.prototype.cursorPrecedingLine=function(w){return this.cursorUp(w),this._bufferService.buffer.x=0,!0},A.prototype.cursorCharAbsolute=function(w){return this._setCursor((w.params[0]||1)-1,this._bufferService.buffer.y),!0},A.prototype.cursorPosition=function(w){return this._setCursor(w.length>=2?(w.params[1]||1)-1:0,(w.params[0]||1)-1),!0},A.prototype.charPosAbsolute=function(w){return this._setCursor((w.params[0]||1)-1,this._bufferService.buffer.y),!0},A.prototype.hPositionRelative=function(w){return this._moveCursor(w.params[0]||1,0),!0},A.prototype.linePosAbsolute=function(w){return this._setCursor(this._bufferService.buffer.x,(w.params[0]||1)-1),!0},A.prototype.vPositionRelative=function(w){return this._moveCursor(0,w.params[0]||1),!0},A.prototype.hVPosition=function(w){return this.cursorPosition(w),!0},A.prototype.tabClear=function(w){var b=w.params[0];return b===0?delete this._bufferService.buffer.tabs[this._bufferService.buffer.x]:b===3&&(this._bufferService.buffer.tabs={}),!0},A.prototype.cursorForwardTab=function(w){if(this._bufferService.buffer.x>=this._bufferService.cols)return!0;for(var b=w.params[0]||1;b--;)this._bufferService.buffer.x=this._bufferService.buffer.nextStop();return!0},A.prototype.cursorBackwardTab=function(w){if(this._bufferService.buffer.x>=this._bufferService.cols)return!0;for(var b=w.params[0]||1,P=this._bufferService.buffer;b--;)P.x=P.prevStop();return!0},A.prototype._eraseInBufferLine=function(w,b,P,R){R===void 0&&(R=!1);var j=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+w);j.replaceCells(b,P,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),R&&(j.isWrapped=!1)},A.prototype._resetBufferLine=function(w){var b=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+w);b.fill(this._bufferService.buffer.getNullCell(this._eraseAttrData())),b.isWrapped=!1},A.prototype.eraseInDisplay=function(w){var b;switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:for(b=this._bufferService.buffer.y,this._dirtyRowService.markDirty(b),this._eraseInBufferLine(b++,this._bufferService.buffer.x,this._bufferService.cols,this._bufferService.buffer.x===0);b<this._bufferService.rows;b++)this._resetBufferLine(b);this._dirtyRowService.markDirty(b);break;case 1:for(b=this._bufferService.buffer.y,this._dirtyRowService.markDirty(b),this._eraseInBufferLine(b,0,this._bufferService.buffer.x+1,!0),this._bufferService.buffer.x+1>=this._bufferService.cols&&(this._bufferService.buffer.lines.get(b+1).isWrapped=!1);b--;)this._resetBufferLine(b);this._dirtyRowService.markDirty(0);break;case 2:for(b=this._bufferService.rows,this._dirtyRowService.markDirty(b-1);b--;)this._resetBufferLine(b);this._dirtyRowService.markDirty(0);break;case 3:var P=this._bufferService.buffer.lines.length-this._bufferService.rows;P>0&&(this._bufferService.buffer.lines.trimStart(P),this._bufferService.buffer.ybase=Math.max(this._bufferService.buffer.ybase-P,0),this._bufferService.buffer.ydisp=Math.max(this._bufferService.buffer.ydisp-P,0),this._onScroll.fire(0))}return!0},A.prototype.eraseInLine=function(w){switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:this._eraseInBufferLine(this._bufferService.buffer.y,this._bufferService.buffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.buffer.x+1);break;case 2:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.cols)}return this._dirtyRowService.markDirty(this._bufferService.buffer.y),!0},A.prototype.insertLines=function(w){this._restrictCursor();var b=w.params[0]||1,P=this._bufferService.buffer;if(P.y>P.scrollBottom||P.y<P.scrollTop)return!0;for(var R=P.ybase+P.y,j=this._bufferService.rows-1-P.scrollBottom,H=this._bufferService.rows-1+P.ybase-j+1;b--;)P.lines.splice(H-1,1),P.lines.splice(R,0,P.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(P.y,P.scrollBottom),P.x=0,!0},A.prototype.deleteLines=function(w){this._restrictCursor();var b=w.params[0]||1,P=this._bufferService.buffer;if(P.y>P.scrollBottom||P.y<P.scrollTop)return!0;var R,j=P.ybase+P.y;for(R=this._bufferService.rows-1-P.scrollBottom,R=this._bufferService.rows-1+P.ybase-R;b--;)P.lines.splice(j,1),P.lines.splice(R,0,P.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(P.y,P.scrollBottom),P.x=0,!0},A.prototype.insertChars=function(w){this._restrictCursor();var b=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);return b&&(b.insertCells(this._bufferService.buffer.x,w.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y)),!0},A.prototype.deleteChars=function(w){this._restrictCursor();var b=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);return b&&(b.deleteCells(this._bufferService.buffer.x,w.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y)),!0},A.prototype.scrollUp=function(w){for(var b=w.params[0]||1,P=this._bufferService.buffer;b--;)P.lines.splice(P.ybase+P.scrollTop,1),P.lines.splice(P.ybase+P.scrollBottom,0,P.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(P.scrollTop,P.scrollBottom),!0},A.prototype.scrollDown=function(w){for(var b=w.params[0]||1,P=this._bufferService.buffer;b--;)P.lines.splice(P.ybase+P.scrollBottom,1),P.lines.splice(P.ybase+P.scrollTop,0,P.getBlankLine(t.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(P.scrollTop,P.scrollBottom),!0},A.prototype.scrollLeft=function(w){var b=this._bufferService.buffer;if(b.y>b.scrollBottom||b.y<b.scrollTop)return!0;for(var P=w.params[0]||1,R=b.scrollTop;R<=b.scrollBottom;++R){var j=b.lines.get(b.ybase+R);j.deleteCells(0,P,b.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom),!0},A.prototype.scrollRight=function(w){var b=this._bufferService.buffer;if(b.y>b.scrollBottom||b.y<b.scrollTop)return!0;for(var P=w.params[0]||1,R=b.scrollTop;R<=b.scrollBottom;++R){var j=b.lines.get(b.ybase+R);j.insertCells(0,P,b.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom),!0},A.prototype.insertColumns=function(w){var b=this._bufferService.buffer;if(b.y>b.scrollBottom||b.y<b.scrollTop)return!0;for(var P=w.params[0]||1,R=b.scrollTop;R<=b.scrollBottom;++R){var j=this._bufferService.buffer.lines.get(b.ybase+R);j.insertCells(b.x,P,b.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom),!0},A.prototype.deleteColumns=function(w){var b=this._bufferService.buffer;if(b.y>b.scrollBottom||b.y<b.scrollTop)return!0;for(var P=w.params[0]||1,R=b.scrollTop;R<=b.scrollBottom;++R){var j=b.lines.get(b.ybase+R);j.deleteCells(b.x,P,b.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom),!0},A.prototype.eraseChars=function(w){this._restrictCursor();var b=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);return b&&(b.replaceCells(this._bufferService.buffer.x,this._bufferService.buffer.x+(w.params[0]||1),this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y)),!0},A.prototype.repeatPrecedingCharacter=function(w){if(!this._parser.precedingCodepoint)return!0;for(var b=w.params[0]||1,P=new Uint32Array(b),R=0;R<b;++R)P[R]=this._parser.precedingCodepoint;return this.print(P,0,P.length),!0},A.prototype.sendDeviceAttributesPrimary=function(w){return w.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0},A.prototype.sendDeviceAttributesSecondary=function(w){return w.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(w.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0},A.prototype._is=function(w){return(this._optionsService.options.termName+"").indexOf(w)===0},A.prototype.setMode=function(w){for(var b=0;b<w.length;b++)switch(w.params[b]){case 4:this._coreService.modes.insertMode=!0}return!0},A.prototype.setModePrivate=function(w){for(var b=0;b<w.length;b++)switch(w.params[b]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,E.DEFAULT_CHARSET),this._charsetService.setgCharset(1,E.DEFAULT_CHARSET),this._charsetService.setgCharset(2,E.DEFAULT_CHARSET),this._charsetService.setgCharset(3,E.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},A.prototype.resetMode=function(w){for(var b=0;b<w.length;b++)switch(w.params[b]){case 4:this._coreService.modes.insertMode=!1}return!0},A.prototype.resetModePrivate=function(w){for(var b=0;b<w.length;b++)switch(w.params[b]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),w.params[b]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},A.prototype._updateAttrColor=function(w,b,P,R,j){return b===2?(w|=50331648,w&=-16777216,w|=s.AttributeData.fromColorRGB([P,R,j])):b===5&&(w&=-50331904,w|=33554432|255&P),w},A.prototype._extractColor=function(w,b,P){var R=[0,0,-1,0,0,0],j=0,H=0;do{if(R[H+j]=w.params[b+H],w.hasSubParams(b+H)){var F=w.getSubParams(b+H),Z=0;do R[1]===5&&(j=1),R[H+Z+1+j]=F[Z];while(++Z<F.length&&Z+H+1+j<R.length);break}if(R[1]===5&&H+j>=2||R[1]===2&&H+j>=5)break;R[1]&&(j=1)}while(++H+b<w.length&&H+j<R.length);for(Z=2;Z<R.length;++Z)R[Z]===-1&&(R[Z]=0);switch(R[0]){case 38:P.fg=this._updateAttrColor(P.fg,R[1],R[3],R[4],R[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,R[1],R[3],R[4],R[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,R[1],R[3],R[4],R[5])}return H},A.prototype._processUnderline=function(w,b){b.extended=b.extended.clone(),(!~w||w>5)&&(w=1),b.extended.underlineStyle=w,b.fg|=268435456,w===0&&(b.fg&=-268435457),b.updateExtended()},A.prototype.charAttributes=function(w){if(w.length===1&&w.params[0]===0)return this._curAttrData.fg=t.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=t.DEFAULT_ATTR_DATA.bg,!0;for(var b,P=w.length,R=this._curAttrData,j=0;j<P;j++)(b=w.params[j])>=30&&b<=37?(R.fg&=-50331904,R.fg|=16777216|b-30):b>=40&&b<=47?(R.bg&=-50331904,R.bg|=16777216|b-40):b>=90&&b<=97?(R.fg&=-50331904,R.fg|=16777224|b-90):b>=100&&b<=107?(R.bg&=-50331904,R.bg|=16777224|b-100):b===0?(R.fg=t.DEFAULT_ATTR_DATA.fg,R.bg=t.DEFAULT_ATTR_DATA.bg):b===1?R.fg|=134217728:b===3?R.bg|=67108864:b===4?(R.fg|=268435456,this._processUnderline(w.hasSubParams(j)?w.getSubParams(j)[0]:1,R)):b===5?R.fg|=536870912:b===7?R.fg|=67108864:b===8?R.fg|=1073741824:b===2?R.bg|=134217728:b===21?this._processUnderline(2,R):b===22?(R.fg&=-134217729,R.bg&=-134217729):b===23?R.bg&=-67108865:b===24?R.fg&=-268435457:b===25?R.fg&=-536870913:b===27?R.fg&=-67108865:b===28?R.fg&=-1073741825:b===39?(R.fg&=-67108864,R.fg|=16777215&t.DEFAULT_ATTR_DATA.fg):b===49?(R.bg&=-67108864,R.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):b===38||b===48||b===58?j+=this._extractColor(w,j,R):b===59?(R.extended=R.extended.clone(),R.extended.underlineColor=-1,R.updateExtended()):b===100?(R.fg&=-67108864,R.fg|=16777215&t.DEFAULT_ATTR_DATA.fg,R.bg&=-67108864,R.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",b);return!0},A.prototype.deviceStatus=function(w){switch(w.params[0]){case 5:this._coreService.triggerDataEvent(f.C0.ESC+"[0n");break;case 6:var b=this._bufferService.buffer.y+1,P=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(f.C0.ESC+"["+b+";"+P+"R")}return!0},A.prototype.deviceStatusPrivate=function(w){switch(w.params[0]){case 6:var b=this._bufferService.buffer.y+1,P=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(f.C0.ESC+"[?"+b+";"+P+"R")}return!0},A.prototype.softReset=function(w){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._bufferService.buffer.scrollTop=0,this._bufferService.buffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._bufferService.buffer.savedX=0,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},A.prototype.setCursorStyle=function(w){var b=w.params[0]||1;switch(b){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var P=b%2==1;return this._optionsService.options.cursorBlink=P,!0},A.prototype.setScrollRegion=function(w){var b,P=w.params[0]||1;return(w.length<2||(b=w.params[1])>this._bufferService.rows||b===0)&&(b=this._bufferService.rows),b>P&&(this._bufferService.buffer.scrollTop=P-1,this._bufferService.buffer.scrollBottom=b-1,this._setCursor(0,0)),!0},A.prototype.windowOptions=function(w){if(!S(w.params[0],this._optionsService.options.windowOptions))return!0;var b=w.length>1?w.params[1]:0;switch(w.params[0]){case 14:b!==2&&this._onRequestWindowsOptionsReport.fire(d.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(d.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(f.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:b!==0&&b!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),b!==0&&b!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:b!==0&&b!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),b!==0&&b!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},A.prototype.saveCursor=function(w){return this._bufferService.buffer.savedX=this._bufferService.buffer.x,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase+this._bufferService.buffer.y,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset,!0},A.prototype.restoreCursor=function(w){return this._bufferService.buffer.x=this._bufferService.buffer.savedX||0,this._bufferService.buffer.y=Math.max(this._bufferService.buffer.savedY-this._bufferService.buffer.ybase,0),this._curAttrData.fg=this._bufferService.buffer.savedCurAttrData.fg,this._curAttrData.bg=this._bufferService.buffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._bufferService.buffer.savedCharset&&(this._charsetService.charset=this._bufferService.buffer.savedCharset),this._restrictCursor(),!0},A.prototype.setTitle=function(w){return this._windowTitle=w,this._onTitleChange.fire(w),!0},A.prototype.setIconName=function(w){return this._iconName=w,!0},A.prototype._parseAnsiColorChange=function(w){for(var b,P={colors:[]},R=/(\d+);rgb:([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})/gi;(b=R.exec(w))!==null;)P.colors.push({colorIndex:parseInt(b[1]),red:parseInt(b[2],16),green:parseInt(b[3],16),blue:parseInt(b[4],16)});return P.colors.length===0?null:P},A.prototype.setAnsiColor=function(w){var b=this._parseAnsiColorChange(w);return b?this._onAnsiColorChange.fire(b):this._logService.warn("Expected format <num>;rgb:<rr>/<gg>/<bb> but got data: "+w),!0},A.prototype.nextLine=function(){return this._bufferService.buffer.x=0,this.index(),!0},A.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},A.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},A.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,E.DEFAULT_CHARSET),!0},A.prototype.selectCharset=function(w){return w.length!==2?(this.selectDefaultCharset(),!0):(w[0]==="/"||this._charsetService.setgCharset(m[w[0]],E.CHARSETS[w[1]]||E.DEFAULT_CHARSET),!0)},A.prototype.index=function(){this._restrictCursor();var w=this._bufferService.buffer;return this._bufferService.buffer.y++,w.y===w.scrollBottom+1?(w.y--,this._bufferService.scroll(this._eraseAttrData())):w.y>=this._bufferService.rows&&(w.y=this._bufferService.rows-1),this._restrictCursor(),!0},A.prototype.tabSet=function(){return this._bufferService.buffer.tabs[this._bufferService.buffer.x]=!0,!0},A.prototype.reverseIndex=function(){this._restrictCursor();var w=this._bufferService.buffer;if(w.y===w.scrollTop){var b=w.scrollBottom-w.scrollTop;w.lines.shiftElements(w.ybase+w.y,b,1),w.lines.set(w.ybase+w.y,w.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(w.scrollTop,w.scrollBottom)}else w.y--,this._restrictCursor();return!0},A.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},A.prototype.reset=function(){this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone()},A.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},A.prototype.setgLevel=function(w){return this._charsetService.setgLevel(w),!0},A.prototype.screenAlignmentPattern=function(){var w=new i.CellData;w.content=1<<22|"E".charCodeAt(0),w.fg=this._curAttrData.fg,w.bg=this._curAttrData.bg;var b=this._bufferService.buffer;this._setCursor(0,0);for(var P=0;P<this._bufferService.rows;++P){var R=b.ybase+b.y+P,j=b.lines.get(R);j&&(j.fill(w),j.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},A}(a.Disposable);l.InputHandler=k},844:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.Disposable=void 0;var y=function(){function p(){this._disposables=[],this._isDisposed=!1}return p.prototype.dispose=function(){this._isDisposed=!0;for(var d=0,f=this._disposables;d<f.length;d++)f[d].dispose();this._disposables.length=0},p.prototype.register=function(d){return this._disposables.push(d),d},p.prototype.unregister=function(d){var f=this._disposables.indexOf(d);f!==-1&&this._disposables.splice(f,1)},p}();function u(p){for(var d=0,f=p;d<f.length;d++)f[d].dispose();p.length=0}l.Disposable=y,l.disposeArray=u,l.getDisposeArrayDisposable=function(p){return{dispose:function(){return u(p)}}}},6114:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.isSafari=l.isFirefox=void 0;var y=typeof navigator=="undefined",u=y?"node":navigator.userAgent,p=y?"node":navigator.platform;l.isFirefox=u.includes("Firefox"),l.isSafari=/^((?!chrome|android).)*safari/i.test(u),l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),l.isIpad=p==="iPad",l.isIphone=p==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),l.isLinux=p.indexOf("Linux")>=0},8273:function(I,l){function y(u,p,d,f){if(d===void 0&&(d=0),f===void 0&&(f=u.length),d>=u.length)return u;d=(u.length+d)%u.length,f=f>=u.length?u.length:(u.length+f)%u.length;for(var E=d;E<f;++E)u[E]=p;return u}Object.defineProperty(l,"__esModule",{value:!0}),l.concat=l.fillFallback=l.fill=void 0,l.fill=function(u,p,d,f){return u.fill?u.fill(p,d,f):y(u,p,d,f)},l.fillFallback=y,l.concat=function(u,p){var d=new u.constructor(u.length+p.length);return d.set(u),d.set(p,u.length),d}},9282:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.updateWindowsModeWrappedState=void 0;var u=y(643);l.updateWindowsModeWrappedState=function(p){var d=p.buffer.lines.get(p.buffer.ybase+p.buffer.y-1),f=d==null?void 0:d.get(p.cols-1),E=p.buffer.lines.get(p.buffer.ybase+p.buffer.y);E&&f&&(E.isWrapped=f[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&f[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;var y=function(){function p(){this.fg=0,this.bg=0,this.extended=new u}return p.toColorRGB=function(d){return[d>>>16&255,d>>>8&255,255&d]},p.fromColorRGB=function(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]},p.prototype.clone=function(){var d=new p;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d},p.prototype.isInverse=function(){return 67108864&this.fg},p.prototype.isBold=function(){return 134217728&this.fg},p.prototype.isUnderline=function(){return 268435456&this.fg},p.prototype.isBlink=function(){return 536870912&this.fg},p.prototype.isInvisible=function(){return 1073741824&this.fg},p.prototype.isItalic=function(){return 67108864&this.bg},p.prototype.isDim=function(){return 134217728&this.bg},p.prototype.getFgColorMode=function(){return 50331648&this.fg},p.prototype.getBgColorMode=function(){return 50331648&this.bg},p.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},p.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},p.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},p.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},p.prototype.isFgDefault=function(){return(50331648&this.fg)==0},p.prototype.isBgDefault=function(){return(50331648&this.bg)==0},p.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},p.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},p.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},p.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},p.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},p.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},p.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},p.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},p.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},p.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},p.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},p}();l.AttributeData=y;var u=function(){function p(d,f){d===void 0&&(d=0),f===void 0&&(f=-1),this.underlineStyle=d,this.underlineColor=f}return p.prototype.clone=function(){return new p(this.underlineStyle,this.underlineColor)},p.prototype.isEmpty=function(){return this.underlineStyle===0},p}();l.ExtendedAttrs=u},9092:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.BufferStringIterator=l.Buffer=l.MAX_BUFFER_SIZE=void 0;var u=y(6349),p=y(8437),d=y(511),f=y(643),E=y(4634),v=y(4863),a=y(7116),c=y(3734);l.MAX_BUFFER_SIZE=4294967295;var o=function(){function r(e,i,s){this._hasScrollback=e,this._optionsService=i,this._bufferService=s,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=d.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]),this._whitespaceCell=d.CellData.fromCharData([0,f.WHITESPACE_CELL_CHAR,f.WHITESPACE_CELL_WIDTH,f.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return r.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new c.ExtendedAttrs),this._nullCell},r.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new c.ExtendedAttrs),this._whitespaceCell},r.prototype.getBlankLine=function(e,i){return new p.BufferLine(this._bufferService.cols,this.getNullCell(e),i)},Object.defineProperty(r.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isCursorInViewport",{get:function(){var i=this.ybase+this.y-this.ydisp;return i>=0&&i<this._rows},enumerable:!1,configurable:!0}),r.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var i=e+this._optionsService.options.scrollback;return i>l.MAX_BUFFER_SIZE?l.MAX_BUFFER_SIZE:i},r.prototype.fillViewportRows=function(e){if(this.lines.length===0){e===void 0&&(e=p.DEFAULT_ATTR_DATA);for(var i=this._rows;i--;)this.lines.push(this.getBlankLine(e))}},r.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},r.prototype.resize=function(e,i){var s=this.getNullCell(p.DEFAULT_ATTR_DATA),n=this._getCorrectBufferLength(i);if(n>this.lines.maxLength&&(this.lines.maxLength=n),this.lines.length>0){if(this._cols<e)for(var h=0;h<this.lines.length;h++)this.lines.get(h).resize(e,s);var _=0;if(this._rows<i)for(var m=this._rows;m<i;m++)this.lines.length<i+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new p.BufferLine(e,s)):this.ybase>0&&this.lines.length<=this.ybase+this.y+_+1?(this.ybase--,_++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(e,s)));else for(m=this._rows;m>i;m--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(n<this.lines.maxLength){var g=this.lines.length-n;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=n}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,i-1),_&&(this.y+=_),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(e,i),this._cols>e))for(h=0;h<this.lines.length;h++)this.lines.get(h).resize(e,s);this._cols=e,this._rows=i},Object.defineProperty(r.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),r.prototype._reflow=function(e,i){this._cols!==e&&(e>this._cols?this._reflowLarger(e,i):this._reflowSmaller(e,i))},r.prototype._reflowLarger=function(e,i){var s=E.reflowLargerGetLinesToRemove(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(s.length>0){var n=E.reflowLargerCreateNewLayout(this.lines,s);E.reflowLargerApplyNewLayout(this.lines,n.layout),this._reflowLargerAdjustViewport(e,i,n.countRemoved)}},r.prototype._reflowLargerAdjustViewport=function(e,i,s){for(var n=this.getNullCell(p.DEFAULT_ATTR_DATA),h=s;h-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new p.BufferLine(e,n))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-s,0)},r.prototype._reflowSmaller=function(e,i){for(var s=this.getNullCell(p.DEFAULT_ATTR_DATA),n=[],h=0,_=this.lines.length-1;_>=0;_--){var m=this.lines.get(_);if(!(!m||!m.isWrapped&&m.getTrimmedLength()<=e)){for(var g=[m];m.isWrapped&&_>0;)m=this.lines.get(--_),g.unshift(m);var S=this.ybase+this.y;if(!(S>=_&&S<_+g.length)){var C,k=g[g.length-1].getTrimmedLength(),L=E.reflowSmallerGetNewLineLengths(g,this._cols,e),A=L.length-g.length;C=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);for(var w=[],b=0;b<A;b++){var P=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);w.push(P)}w.length>0&&(n.push({start:_+g.length+h,newLines:w}),h+=w.length),g.push.apply(g,w);var R=L.length-1,j=L[R];j===0&&(j=L[--R]);for(var H=g.length-A-1,F=k;H>=0;){var Z=Math.min(F,j);if(g[R].copyCellsFrom(g[H],F-Z,j-Z,Z,!0),(j-=Z)==0&&(j=L[--R]),(F-=Z)==0){H--;var V=Math.max(H,0);F=E.getWrappedLineTrimmedLength(g,V,this._cols)}}for(b=0;b<g.length;b++)L[b]<e&&g[b].setCell(L[b],s);for(var x=A-C;x-- >0;)this.ybase===0?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+h)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+i-1)}}}if(n.length>0){var O=[],T=[];for(b=0;b<this.lines.length;b++)T.push(this.lines.get(b));var B=this.lines.length,M=B-1,U=0,N=n[U];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+h);var X=0;for(b=Math.min(this.lines.maxLength-1,B+h-1);b>=0;b--)if(N&&N.start>M+X){for(var Y=N.newLines.length-1;Y>=0;Y--)this.lines.set(b--,N.newLines[Y]);b++,O.push({index:M+1,amount:N.newLines.length}),X+=N.newLines.length,N=n[++U]}else this.lines.set(b,T[M--]);var ee=0;for(b=O.length-1;b>=0;b--)O[b].index+=ee,this.lines.onInsertEmitter.fire(O[b]),ee+=O[b].amount;var z=Math.max(0,B+h-this.lines.maxLength);z>0&&this.lines.onTrimEmitter.fire(z)}},r.prototype.stringIndexToBufferIndex=function(e,i,s){for(s===void 0&&(s=!1);i;){var n=this.lines.get(e);if(!n)return[-1,-1];for(var h=s?n.getTrimmedLength():n.length,_=0;_<h;++_)if(n.get(_)[f.CHAR_DATA_WIDTH_INDEX]&&(i-=n.get(_)[f.CHAR_DATA_CHAR_INDEX].length||1),i<0)return[e,_];e++}return[e,0]},r.prototype.translateBufferLineToString=function(e,i,s,n){s===void 0&&(s=0);var h=this.lines.get(e);return h?h.translateToString(i,s,n):""},r.prototype.getWrappedRangeForLine=function(e){for(var i=e,s=e;i>0&&this.lines.get(i).isWrapped;)i--;for(;s+1<this.lines.length&&this.lines.get(s+1).isWrapped;)s++;return{first:i,last:s}},r.prototype.setupTabStops=function(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.options.tabStopWidth)this.tabs[e]=!0},r.prototype.prevStop=function(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},r.prototype.nextStop=function(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},r.prototype.addMarker=function(e){var i=this,s=new v.Marker(e);return this.markers.push(s),s.register(this.lines.onTrim(function(n){s.line-=n,s.line<0&&s.dispose()})),s.register(this.lines.onInsert(function(n){s.line>=n.index&&(s.line+=n.amount)})),s.register(this.lines.onDelete(function(n){s.line>=n.index&&s.line<n.index+n.amount&&s.dispose(),s.line>n.index&&(s.line-=n.amount)})),s.register(s.onDispose(function(){return i._removeMarker(s)})),s},r.prototype._removeMarker=function(e){this.markers.splice(this.markers.indexOf(e),1)},r.prototype.iterator=function(e,i,s,n,h){return new t(this,e,i,s,n,h)},r}();l.Buffer=o;var t=function(){function r(e,i,s,n,h,_){s===void 0&&(s=0),n===void 0&&(n=e.lines.length),h===void 0&&(h=0),_===void 0&&(_=0),this._buffer=e,this._trimRight=i,this._startIndex=s,this._endIndex=n,this._startOverscan=h,this._endOverscan=_,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return r.prototype.hasNext=function(){return this._current<this._endIndex},r.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var i="",s=e.first;s<=e.last;++s)i+=this._buffer.translateBufferLineToString(s,this._trimRight);return this._current=e.last+1,{range:e,content:i}},r}();l.BufferStringIterator=t},8437:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLine=l.DEFAULT_ATTR_DATA=void 0;var u=y(482),p=y(643),d=y(511),f=y(3734);l.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);var E=function(){function v(a,c,o){o===void 0&&(o=!1),this.isWrapped=o,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*a);for(var t=c||d.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]),r=0;r<a;++r)this.setCell(r,t);this.length=a}return v.prototype.get=function(a){var c=this._data[3*a+0],o=2097151&c;return[this._data[3*a+1],2097152&c?this._combined[a]:o?u.stringFromCodePoint(o):"",c>>22,2097152&c?this._combined[a].charCodeAt(this._combined[a].length-1):o]},v.prototype.set=function(a,c){this._data[3*a+1]=c[p.CHAR_DATA_ATTR_INDEX],c[p.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[a]=c[1],this._data[3*a+0]=2097152|a|c[p.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*a+0]=c[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|c[p.CHAR_DATA_WIDTH_INDEX]<<22},v.prototype.getWidth=function(a){return this._data[3*a+0]>>22},v.prototype.hasWidth=function(a){return 12582912&this._data[3*a+0]},v.prototype.getFg=function(a){return this._data[3*a+1]},v.prototype.getBg=function(a){return this._data[3*a+2]},v.prototype.hasContent=function(a){return 4194303&this._data[3*a+0]},v.prototype.getCodePoint=function(a){var c=this._data[3*a+0];return 2097152&c?this._combined[a].charCodeAt(this._combined[a].length-1):2097151&c},v.prototype.isCombined=function(a){return 2097152&this._data[3*a+0]},v.prototype.getString=function(a){var c=this._data[3*a+0];return 2097152&c?this._combined[a]:2097151&c?u.stringFromCodePoint(2097151&c):""},v.prototype.loadCell=function(a,c){var o=3*a;return c.content=this._data[o+0],c.fg=this._data[o+1],c.bg=this._data[o+2],2097152&c.content&&(c.combinedData=this._combined[a]),268435456&c.bg&&(c.extended=this._extendedAttrs[a]),c},v.prototype.setCell=function(a,c){2097152&c.content&&(this._combined[a]=c.combinedData),268435456&c.bg&&(this._extendedAttrs[a]=c.extended),this._data[3*a+0]=c.content,this._data[3*a+1]=c.fg,this._data[3*a+2]=c.bg},v.prototype.setCellFromCodePoint=function(a,c,o,t,r,e){268435456&r&&(this._extendedAttrs[a]=e),this._data[3*a+0]=c|o<<22,this._data[3*a+1]=t,this._data[3*a+2]=r},v.prototype.addCodepointToCell=function(a,c){var o=this._data[3*a+0];2097152&o?this._combined[a]+=u.stringFromCodePoint(c):(2097151&o?(this._combined[a]=u.stringFromCodePoint(2097151&o)+u.stringFromCodePoint(c),o&=-2097152,o|=2097152):o=c|1<<22,this._data[3*a+0]=o)},v.prototype.insertCells=function(a,c,o,t){if((a%=this.length)&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,(t==null?void 0:t.fg)||0,(t==null?void 0:t.bg)||0,(t==null?void 0:t.extended)||new f.ExtendedAttrs),c<this.length-a){for(var r=new d.CellData,e=this.length-a-c-1;e>=0;--e)this.setCell(a+c+e,this.loadCell(a+e,r));for(e=0;e<c;++e)this.setCell(a+e,o)}else for(e=a;e<this.length;++e)this.setCell(e,o);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(t==null?void 0:t.fg)||0,(t==null?void 0:t.bg)||0,(t==null?void 0:t.extended)||new f.ExtendedAttrs)},v.prototype.deleteCells=function(a,c,o,t){if(a%=this.length,c<this.length-a){for(var r=new d.CellData,e=0;e<this.length-a-c;++e)this.setCell(a+e,this.loadCell(a+c+e,r));for(e=this.length-c;e<this.length;++e)this.setCell(e,o)}else for(e=a;e<this.length;++e)this.setCell(e,o);a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,(t==null?void 0:t.fg)||0,(t==null?void 0:t.bg)||0,(t==null?void 0:t.extended)||new f.ExtendedAttrs),this.getWidth(a)!==0||this.hasContent(a)||this.setCellFromCodePoint(a,0,1,(t==null?void 0:t.fg)||0,(t==null?void 0:t.bg)||0,(t==null?void 0:t.extended)||new f.ExtendedAttrs)},v.prototype.replaceCells=function(a,c,o,t){for(a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,(t==null?void 0:t.fg)||0,(t==null?void 0:t.bg)||0,(t==null?void 0:t.extended)||new f.ExtendedAttrs),c<this.length&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c,0,1,(t==null?void 0:t.fg)||0,(t==null?void 0:t.bg)||0,(t==null?void 0:t.extended)||new f.ExtendedAttrs);a<c&&a<this.length;)this.setCell(a++,o)},v.prototype.resize=function(a,c){if(a!==this.length){if(a>this.length){var o=new Uint32Array(3*a);this.length&&(3*a<this._data.length?o.set(this._data.subarray(0,3*a)):o.set(this._data)),this._data=o;for(var t=this.length;t<a;++t)this.setCell(t,c)}else if(a){(o=new Uint32Array(3*a)).set(this._data.subarray(0,3*a)),this._data=o;var r=Object.keys(this._combined);for(t=0;t<r.length;t++){var e=parseInt(r[t],10);e>=a&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=a}},v.prototype.fill=function(a){this._combined={},this._extendedAttrs={};for(var c=0;c<this.length;++c)this.setCell(c,a)},v.prototype.copyFrom=function(a){for(var c in this.length!==a.length?this._data=new Uint32Array(a._data):this._data.set(a._data),this.length=a.length,this._combined={},a._combined)this._combined[c]=a._combined[c];for(var c in this._extendedAttrs={},a._extendedAttrs)this._extendedAttrs[c]=a._extendedAttrs[c];this.isWrapped=a.isWrapped},v.prototype.clone=function(){var a=new v(0);for(var c in a._data=new Uint32Array(this._data),a.length=this.length,this._combined)a._combined[c]=this._combined[c];for(var c in this._extendedAttrs)a._extendedAttrs[c]=this._extendedAttrs[c];return a.isWrapped=this.isWrapped,a},v.prototype.getTrimmedLength=function(){for(var a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0])return a+(this._data[3*a+0]>>22);return 0},v.prototype.copyCellsFrom=function(a,c,o,t,r){var e=a._data;if(r)for(var i=t-1;i>=0;i--)for(var s=0;s<3;s++)this._data[3*(o+i)+s]=e[3*(c+i)+s];else for(i=0;i<t;i++)for(s=0;s<3;s++)this._data[3*(o+i)+s]=e[3*(c+i)+s];var n=Object.keys(a._combined);for(s=0;s<n.length;s++){var h=parseInt(n[s],10);h>=c&&(this._combined[h-c+o]=a._combined[h])}},v.prototype.translateToString=function(a,c,o){a===void 0&&(a=!1),c===void 0&&(c=0),o===void 0&&(o=this.length),a&&(o=Math.min(o,this.getTrimmedLength()));for(var t="";c<o;){var r=this._data[3*c+0],e=2097151&r;t+=2097152&r?this._combined[c]:e?u.stringFromCodePoint(e):p.WHITESPACE_CELL_CHAR,c+=r>>22||1}return t},v}();l.BufferLine=E},4841:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getRangeLength=void 0,l.getRangeLength=function(y,u){if(y.start.y>y.end.y)throw new Error("Buffer range end ("+y.end.x+", "+y.end.y+") cannot be before start ("+y.start.x+", "+y.start.y+")");return u*(y.end.y-y.start.y)+(y.end.x-y.start.x+1)}},4634:function(I,l){function y(u,p,d){if(p===u.length-1)return u[p].getTrimmedLength();var f=!u[p].hasContent(d-1)&&u[p].getWidth(d-1)===1,E=u[p+1].getWidth(0)===2;return f&&E?d-1:d}Object.defineProperty(l,"__esModule",{value:!0}),l.getWrappedLineTrimmedLength=l.reflowSmallerGetNewLineLengths=l.reflowLargerApplyNewLayout=l.reflowLargerCreateNewLayout=l.reflowLargerGetLinesToRemove=void 0,l.reflowLargerGetLinesToRemove=function(u,p,d,f,E){for(var v=[],a=0;a<u.length-1;a++){var c=a,o=u.get(++c);if(o.isWrapped){for(var t=[u.get(a)];c<u.length&&o.isWrapped;)t.push(o),o=u.get(++c);if(f>=a&&f<c)a+=t.length-1;else{for(var r=0,e=y(t,r,p),i=1,s=0;i<t.length;){var n=y(t,i,p),h=n-s,_=d-e,m=Math.min(h,_);t[r].copyCellsFrom(t[i],s,e,m,!1),(e+=m)===d&&(r++,e=0),(s+=m)===n&&(i++,s=0),e===0&&r!==0&&t[r-1].getWidth(d-1)===2&&(t[r].copyCellsFrom(t[r-1],d-1,e++,1,!1),t[r-1].setCell(d-1,E))}t[r].replaceCells(e,d,E);for(var g=0,S=t.length-1;S>0&&(S>r||t[S].getTrimmedLength()===0);S--)g++;g>0&&(v.push(a+t.length-g),v.push(g)),a+=t.length-1}}}return v},l.reflowLargerCreateNewLayout=function(u,p){for(var d=[],f=0,E=p[f],v=0,a=0;a<u.length;a++)if(E===a){var c=p[++f];u.onDeleteEmitter.fire({index:a-v,amount:c}),a+=c-1,v+=c,E=p[++f]}else d.push(a);return{layout:d,countRemoved:v}},l.reflowLargerApplyNewLayout=function(u,p){for(var d=[],f=0;f<p.length;f++)d.push(u.get(p[f]));for(f=0;f<d.length;f++)u.set(f,d[f]);u.length=p.length},l.reflowSmallerGetNewLineLengths=function(u,p,d){for(var f=[],E=u.map(function(e,i){return y(u,i,p)}).reduce(function(e,i){return e+i}),v=0,a=0,c=0;c<E;){if(E-c<d){f.push(E-c);break}v+=d;var o=y(u,a,p);v>o&&(v-=o,a++);var t=u[a].getWidth(v-1)===2;t&&v--;var r=t?d-1:d;f.push(r),c+=r}return f},l.getWrappedLineTrimmedLength=y},5295:function(I,l,y){var u,p=this&&this.__extends||(u=function(a,c){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(o[r]=t[r])})(a,c)},function(v,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function c(){this.constructor=v}u(v,a),v.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)});Object.defineProperty(l,"__esModule",{value:!0}),l.BufferSet=void 0;var d=y(9092),f=y(8460),E=function(v){function a(c,o){var t=v.call(this)||this;return t._optionsService=c,t._bufferService=o,t._onBufferActivate=t.register(new f.EventEmitter),t.reset(),t}return p(a,v),Object.defineProperty(a.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this.setupTabStops()},Object.defineProperty(a.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),a.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},a.prototype.activateAltBuffer=function(c){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(c),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},a.prototype.resize=function(c,o){this._normal.resize(c,o),this._alt.resize(c,o)},a.prototype.setupTabStops=function(c){this._normal.setupTabStops(c),this._alt.setupTabStops(c)},a}(y(844).Disposable);l.BufferSet=E},511:function(I,l,y){var u,p=this&&this.__extends||(u=function(c,o){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(c,o)},function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function o(){this.constructor=a}u(a,c),a.prototype=c===null?Object.create(c):(o.prototype=c.prototype,new o)});Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;var d=y(482),f=y(643),E=y(3734),v=function(a){function c(){var o=a!==null&&a.apply(this,arguments)||this;return o.content=0,o.fg=0,o.bg=0,o.extended=new E.ExtendedAttrs,o.combinedData="",o}return p(c,a),c.fromCharData=function(o){var t=new c;return t.setFromCharData(o),t},c.prototype.isCombined=function(){return 2097152&this.content},c.prototype.getWidth=function(){return this.content>>22},c.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?d.stringFromCodePoint(2097151&this.content):""},c.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},c.prototype.setFromCharData=function(o){this.fg=o[f.CHAR_DATA_ATTR_INDEX],this.bg=0;var t=!1;if(o[f.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(o[f.CHAR_DATA_CHAR_INDEX].length===2){var r=o[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){var e=o[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(r-55296)+e-56320+65536|o[f.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=o[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[f.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=o[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|o[f.CHAR_DATA_WIDTH_INDEX]<<22)},c.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},c}(E.AttributeData);l.CellData=v},643:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=256,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},4863:function(I,l,y){var u,p=this&&this.__extends||(u=function(v,a){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,o){c.__proto__=o}||function(c,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(c[t]=o[t])})(v,a)},function(E,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function a(){this.constructor=E}u(E,v),E.prototype=v===null?Object.create(v):(a.prototype=v.prototype,new a)});Object.defineProperty(l,"__esModule",{value:!0}),l.Marker=void 0;var d=y(8460),f=function(E){function v(a){var c=E.call(this)||this;return c.line=a,c._id=v._nextId++,c.isDisposed=!1,c._onDispose=new d.EventEmitter,c}return p(v,E),Object.defineProperty(v.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),v.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),E.prototype.dispose.call(this))},v._nextId=1,v}(y(844).Disposable);l.Marker=f},7116:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CHARSET=l.CHARSETS=void 0,l.CHARSETS={},l.DEFAULT_CHARSET=l.CHARSETS.B,l.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},l.CHARSETS.A={"#":"\xA3"},l.CHARSETS.B=void 0,l.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},l.CHARSETS.C=l.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},l.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},l.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},l.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},l.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},l.CHARSETS.E=l.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},l.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},l.CHARSETS.H=l.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},l.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:function(I,l){var y,u;Object.defineProperty(l,"__esModule",{value:!0}),l.C1=l.C0=void 0,(u=l.C0||(l.C0={})).NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL="\x7F",(y=l.C1||(l.C1={})).PAD="\x80",y.HOP="\x81",y.BPH="\x82",y.NBH="\x83",y.IND="\x84",y.NEL="\x85",y.SSA="\x86",y.ESA="\x87",y.HTS="\x88",y.HTJ="\x89",y.VTS="\x8A",y.PLD="\x8B",y.PLU="\x8C",y.RI="\x8D",y.SS2="\x8E",y.SS3="\x8F",y.DCS="\x90",y.PU1="\x91",y.PU2="\x92",y.STS="\x93",y.CCH="\x94",y.MW="\x95",y.SPA="\x96",y.EPA="\x97",y.SOS="\x98",y.SGCI="\x99",y.SCI="\x9A",y.CSI="\x9B",y.ST="\x9C",y.OSC="\x9D",y.PM="\x9E",y.APC="\x9F"},7399:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.evaluateKeyboardEvent=void 0;var u=y(2584),p={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};l.evaluateKeyboardEvent=function(d,f,E,v){var a={type:0,cancel:!1,key:void 0},c=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?a.key=f?u.C0.ESC+"OA":u.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?a.key=f?u.C0.ESC+"OD":u.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?a.key=f?u.C0.ESC+"OC":u.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(a.key=f?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:if(d.shiftKey){a.key=u.C0.BS;break}if(d.altKey){a.key=u.C0.ESC+u.C0.DEL;break}a.key=u.C0.DEL;break;case 9:if(d.shiftKey){a.key=u.C0.ESC+"[Z";break}a.key=u.C0.HT,a.cancel=!0;break;case 13:a.key=d.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,a.cancel=!0;break;case 27:a.key=u.C0.ESC,d.altKey&&(a.key=u.C0.ESC+u.C0.ESC),a.cancel=!0;break;case 37:if(d.metaKey)break;c?(a.key=u.C0.ESC+"[1;"+(c+1)+"D",a.key===u.C0.ESC+"[1;3D"&&(a.key=u.C0.ESC+(E?"b":"[1;5D"))):a.key=f?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(d.metaKey)break;c?(a.key=u.C0.ESC+"[1;"+(c+1)+"C",a.key===u.C0.ESC+"[1;3C"&&(a.key=u.C0.ESC+(E?"f":"[1;5C"))):a.key=f?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(d.metaKey)break;c?(a.key=u.C0.ESC+"[1;"+(c+1)+"A",E||a.key!==u.C0.ESC+"[1;3A"||(a.key=u.C0.ESC+"[1;5A")):a.key=f?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(d.metaKey)break;c?(a.key=u.C0.ESC+"[1;"+(c+1)+"B",E||a.key!==u.C0.ESC+"[1;3B"||(a.key=u.C0.ESC+"[1;5B")):a.key=f?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(a.key=u.C0.ESC+"[2~");break;case 46:a.key=c?u.C0.ESC+"[3;"+(c+1)+"~":u.C0.ESC+"[3~";break;case 36:a.key=c?u.C0.ESC+"[1;"+(c+1)+"H":f?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:a.key=c?u.C0.ESC+"[1;"+(c+1)+"F":f?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:d.shiftKey?a.type=2:a.key=u.C0.ESC+"[5~";break;case 34:d.shiftKey?a.type=3:a.key=u.C0.ESC+"[6~";break;case 112:a.key=c?u.C0.ESC+"[1;"+(c+1)+"P":u.C0.ESC+"OP";break;case 113:a.key=c?u.C0.ESC+"[1;"+(c+1)+"Q":u.C0.ESC+"OQ";break;case 114:a.key=c?u.C0.ESC+"[1;"+(c+1)+"R":u.C0.ESC+"OR";break;case 115:a.key=c?u.C0.ESC+"[1;"+(c+1)+"S":u.C0.ESC+"OS";break;case 116:a.key=c?u.C0.ESC+"[15;"+(c+1)+"~":u.C0.ESC+"[15~";break;case 117:a.key=c?u.C0.ESC+"[17;"+(c+1)+"~":u.C0.ESC+"[17~";break;case 118:a.key=c?u.C0.ESC+"[18;"+(c+1)+"~":u.C0.ESC+"[18~";break;case 119:a.key=c?u.C0.ESC+"[19;"+(c+1)+"~":u.C0.ESC+"[19~";break;case 120:a.key=c?u.C0.ESC+"[20;"+(c+1)+"~":u.C0.ESC+"[20~";break;case 121:a.key=c?u.C0.ESC+"[21;"+(c+1)+"~":u.C0.ESC+"[21~";break;case 122:a.key=c?u.C0.ESC+"[23;"+(c+1)+"~":u.C0.ESC+"[23~";break;case 123:a.key=c?u.C0.ESC+"[24;"+(c+1)+"~":u.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(E&&!v||!d.altKey||d.metaKey)!E||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?a.key=d.key:d.key&&d.ctrlKey&&d.key==="_"&&(a.key=u.C0.US):d.keyCode===65&&(a.type=1);else{var o=p[d.keyCode],t=o&&o[d.shiftKey?1:0];if(t)a.key=u.C0.ESC+t;else if(d.keyCode>=65&&d.keyCode<=90){var r=d.ctrlKey?d.keyCode-64:d.keyCode+32;a.key=u.C0.ESC+String.fromCharCode(r)}}else d.keyCode>=65&&d.keyCode<=90?a.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?a.key=u.C0.NUL:d.keyCode>=51&&d.keyCode<=55?a.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?a.key=u.C0.DEL:d.keyCode===219?a.key=u.C0.ESC:d.keyCode===220?a.key=u.C0.FS:d.keyCode===221&&(a.key=u.C0.GS)}return a}},482:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(p){return p>65535?(p-=65536,String.fromCharCode(55296+(p>>10))+String.fromCharCode(p%1024+56320)):String.fromCharCode(p)},l.utf32ToString=function(p,d,f){d===void 0&&(d=0),f===void 0&&(f=p.length);for(var E="",v=d;v<f;++v){var a=p[v];a>65535?(a-=65536,E+=String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):E+=String.fromCharCode(a)}return E};var y=function(){function p(){this._interim=0}return p.prototype.clear=function(){this._interim=0},p.prototype.decode=function(d,f){var E=d.length;if(!E)return 0;var v=0,a=0;this._interim&&(56320<=(t=d.charCodeAt(a++))&&t<=57343?f[v++]=1024*(this._interim-55296)+t-56320+65536:(f[v++]=this._interim,f[v++]=t),this._interim=0);for(var c=a;c<E;++c){var o=d.charCodeAt(c);if(55296<=o&&o<=56319){if(++c>=E)return this._interim=o,v;var t;56320<=(t=d.charCodeAt(c))&&t<=57343?f[v++]=1024*(o-55296)+t-56320+65536:(f[v++]=o,f[v++]=t)}else o!==65279&&(f[v++]=o)}return v},p}();l.StringToUtf32=y;var u=function(){function p(){this.interim=new Uint8Array(3)}return p.prototype.clear=function(){this.interim.fill(0)},p.prototype.decode=function(d,f){var E=d.length;if(!E)return 0;var v,a,c,o,t=0,r=0,e=0;if(this.interim[0]){var i=!1,s=this.interim[0];s&=(224&s)==192?31:(240&s)==224?15:7;for(var n=0,h=void 0;(h=63&this.interim[++n])&&n<4;)s<<=6,s|=h;for(var _=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,m=_-n;e<m;){if(e>=E)return 0;if((192&(h=d[e++]))!=128){e--,i=!0;break}this.interim[n++]=h,s<<=6,s|=63&h}i||(_===2?s<128?e--:f[t++]=s:_===3?s<2048||s>=55296&&s<=57343||s===65279||(f[t++]=s):s<65536||s>1114111||(f[t++]=s)),this.interim.fill(0)}for(var g=E-4,S=e;S<E;){for(;!(!(S<g)||128&(v=d[S])||128&(a=d[S+1])||128&(c=d[S+2])||128&(o=d[S+3]));)f[t++]=v,f[t++]=a,f[t++]=c,f[t++]=o,S+=4;if((v=d[S++])<128)f[t++]=v;else if((224&v)==192){if(S>=E)return this.interim[0]=v,t;if((192&(a=d[S++]))!=128){S--;continue}if((r=(31&v)<<6|63&a)<128){S--;continue}f[t++]=r}else if((240&v)==224){if(S>=E)return this.interim[0]=v,t;if((192&(a=d[S++]))!=128){S--;continue}if(S>=E)return this.interim[0]=v,this.interim[1]=a,t;if((192&(c=d[S++]))!=128){S--;continue}if((r=(15&v)<<12|(63&a)<<6|63&c)<2048||r>=55296&&r<=57343||r===65279)continue;f[t++]=r}else if((248&v)==240){if(S>=E)return this.interim[0]=v,t;if((192&(a=d[S++]))!=128){S--;continue}if(S>=E)return this.interim[0]=v,this.interim[1]=a,t;if((192&(c=d[S++]))!=128){S--;continue}if(S>=E)return this.interim[0]=v,this.interim[1]=a,this.interim[2]=c,t;if((192&(o=d[S++]))!=128){S--;continue}if((r=(7&v)<<18|(63&a)<<12|(63&c)<<6|63&o)<65536||r>1114111)continue;f[t++]=r}}return t},p}();l.Utf8ToUtf32=u},225:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV6=void 0;var u,p=y(8273),d=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],E=function(){function v(){if(this.version="6",!u){u=new Uint8Array(65536),p.fill(u,1),u[0]=0,p.fill(u,0,1,32),p.fill(u,0,127,160),p.fill(u,2,4352,4448),u[9001]=2,u[9002]=2,p.fill(u,2,11904,42192),u[12351]=1,p.fill(u,2,44032,55204),p.fill(u,2,63744,64256),p.fill(u,2,65040,65050),p.fill(u,2,65072,65136),p.fill(u,2,65280,65377),p.fill(u,2,65504,65511);for(var a=0;a<d.length;++a)p.fill(u,0,d[a][0],d[a][1]+1)}}return v.prototype.wcwidth=function(a){return a<32?0:a<127?1:a<65536?u[a]:function(c,o){var t,r=0,e=o.length-1;if(c<o[0][0]||c>o[e][1])return!1;for(;e>=r;)if(c>o[t=r+e>>1][1])r=t+1;else{if(!(c<o[t][0]))return!0;e=t-1}return!1}(a,f)?0:a>=131072&&a<=196605||a>=196608&&a<=262141?2:1},v}();l.UnicodeV6=E},5981:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.WriteBuffer=void 0;var y=typeof queueMicrotask=="undefined"?function(p){Promise.resolve().then(p)}:queueMicrotask,u=function(){function p(d){this._action=d,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return p.prototype.writeSync=function(d,f){if(f!==void 0&&this._syncCalls>f)this._syncCalls=0;else if(this._pendingData+=d.length,this._writeBuffer.push(d),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var E;for(this._isSyncWriting=!0;E=this._writeBuffer.shift();){this._action(E);var v=this._callbacks.shift();v&&v()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},p.prototype.write=function(d,f){var E=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return E._innerWrite()})),this._pendingData+=d.length,this._writeBuffer.push(d),this._callbacks.push(f)},p.prototype._innerWrite=function(d,f){var E=this;d===void 0&&(d=0),f===void 0&&(f=!0);for(var v=d||Date.now();this._writeBuffer.length>this._bufferOffset;){var a=this._writeBuffer[this._bufferOffset],c=this._action(a,f);if(c)return void c.catch(function(t){return y(function(){throw t}),Promise.resolve(!1)}).then(function(t){return Date.now()-v>=12?setTimeout(function(){return E._innerWrite(0,t)}):E._innerWrite(v,t)});var o=this._callbacks[this._bufferOffset];if(o&&o(),this._bufferOffset++,this._pendingData-=a.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return E._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},p}();l.WriteBuffer=u},5770:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.PAYLOAD_LIMIT=void 0,l.PAYLOAD_LIMIT=1e7},6351:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.DcsHandler=l.DcsParser=void 0;var u=y(482),p=y(8742),d=y(5770),f=[],E=function(){function c(){this._handlers=Object.create(null),this._active=f,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return c.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=f},c.prototype.registerHandler=function(o,t){this._handlers[o]===void 0&&(this._handlers[o]=[]);var r=this._handlers[o];return r.push(t),{dispose:function(){var i=r.indexOf(t);i!==-1&&r.splice(i,1)}}},c.prototype.clearHandler=function(o){this._handlers[o]&&delete this._handlers[o]},c.prototype.setHandlerFallback=function(o){this._handlerFb=o},c.prototype.reset=function(){if(this._active.length)for(var o=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;o>=0;--o)this._active[o].unhook(!1);this._stack.paused=!1,this._active=f,this._ident=0},c.prototype.hook=function(o,t){if(this.reset(),this._ident=o,this._active=this._handlers[o]||f,this._active.length)for(var r=this._active.length-1;r>=0;r--)this._active[r].hook(t);else this._handlerFb(this._ident,"HOOK",t)},c.prototype.put=function(o,t,r){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(o,t,r);else this._handlerFb(this._ident,"PUT",u.utf32ToString(o,t,r))},c.prototype.unhook=function(o,t){if(t===void 0&&(t=!0),this._active.length){var r=!1,e=this._active.length-1,i=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,r=t,i=this._stack.fallThrough,this._stack.paused=!1),!i&&r===!1){for(;e>=0&&(r=this._active[e].unhook(o))!==!0;e--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,r;e--}for(;e>=0;e--)if((r=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",o);this._active=f,this._ident=0},c}();l.DcsParser=E;var v=new p.Params;v.addParam(0);var a=function(){function c(o){this._handler=o,this._data="",this._params=v,this._hitLimit=!1}return c.prototype.hook=function(o){this._params=o.length>1||o.params[0]?o.clone():v,this._data="",this._hitLimit=!1},c.prototype.put=function(o,t,r){this._hitLimit||(this._data+=u.utf32ToString(o,t,r),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},c.prototype.unhook=function(o){var t=this,r=!1;if(this._hitLimit)r=!1;else if(o&&(r=this._handler(this._data,this._params))instanceof Promise)return r.then(function(e){return t._params=v,t._data="",t._hitLimit=!1,e});return this._params=v,this._data="",this._hitLimit=!1,r},c}();l.DcsHandler=a},2015:function(I,l,y){var u,p=this&&this.__extends||(u=function(e,i){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var h in n)Object.prototype.hasOwnProperty.call(n,h)&&(s[h]=n[h])})(e,i)},function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=r}u(r,e),r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.EscapeSequenceParser=l.VT500_TRANSITION_TABLE=l.TransitionTable=void 0;var d=y(844),f=y(8273),E=y(8742),v=y(6242),a=y(6351),c=function(){function r(e){this.table=new Uint8Array(e)}return r.prototype.setDefault=function(e,i){f.fill(this.table,e<<4|i)},r.prototype.add=function(e,i,s,n){this.table[i<<8|e]=s<<4|n},r.prototype.addMany=function(e,i,s,n){for(var h=0;h<e.length;h++)this.table[i<<8|e[h]]=s<<4|n},r}();l.TransitionTable=c;var o=160;l.VT500_TRANSITION_TABLE=function(){var r=new c(4095),e=Array.apply(null,Array(256)).map(function(m,g){return g}),i=function(g,S){return e.slice(g,S)},s=i(32,127),n=i(0,24);n.push(25),n.push.apply(n,i(28,32));var h,_=i(0,14);for(h in r.setDefault(1,0),r.addMany(s,0,2,0),_)r.addMany([24,26,153,154],h,3,0),r.addMany(i(128,144),h,3,0),r.addMany(i(144,152),h,3,0),r.add(156,h,0,0),r.add(27,h,11,1),r.add(157,h,4,8),r.addMany([152,158,159],h,0,7),r.add(155,h,11,3),r.add(144,h,11,9);return r.addMany(n,0,3,0),r.addMany(n,1,3,1),r.add(127,1,0,1),r.addMany(n,8,0,8),r.addMany(n,3,3,3),r.add(127,3,0,3),r.addMany(n,4,3,4),r.add(127,4,0,4),r.addMany(n,6,3,6),r.addMany(n,5,3,5),r.add(127,5,0,5),r.addMany(n,2,3,2),r.add(127,2,0,2),r.add(93,1,4,8),r.addMany(s,8,5,8),r.add(127,8,5,8),r.addMany([156,27,24,26,7],8,6,0),r.addMany(i(28,32),8,0,8),r.addMany([88,94,95],1,0,7),r.addMany(s,7,0,7),r.addMany(n,7,0,7),r.add(156,7,0,0),r.add(127,7,0,7),r.add(91,1,11,3),r.addMany(i(64,127),3,7,0),r.addMany(i(48,60),3,8,4),r.addMany([60,61,62,63],3,9,4),r.addMany(i(48,60),4,8,4),r.addMany(i(64,127),4,7,0),r.addMany([60,61,62,63],4,0,6),r.addMany(i(32,64),6,0,6),r.add(127,6,0,6),r.addMany(i(64,127),6,0,0),r.addMany(i(32,48),3,9,5),r.addMany(i(32,48),5,9,5),r.addMany(i(48,64),5,0,6),r.addMany(i(64,127),5,7,0),r.addMany(i(32,48),4,9,5),r.addMany(i(32,48),1,9,2),r.addMany(i(32,48),2,9,2),r.addMany(i(48,127),2,10,0),r.addMany(i(48,80),1,10,0),r.addMany(i(81,88),1,10,0),r.addMany([89,90,92],1,10,0),r.addMany(i(96,127),1,10,0),r.add(80,1,11,9),r.addMany(n,9,0,9),r.add(127,9,0,9),r.addMany(i(28,32),9,0,9),r.addMany(i(32,48),9,9,12),r.addMany(i(48,60),9,8,10),r.addMany([60,61,62,63],9,9,10),r.addMany(n,11,0,11),r.addMany(i(32,128),11,0,11),r.addMany(i(28,32),11,0,11),r.addMany(n,10,0,10),r.add(127,10,0,10),r.addMany(i(28,32),10,0,10),r.addMany(i(48,60),10,8,10),r.addMany([60,61,62,63],10,0,11),r.addMany(i(32,48),10,9,12),r.addMany(n,12,0,12),r.add(127,12,0,12),r.addMany(i(28,32),12,0,12),r.addMany(i(32,48),12,9,12),r.addMany(i(48,64),12,0,11),r.addMany(i(64,127),12,12,13),r.addMany(i(64,127),10,12,13),r.addMany(i(64,127),9,12,13),r.addMany(n,13,13,13),r.addMany(s,13,13,13),r.add(127,13,0,13),r.addMany([27,156,24,26],13,14,0),r.add(o,0,2,0),r.add(o,8,5,8),r.add(o,6,0,6),r.add(o,11,0,11),r.add(o,13,13,13),r}();var t=function(r){function e(i){i===void 0&&(i=l.VT500_TRANSITION_TABLE);var s=r.call(this)||this;return s._transitions=i,s._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},s.initialState=0,s.currentState=s.initialState,s._params=new E.Params,s._params.addParam(0),s._collect=0,s.precedingCodepoint=0,s._printHandlerFb=function(n,h,_){},s._executeHandlerFb=function(n){},s._csiHandlerFb=function(n,h){},s._escHandlerFb=function(n){},s._errorHandlerFb=function(n){return n},s._printHandler=s._printHandlerFb,s._executeHandlers=Object.create(null),s._csiHandlers=Object.create(null),s._escHandlers=Object.create(null),s._oscParser=new v.OscParser,s._dcsParser=new a.DcsParser,s._errorHandler=s._errorHandlerFb,s.registerEscHandler({final:"\\"},function(){return!0}),s}return p(e,r),e.prototype._identifier=function(i,s){s===void 0&&(s=[64,126]);var n=0;if(i.prefix){if(i.prefix.length>1)throw new Error("only one byte as prefix supported");if((n=i.prefix.charCodeAt(0))&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(i.intermediates){if(i.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var h=0;h<i.intermediates.length;++h){var _=i.intermediates.charCodeAt(h);if(32>_||_>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=_}}if(i.final.length!==1)throw new Error("final must be a single byte");var m=i.final.charCodeAt(0);if(s[0]>m||m>s[1])throw new Error("final must be in range "+s[0]+" .. "+s[1]);return(n<<=8)|m},e.prototype.identToString=function(i){for(var s=[];i;)s.push(String.fromCharCode(255&i)),i>>=8;return s.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(i){this._printHandler=i},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(i,s){var n=this._identifier(i,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);var h=this._escHandlers[n];return h.push(s),{dispose:function(){var m=h.indexOf(s);m!==-1&&h.splice(m,1)}}},e.prototype.clearEscHandler=function(i){this._escHandlers[this._identifier(i,[48,126])]&&delete this._escHandlers[this._identifier(i,[48,126])]},e.prototype.setEscHandlerFallback=function(i){this._escHandlerFb=i},e.prototype.setExecuteHandler=function(i,s){this._executeHandlers[i.charCodeAt(0)]=s},e.prototype.clearExecuteHandler=function(i){this._executeHandlers[i.charCodeAt(0)]&&delete this._executeHandlers[i.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(i){this._executeHandlerFb=i},e.prototype.registerCsiHandler=function(i,s){var n=this._identifier(i);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);var h=this._csiHandlers[n];return h.push(s),{dispose:function(){var m=h.indexOf(s);m!==-1&&h.splice(m,1)}}},e.prototype.clearCsiHandler=function(i){this._csiHandlers[this._identifier(i)]&&delete this._csiHandlers[this._identifier(i)]},e.prototype.setCsiHandlerFallback=function(i){this._csiHandlerFb=i},e.prototype.registerDcsHandler=function(i,s){return this._dcsParser.registerHandler(this._identifier(i),s)},e.prototype.clearDcsHandler=function(i){this._dcsParser.clearHandler(this._identifier(i))},e.prototype.setDcsHandlerFallback=function(i){this._dcsParser.setHandlerFallback(i)},e.prototype.registerOscHandler=function(i,s){return this._oscParser.registerHandler(i,s)},e.prototype.clearOscHandler=function(i){this._oscParser.clearHandler(i)},e.prototype.setOscHandlerFallback=function(i){this._oscParser.setHandlerFallback(i)},e.prototype.setErrorHandler=function(i){this._errorHandler=i},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(i,s,n,h,_){this._parseStack.state=i,this._parseStack.handlers=s,this._parseStack.handlerPos=n,this._parseStack.transition=h,this._parseStack.chunkPos=_},e.prototype.parse=function(i,s,n){var h,_=0,m=0,g=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,g=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var S=this._parseStack.handlers,C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&C>-1){for(;C>=0&&(h=S[C](this._params))!==!0;C--)if(h instanceof Promise)return this._parseStack.handlerPos=C,h}this._parseStack.handlers=[];break;case 4:if(n===!1&&C>-1){for(;C>=0&&(h=S[C]())!==!0;C--)if(h instanceof Promise)return this._parseStack.handlerPos=C,h}this._parseStack.handlers=[];break;case 6:if(_=i[this._parseStack.chunkPos],h=this._dcsParser.unhook(_!==24&&_!==26,n))return h;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(_=i[this._parseStack.chunkPos],h=this._oscParser.end(_!==24&&_!==26,n))return h;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,g=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var k=g;k<s;++k){switch(_=i[k],(m=this._transitions.table[this.currentState<<8|(_<160?_:o)])>>4){case 2:for(var L=k+1;;++L){if(L>=s||(_=i[L])<32||_>126&&_<o){this._printHandler(i,k,L),k=L-1;break}if(++L>=s||(_=i[L])<32||_>126&&_<o){this._printHandler(i,k,L),k=L-1;break}if(++L>=s||(_=i[L])<32||_>126&&_<o){this._printHandler(i,k,L),k=L-1;break}if(++L>=s||(_=i[L])<32||_>126&&_<o){this._printHandler(i,k,L),k=L-1;break}}break;case 3:this._executeHandlers[_]?this._executeHandlers[_]():this._executeHandlerFb(_),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:k,code:_,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var A=(S=this._csiHandlers[this._collect<<8|_])?S.length-1:-1;A>=0&&(h=S[A](this._params))!==!0;A--)if(h instanceof Promise)return this._preserveStack(3,S,A,m,k),h;A<0&&this._csiHandlerFb(this._collect<<8|_,this._params),this.precedingCodepoint=0;break;case 8:do switch(_){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(_-48)}while(++k<s&&(_=i[k])>47&&_<60);k--;break;case 9:this._collect<<=8,this._collect|=_;break;case 10:for(var w=this._escHandlers[this._collect<<8|_],b=w?w.length-1:-1;b>=0&&(h=w[b]())!==!0;b--)if(h instanceof Promise)return this._preserveStack(4,w,b,m,k),h;b<0&&this._escHandlerFb(this._collect<<8|_),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|_,this._params);break;case 13:for(var P=k+1;;++P)if(P>=s||(_=i[P])===24||_===26||_===27||_>127&&_<o){this._dcsParser.put(i,k,P),k=P-1;break}break;case 14:if(h=this._dcsParser.unhook(_!==24&&_!==26))return this._preserveStack(6,[],0,m,k),h;_===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var R=k+1;;R++)if(R>=s||(_=i[R])<32||_>127&&_<o){this._oscParser.put(i,k,R),k=R-1;break}break;case 6:if(h=this._oscParser.end(_!==24&&_!==26))return this._preserveStack(5,[],0,m,k),h;_===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&m}},e}(d.Disposable);l.EscapeSequenceParser=t},6242:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.OscHandler=l.OscParser=void 0;var u=y(5770),p=y(482),d=[],f=function(){function v(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return v.prototype.registerHandler=function(a,c){this._handlers[a]===void 0&&(this._handlers[a]=[]);var o=this._handlers[a];return o.push(c),{dispose:function(){var r=o.indexOf(c);r!==-1&&o.splice(r,1)}}},v.prototype.clearHandler=function(a){this._handlers[a]&&delete this._handlers[a]},v.prototype.setHandlerFallback=function(a){this._handlerFb=a},v.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=d},v.prototype.reset=function(){if(this._state===2)for(var a=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;a>=0;--a)this._active[a].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0},v.prototype._start=function(){if(this._active=this._handlers[this._id]||d,this._active.length)for(var a=this._active.length-1;a>=0;a--)this._active[a].start();else this._handlerFb(this._id,"START")},v.prototype._put=function(a,c,o){if(this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].put(a,c,o);else this._handlerFb(this._id,"PUT",p.utf32ToString(a,c,o))},v.prototype.start=function(){this.reset(),this._state=1},v.prototype.put=function(a,c,o){if(this._state!==3){if(this._state===1)for(;c<o;){var t=a[c++];if(t===59){this._state=2,this._start();break}if(t<48||57<t)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+t-48}this._state===2&&o-c>0&&this._put(a,c,o)}},v.prototype.end=function(a,c){if(c===void 0&&(c=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var o=!1,t=this._active.length-1,r=!1;if(this._stack.paused&&(t=this._stack.loopPosition-1,o=c,r=this._stack.fallThrough,this._stack.paused=!1),!r&&o===!1){for(;t>=0&&(o=this._active[t].end(a))!==!0;t--)if(o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=t,this._stack.fallThrough=!1,o;t--}for(;t>=0;t--)if((o=this._active[t].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=t,this._stack.fallThrough=!0,o}else this._handlerFb(this._id,"END",a);this._active=d,this._id=-1,this._state=0}},v}();l.OscParser=f;var E=function(){function v(a){this._handler=a,this._data="",this._hitLimit=!1}return v.prototype.start=function(){this._data="",this._hitLimit=!1},v.prototype.put=function(a,c,o){this._hitLimit||(this._data+=p.utf32ToString(a,c,o),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},v.prototype.end=function(a){var c=this,o=!1;if(this._hitLimit)o=!1;else if(a&&(o=this._handler(this._data))instanceof Promise)return o.then(function(t){return c._data="",c._hitLimit=!1,t});return this._data="",this._hitLimit=!1,o},v}();l.OscHandler=E},8742:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.Params=void 0;var y=2147483647,u=function(){function p(d,f){if(d===void 0&&(d=32),f===void 0&&(f=32),this.maxLength=d,this.maxSubParamsLength=f,f>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(f),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return p.fromArray=function(d){var f=new p;if(!d.length)return f;for(var E=d[0]instanceof Array?1:0;E<d.length;++E){var v=d[E];if(v instanceof Array)for(var a=0;a<v.length;++a)f.addSubParam(v[a]);else f.addParam(v)}return f},p.prototype.clone=function(){var d=new p(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d},p.prototype.toArray=function(){for(var d=[],f=0;f<this.length;++f){d.push(this.params[f]);var E=this._subParamsIdx[f]>>8,v=255&this._subParamsIdx[f];v-E>0&&d.push(Array.prototype.slice.call(this._subParams,E,v))}return d},p.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},p.prototype.addParam=function(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>y?y:d}},p.prototype.addSubParam=function(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>y?y:d,this._subParamsIdx[this.length-1]++}},p.prototype.hasSubParams=function(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0},p.prototype.getSubParams=function(d){var f=this._subParamsIdx[d]>>8,E=255&this._subParamsIdx[d];return E-f>0?this._subParams.subarray(f,E):null},p.prototype.getSubParamsAll=function(){for(var d={},f=0;f<this.length;++f){var E=this._subParamsIdx[f]>>8,v=255&this._subParamsIdx[f];v-E>0&&(d[f]=this._subParams.slice(E,v))}return d},p.prototype.addDigit=function(d){var f;if(!(this._rejectDigits||!(f=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var E=this._digitIsSub?this._subParams:this.params,v=E[f-1];E[f-1]=~v?Math.min(10*v+d,y):d}},p}();l.Params=u},744:function(I,l,y){var u,p=this&&this.__extends||(u=function(r,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i[n]=s[n])})(r,e)},function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}u(t,r),t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),d=this&&this.__decorate||function(t,r,e,i){var s,n=arguments.length,h=n<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(t,r,e,i);else for(var _=t.length-1;_>=0;_--)(s=t[_])&&(h=(n<3?s(h):n>3?s(r,e,h):s(r,e))||h);return n>3&&h&&Object.defineProperty(r,e,h),h},f=this&&this.__param||function(t,r){return function(e,i){r(e,i,t)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferService=l.MINIMUM_ROWS=l.MINIMUM_COLS=void 0;var E=y(2585),v=y(5295),a=y(8460),c=y(844);l.MINIMUM_COLS=2,l.MINIMUM_ROWS=1;var o=function(t){function r(e){var i=t.call(this)||this;return i._optionsService=e,i.isUserScrolling=!1,i._onResize=new a.EventEmitter,i._onScroll=new a.EventEmitter,i.cols=Math.max(e.options.cols,l.MINIMUM_COLS),i.rows=Math.max(e.options.rows,l.MINIMUM_ROWS),i.buffers=new v.BufferSet(e,i),i}return p(r,t),Object.defineProperty(r.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){t.prototype.dispose.call(this),this.buffers.dispose()},r.prototype.resize=function(e,i){this.cols=e,this.rows=i,this.buffers.resize(e,i),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:i})},r.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},r.prototype.scroll=function(e,i){i===void 0&&(i=!1);var s,n=this.buffer;(s=this._cachedBlankLine)&&s.length===this.cols&&s.getFg(0)===e.fg&&s.getBg(0)===e.bg||(s=n.getBlankLine(e,i),this._cachedBlankLine=s),s.isWrapped=i;var h=n.ybase+n.scrollTop,_=n.ybase+n.scrollBottom;if(n.scrollTop===0){var m=n.lines.isFull;_===n.lines.length-1?m?n.lines.recycle().copyFrom(s):n.lines.push(s.clone()):n.lines.splice(_+1,0,s.clone()),m?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{var g=_-h+1;n.lines.shiftElements(h+1,g-1,-1),n.lines.set(_,s.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)},r.prototype.scrollLines=function(e,i,s){var n=this.buffer;if(e<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else e+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);var h=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+e,n.ybase),0),h!==n.ydisp&&(i||this._onScroll.fire(n.ydisp))},r.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},r.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},r.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},r.prototype.scrollToLine=function(e){var i=e-this.buffer.ydisp;i!==0&&this.scrollLines(i)},d([f(0,E.IOptionsService)],r)}(c.Disposable);l.BufferService=o},7994:function(I,l){Object.defineProperty(l,"__esModule",{value:!0}),l.CharsetService=void 0;var y=function(){function u(){this.glevel=0,this._charsets=[]}return u.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},u.prototype.setgLevel=function(p){this.glevel=p,this.charset=this._charsets[p]},u.prototype.setgCharset=function(p,d){this._charsets[p]=d,this.glevel===p&&(this.charset=d)},u}();l.CharsetService=y},1753:function(I,l,y){var u=this&&this.__decorate||function(t,r,e,i){var s,n=arguments.length,h=n<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(t,r,e,i);else for(var _=t.length-1;_>=0;_--)(s=t[_])&&(h=(n<3?s(h):n>3?s(r,e,h):s(r,e))||h);return n>3&&h&&Object.defineProperty(r,e,h),h},p=this&&this.__param||function(t,r){return function(e,i){r(e,i,t)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreMouseService=void 0;var d=y(2585),f=y(8460),E={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(r){return r.button!==4&&r.action===1&&(r.ctrl=!1,r.alt=!1,r.shift=!1,!0)}},VT200:{events:19,restrict:function(r){return r.action!==32}},DRAG:{events:23,restrict:function(r){return r.action!==32||r.button!==3}},ANY:{events:31,restrict:function(r){return!0}}};function v(t,r){var e=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return t.button===4?(e|=64,e|=t.action):(e|=3&t.button,4&t.button&&(e|=64),8&t.button&&(e|=128),t.action===32?e|=32:t.action!==0||r||(e|=3)),e}var a=String.fromCharCode,c={DEFAULT:function(r){var e=[v(r,!1)+32,r.col+32,r.row+32];return e[0]>255||e[1]>255||e[2]>255?"":"[M"+a(e[0])+a(e[1])+a(e[2])},SGR:function(r){var e=r.action===0&&r.button!==4?"m":"M";return"[<"+v(r,!0)+";"+r.col+";"+r.row+e}},o=function(){function t(r,e){this._bufferService=r,this._coreService=e,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new f.EventEmitter,this._lastEvent=null;for(var i=0,s=Object.keys(E);i<s.length;i++){var n=s[i];this.addProtocol(n,E[n])}for(var h=0,_=Object.keys(c);h<_.length;h++){var m=_[h];this.addEncoding(m,c[m])}this.reset()}return t.prototype.addProtocol=function(r,e){this._protocols[r]=e},t.prototype.addEncoding=function(r,e){this._encodings[r]=e},Object.defineProperty(t.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(e){if(!this._protocols[e])throw new Error('unknown protocol "'+e+'"');this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(e){if(!this._encodings[e])throw new Error('unknown encoding "'+e+'"');this._activeEncoding=e},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(t.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),t.prototype.triggerMouseEvent=function(r){if(r.col<0||r.col>=this._bufferService.cols||r.row<0||r.row>=this._bufferService.rows||r.button===4&&r.action===32||r.button===3&&r.action!==32||r.button!==4&&(r.action===2||r.action===3)||(r.col++,r.row++,r.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,r))||!this._protocols[this._activeProtocol].restrict(r))return!1;var e=this._encodings[this._activeEncoding](r);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=r,!0},t.prototype.explainEvents=function(r){return{down:!!(1&r),up:!!(2&r),drag:!!(4&r),move:!!(8&r),wheel:!!(16&r)}},t.prototype._compareEvents=function(r,e){return r.col===e.col&&r.row===e.row&&r.button===e.button&&r.action===e.action&&r.ctrl===e.ctrl&&r.alt===e.alt&&r.shift===e.shift},u([p(0,d.IBufferService),p(1,d.ICoreService)],t)}();l.CoreMouseService=o},6975:function(I,l,y){var u,p=this&&this.__extends||(u=function(i,s){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,h){n.__proto__=h}||function(n,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(n[_]=h[_])})(i,s)},function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}u(e,i),e.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}),d=this&&this.__decorate||function(e,i,s,n){var h,_=arguments.length,m=_<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,s):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,i,s,n);else for(var g=e.length-1;g>=0;g--)(h=e[g])&&(m=(_<3?h(m):_>3?h(i,s,m):h(i,s))||m);return _>3&&m&&Object.defineProperty(i,s,m),m},f=this&&this.__param||function(e,i){return function(s,n){i(s,n,e)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreService=void 0;var E=y(2585),v=y(8460),a=y(1439),c=y(844),o=Object.freeze({insertMode:!1}),t=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),r=function(e){function i(s,n,h,_){var m=e.call(this)||this;return m._bufferService=n,m._logService=h,m._optionsService=_,m.isCursorInitialized=!1,m.isCursorHidden=!1,m._onData=m.register(new v.EventEmitter),m._onUserInput=m.register(new v.EventEmitter),m._onBinary=m.register(new v.EventEmitter),m._scrollToBottom=s,m.register({dispose:function(){return m._scrollToBottom=void 0}}),m.modes=a.clone(o),m.decPrivateModes=a.clone(t),m}return p(i,e),Object.defineProperty(i.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.modes=a.clone(o),this.decPrivateModes=a.clone(t)},i.prototype.triggerDataEvent=function(s,n){if(n===void 0&&(n=!1),!this._optionsService.options.disableStdin){var h=this._bufferService.buffer;h.ybase!==h.ydisp&&this._scrollToBottom(),n&&this._onUserInput.fire(),this._logService.debug('sending data "'+s+'"',function(){return s.split("").map(function(_){return _.charCodeAt(0)})}),this._onData.fire(s)}},i.prototype.triggerBinaryEvent=function(s){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+s+'"',function(){return s.split("").map(function(n){return n.charCodeAt(0)})}),this._onBinary.fire(s))},d([f(1,E.IBufferService),f(2,E.ILogService),f(3,E.IOptionsService)],i)}(c.Disposable);l.CoreService=r},3730:function(I,l,y){var u=this&&this.__decorate||function(E,v,a,c){var o,t=arguments.length,r=t<3?v:c===null?c=Object.getOwnPropertyDescriptor(v,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(E,v,a,c);else for(var e=E.length-1;e>=0;e--)(o=E[e])&&(r=(t<3?o(r):t>3?o(v,a,r):o(v,a))||r);return t>3&&r&&Object.defineProperty(v,a,r),r},p=this&&this.__param||function(E,v){return function(a,c){v(a,c,E)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DirtyRowService=void 0;var d=y(2585),f=function(){function E(v){this._bufferService=v,this.clearRange()}return Object.defineProperty(E.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),E.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},E.prototype.markDirty=function(v){v<this._start?this._start=v:v>this._end&&(this._end=v)},E.prototype.markRangeDirty=function(v,a){if(v>a){var c=v;v=a,a=c}v<this._start&&(this._start=v),a>this._end&&(this._end=a)},E.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},u([p(0,d.IBufferService)],E)}();l.DirtyRowService=f},4348:function(I,l,y){var u=this&&this.__spreadArray||function(v,a){for(var c=0,o=a.length,t=v.length;c<o;c++,t++)v[t]=a[c];return v};Object.defineProperty(l,"__esModule",{value:!0}),l.InstantiationService=l.ServiceCollection=void 0;var p=y(2585),d=y(8343),f=function(){function v(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];this._entries=new Map;for(var o=0,t=a;o<t.length;o++){var r=t[o],e=r[0],i=r[1];this.set(e,i)}}return v.prototype.set=function(a,c){var o=this._entries.get(a);return this._entries.set(a,c),o},v.prototype.forEach=function(a){this._entries.forEach(function(c,o){return a(o,c)})},v.prototype.has=function(a){return this._entries.has(a)},v.prototype.get=function(a){return this._entries.get(a)},v}();l.ServiceCollection=f;var E=function(){function v(){this._services=new f,this._services.set(p.IInstantiationService,this)}return v.prototype.setService=function(a,c){this._services.set(a,c)},v.prototype.getService=function(a){return this._services.get(a)},v.prototype.createInstance=function(a){for(var c=[],o=1;o<arguments.length;o++)c[o-1]=arguments[o];for(var t=d.getServiceDependencies(a).sort(function(_,m){return _.index-m.index}),r=[],e=0,i=t;e<i.length;e++){var s=i[e],n=this._services.get(s.id);if(!n)throw new Error("[createInstance] "+a.name+" depends on UNKNOWN service "+s.id+".");r.push(n)}var h=t.length>0?t[0].index:c.length;if(c.length!==h)throw new Error("[createInstance] First service dependency of "+a.name+" at position "+(h+1)+" conflicts with "+c.length+" static arguments");return new(a.bind.apply(a,u([void 0],u(u([],c),r))))},v}();l.InstantiationService=E},7866:function(I,l,y){var u=this&&this.__decorate||function(a,c,o,t){var r,e=arguments.length,i=e<3?c:t===null?t=Object.getOwnPropertyDescriptor(c,o):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,c,o,t);else for(var s=a.length-1;s>=0;s--)(r=a[s])&&(i=(e<3?r(i):e>3?r(c,o,i):r(c,o))||i);return e>3&&i&&Object.defineProperty(c,o,i),i},p=this&&this.__param||function(a,c){return function(o,t){c(o,t,a)}},d=this&&this.__spreadArray||function(a,c){for(var o=0,t=c.length,r=a.length;o<t;o++,r++)a[r]=c[o];return a};Object.defineProperty(l,"__esModule",{value:!0}),l.LogService=void 0;var f=y(2585),E={debug:f.LogLevelEnum.DEBUG,info:f.LogLevelEnum.INFO,warn:f.LogLevelEnum.WARN,error:f.LogLevelEnum.ERROR,off:f.LogLevelEnum.OFF},v=function(){function a(c){var o=this;this._optionsService=c,this.logLevel=f.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(t){t==="logLevel"&&o._updateLogLevel()})}return a.prototype._updateLogLevel=function(){this.logLevel=E[this._optionsService.options.logLevel]},a.prototype._evalLazyOptionalParams=function(c){for(var o=0;o<c.length;o++)typeof c[o]=="function"&&(c[o]=c[o]())},a.prototype._log=function(c,o,t){this._evalLazyOptionalParams(t),c.call.apply(c,d([console,"xterm.js: "+o],t))},a.prototype.debug=function(c){for(var o=[],t=1;t<arguments.length;t++)o[t-1]=arguments[t];this.logLevel<=f.LogLevelEnum.DEBUG&&this._log(console.log,c,o)},a.prototype.info=function(c){for(var o=[],t=1;t<arguments.length;t++)o[t-1]=arguments[t];this.logLevel<=f.LogLevelEnum.INFO&&this._log(console.info,c,o)},a.prototype.warn=function(c){for(var o=[],t=1;t<arguments.length;t++)o[t-1]=arguments[t];this.logLevel<=f.LogLevelEnum.WARN&&this._log(console.warn,c,o)},a.prototype.error=function(c){for(var o=[],t=1;t<arguments.length;t++)o[t-1]=arguments[t];this.logLevel<=f.LogLevelEnum.ERROR&&this._log(console.error,c,o)},u([p(0,f.IOptionsService)],a)}();l.LogService=v},7302:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.OptionsService=l.DEFAULT_OPTIONS=l.DEFAULT_BELL_SOUND=void 0;var u=y(8460),p=y(6114),d=y(1439);l.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",l.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,bellSound:l.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1});var f=["normal","bold","100","200","300","400","500","600","700","800","900"],E=["cols","rows"],v=function(){function a(c){this._onOptionChange=new u.EventEmitter,this.options=d.clone(l.DEFAULT_OPTIONS);for(var o=0,t=Object.keys(c);o<t.length;o++){var r=t[o];if(r in this.options)try{var e=c[r];this.options[r]=this._sanitizeAndValidateOption(r,e)}catch(i){console.error(i)}}}return Object.defineProperty(a.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),a.prototype.setOption=function(c,o){if(!(c in l.DEFAULT_OPTIONS))throw new Error('No option with key "'+c+'"');if(E.includes(c))throw new Error('Option "'+c+'" can only be set in the constructor');this.options[c]!==o&&(o=this._sanitizeAndValidateOption(c,o),this.options[c]!==o&&(this.options[c]=o,this._onOptionChange.fire(c)))},a.prototype._sanitizeAndValidateOption=function(c,o){switch(c){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":o||(o=l.DEFAULT_OPTIONS[c]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=f.includes(o)?o:l.DEFAULT_OPTIONS[c];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(c+" cannot be less than 1, value: "+o);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(c+" cannot be less than 0, value: "+o);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(c+" cannot be less than or equal to 0, value: "+o)}return o},a.prototype.getOption=function(c){if(!(c in l.DEFAULT_OPTIONS))throw new Error('No option with key "'+c+'"');return this.options[c]},a}();l.OptionsService=v},8343:function(I,l){function y(u,p,d){p.di$target===p?p.di$dependencies.push({id:u,index:d}):(p.di$dependencies=[{id:u,index:d}],p.di$target=p)}Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0,l.serviceRegistry=new Map,l.getServiceDependencies=function(u){return u.di$dependencies||[]},l.createDecorator=function(u){if(l.serviceRegistry.has(u))return l.serviceRegistry.get(u);var p=function d(f,E,v){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");y(d,f,v)};return p.toString=function(){return u},l.serviceRegistry.set(u,p),p}},2585:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.IUnicodeService=l.LogLevelEnum=l.IOptionsService=l.ILogService=l.IInstantiationService=l.IDirtyRowService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;var u,p=y(8343);l.IBufferService=p.createDecorator("BufferService"),l.ICoreMouseService=p.createDecorator("CoreMouseService"),l.ICoreService=p.createDecorator("CoreService"),l.ICharsetService=p.createDecorator("CharsetService"),l.IDirtyRowService=p.createDecorator("DirtyRowService"),l.IInstantiationService=p.createDecorator("InstantiationService"),l.ILogService=p.createDecorator("LogService"),l.IOptionsService=p.createDecorator("OptionsService"),(u=l.LogLevelEnum||(l.LogLevelEnum={}))[u.DEBUG=0]="DEBUG",u[u.INFO=1]="INFO",u[u.WARN=2]="WARN",u[u.ERROR=3]="ERROR",u[u.OFF=4]="OFF",l.IUnicodeService=p.createDecorator("UnicodeService")},1480:function(I,l,y){Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeService=void 0;var u=y(8460),p=y(225),d=function(){function f(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter;var E=new p.UnicodeV6;this.register(E),this._active=E.version,this._activeProvider=E}return Object.defineProperty(f.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"activeVersion",{get:function(){return this._active},set:function(v){if(!this._providers[v])throw new Error('unknown Unicode version "'+v+'"');this._active=v,this._activeProvider=this._providers[v],this._onChange.fire(v)},enumerable:!1,configurable:!0}),f.prototype.register=function(E){this._providers[E.version]=E},f.prototype.wcwidth=function(E){return this._activeProvider.wcwidth(E)},f.prototype.getStringCellWidth=function(E){for(var v=0,a=E.length,c=0;c<a;++c){var o=E.charCodeAt(c);if(55296<=o&&o<=56319){if(++c>=a)return v+this.wcwidth(o);var t=E.charCodeAt(c);56320<=t&&t<=57343?o=1024*(o-55296)+t-56320+65536:v+=this.wcwidth(t)}v+=this.wcwidth(o)}return v},f}();l.UnicodeService=d}},W={};function K(D){var I=W[D];if(I!==void 0)return I.exports;var l=W[D]={exports:{}};return J[D].call(l.exports,l,l.exports,K),l.exports}var q={};return function(){var D=q;Object.defineProperty(D,"__esModule",{value:!0}),D.Terminal=void 0;var I=K(511),l=K(3236),y=K(9042),u=K(8460),p=K(244),d=function(){function o(t){this._core=new l.Terminal(t),this._addonManager=new p.AddonManager}return o.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(o.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new a(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"unicode",{get:function(){return this._checkProposedApi(),new c(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new E(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),o.prototype.blur=function(){this._core.blur()},o.prototype.focus=function(){this._core.focus()},o.prototype.resize=function(t,r){this._verifyIntegers(t,r),this._core.resize(t,r)},o.prototype.open=function(t){this._core.open(t)},o.prototype.attachCustomKeyEventHandler=function(t){this._core.attachCustomKeyEventHandler(t)},o.prototype.registerLinkMatcher=function(t,r,e){return this._checkProposedApi(),this._core.registerLinkMatcher(t,r,e)},o.prototype.deregisterLinkMatcher=function(t){this._checkProposedApi(),this._core.deregisterLinkMatcher(t)},o.prototype.registerLinkProvider=function(t){return this._checkProposedApi(),this._core.registerLinkProvider(t)},o.prototype.registerCharacterJoiner=function(t){return this._checkProposedApi(),this._core.registerCharacterJoiner(t)},o.prototype.deregisterCharacterJoiner=function(t){this._checkProposedApi(),this._core.deregisterCharacterJoiner(t)},o.prototype.registerMarker=function(t){return this._checkProposedApi(),this._verifyIntegers(t),this._core.addMarker(t)},o.prototype.addMarker=function(t){return this.registerMarker(t)},o.prototype.hasSelection=function(){return this._core.hasSelection()},o.prototype.select=function(t,r,e){this._verifyIntegers(t,r,e),this._core.select(t,r,e)},o.prototype.getSelection=function(){return this._core.getSelection()},o.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},o.prototype.clearSelection=function(){this._core.clearSelection()},o.prototype.selectAll=function(){this._core.selectAll()},o.prototype.selectLines=function(t,r){this._verifyIntegers(t,r),this._core.selectLines(t,r)},o.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},o.prototype.scrollLines=function(t){this._verifyIntegers(t),this._core.scrollLines(t)},o.prototype.scrollPages=function(t){this._verifyIntegers(t),this._core.scrollPages(t)},o.prototype.scrollToTop=function(){this._core.scrollToTop()},o.prototype.scrollToBottom=function(){this._core.scrollToBottom()},o.prototype.scrollToLine=function(t){this._verifyIntegers(t),this._core.scrollToLine(t)},o.prototype.clear=function(){this._core.clear()},o.prototype.write=function(t,r){this._core.write(t,r)},o.prototype.writeUtf8=function(t,r){this._core.write(t,r)},o.prototype.writeln=function(t,r){this._core.write(t),this._core.write(`\r
`,r)},o.prototype.paste=function(t){this._core.paste(t)},o.prototype.getOption=function(t){return this._core.optionsService.getOption(t)},o.prototype.setOption=function(t,r){this._core.optionsService.setOption(t,r)},o.prototype.refresh=function(t,r){this._verifyIntegers(t,r),this._core.refresh(t,r)},o.prototype.reset=function(){this._core.reset()},o.prototype.loadAddon=function(t){return this._addonManager.loadAddon(this,t)},Object.defineProperty(o,"strings",{get:function(){return y},enumerable:!1,configurable:!0}),o.prototype._verifyIntegers=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,i=t;e<i.length;e++){var s=i[e];if(s===1/0||isNaN(s)||s%1!=0)throw new Error("This API only accepts integers")}},o}();D.Terminal=d;var f=function(){function o(t,r){this._buffer=t,this.type=r}return o.prototype.init=function(t){return this._buffer=t,this},Object.defineProperty(o.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),o.prototype.getLine=function(t){var r=this._buffer.lines.get(t);if(r)return new v(r)},o.prototype.getNullCell=function(){return new I.CellData},o}(),E=function(){function o(t){var r=this;this._core=t,this._onBufferChange=new u.EventEmitter,this._normal=new f(this._core.buffers.normal,"normal"),this._alternate=new f(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return r._onBufferChange.fire(r.active)})}return Object.defineProperty(o.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),o}(),v=function(){function o(t){this._line=t}return Object.defineProperty(o.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),o.prototype.getCell=function(t,r){if(!(t<0||t>=this._line.length))return r?(this._line.loadCell(t,r),r):this._line.loadCell(t,new I.CellData)},o.prototype.translateToString=function(t,r,e){return this._line.translateToString(t,r,e)},o}(),a=function(){function o(t){this._core=t}return o.prototype.registerCsiHandler=function(t,r){return this._core.registerCsiHandler(t,function(e){return r(e.toArray())})},o.prototype.addCsiHandler=function(t,r){return this.registerCsiHandler(t,r)},o.prototype.registerDcsHandler=function(t,r){return this._core.registerDcsHandler(t,function(e,i){return r(e,i.toArray())})},o.prototype.addDcsHandler=function(t,r){return this.registerDcsHandler(t,r)},o.prototype.registerEscHandler=function(t,r){return this._core.registerEscHandler(t,r)},o.prototype.addEscHandler=function(t,r){return this.registerEscHandler(t,r)},o.prototype.registerOscHandler=function(t,r){return this._core.registerOscHandler(t,r)},o.prototype.addOscHandler=function(t,r){return this.registerOscHandler(t,r)},o}(),c=function(){function o(t){this._core=t}return o.prototype.register=function(t){this._core.unicodeService.register(t)},Object.defineProperty(o.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(r){this._core.unicodeService.activeVersion=r},enumerable:!1,configurable:!0}),o}()}(),q}()})}}]);
