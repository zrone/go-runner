(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[541],{42179:function(Ae,Y,u){"use strict";u.r(Y),u.d(Y,{default:function(){return we}});var Be=u(13753),P=u(48429),Ie=u(43623),_=u(28930),Re=u(77111),q=u(49194),E=u(44742),c=u(52663),De=u(14643),d=u(92909),p=u(68699),ee=u(94043),n=u.n(ee),ae=u(49101),e=u(67294),re=u(4688),te=u(59545),M=u(72709),j=u(27398);function ue(s){return G.apply(this,arguments)}function G(){return G=(0,p.Z)(n().mark(function s(t){return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,M.Z)("".concat(j.Z.host,"/task/proj/list"),{params:t}));case 1:case"end":return r.stop()}},s)})),G.apply(this,arguments)}function ne(s){return H.apply(this,arguments)}function H(){return H=(0,p.Z)(n().mark(function s(t){return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,M.Z)("".concat(j.Z.host,"/task/proj/").concat(t),{method:"DELETE"}));case 1:case"end":return r.stop()}},s)})),H.apply(this,arguments)}function le(s){return K.apply(this,arguments)}function K(){return K=(0,p.Z)(n().mark(function s(t){return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,M.Z)("".concat(j.Z.host,"/task/proj"),{method:"POST",data:(0,c.Z)({},t)}));case 1:case"end":return r.stop()}},s)})),K.apply(this,arguments)}function se(s){return J.apply(this,arguments)}function J(){return J=(0,p.Z)(n().mark(function s(t){return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,M.Z)("".concat(j.Z.host,"/task/proj/").concat(t.symbol),{method:"PATCH",data:(0,c.Z)({},t)}));case 1:case"end":return r.stop()}},s)})),J.apply(this,arguments)}function oe(s){return N.apply(this,arguments)}function N(){return N=(0,p.Z)(n().mark(function s(t){return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,M.Z)("".concat(j.Z.host,"/task/proj/publish"),{method:"POST",data:(0,c.Z)({},t)}));case 1:case"end":return r.stop()}},s)})),N.apply(this,arguments)}var Ve=u(26780),Q=u(46567),W=u(13378),Te=u(25324),X=u(45733),$e=u(11826),x=u(25727),Pe=u(90140),L=u(32620),Ue=u(68137),f=u(50532),Le=u(67604),l=u(46906),ie={labelCol:{span:5},wrapperCol:{span:18}},ce={wrapperCol:{span:18,offset:5}},me=function(t){var i=(0,e.useState)({name:"",secret:"",path:"",option:1,user:"",host:"",port:22,pwd:""}),r=(0,E.Z)(i,1),o=r[0],v=t.modalVisible,a=t.onCancel,V=t.onSubmit,k=l.Z.useForm(),T=(0,E.Z)(k,1),I=T[0],R=(0,e.useState)(!0),C=(0,E.Z)(R,2),g=C[0],D=C[1],$=function(){var w=(0,p.Z)(n().mark(function b(){var A;return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,I.validateFields();case 2:A=B.sent,V((0,c.Z)((0,c.Z)({},o),A));case 4:case"end":return B.stop()}},b)}));return function(){return w.apply(this,arguments)}}(),F=function(b){b.target.value==1?D(!0):D(!1)};return e.createElement(Q.Z,{bodyStyle:{padding:"32px 40px 10px"},destroyOnClose:!0,maskClosable:!1,title:"\u6DFB\u52A0\u9879\u76EE",visible:v,onCancel:function(){return a()},footer:null,width:800,centered:!0},e.createElement(l.Z,(0,W.Z)({},ie,{form:I,colon:!1,initialValues:o,size:"middle"}),e.createElement(l.Z.Item,{name:"name",label:"\u9879\u76EE\u540D\u79F0",hasFeedback:!0,rules:[{required:!0,message:"\u9879\u76EE\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]},e.createElement(f.Z,{placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,{name:"option",label:"\u90E8\u7F72\u7C7B\u578B",hasFeedback:!0},e.createElement(L.ZP.Group,{onChange:F},e.createElement(L.ZP,{value:1},"\u81EA\u52A8\u5316\u90E8\u7F72"),e.createElement(L.ZP,{value:2},"\u4E0A\u7EBF\u53D1\u5E03"))),g&&e.createElement(l.Z.Item,{name:"secret",label:"\u79D8\u94A5",hasFeedback:!0,tooltip:"\u81EA\u52A8\u5316\u90E8\u7F72\u5FC5\u987B\u914D\u7F6E\u6821\u9A8C\u79D8\u94A5"},e.createElement(f.Z,{placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,{name:"path",label:"\u90E8\u7F72\u8DEF\u5F84",hasFeedback:!0,rules:[{required:!0,message:"\u90E8\u7F72\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]},e.createElement(f.Z,{placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,{name:"host",label:"\u4E3B\u673A",hasFeedback:!0,rules:[{required:!0,message:"\u4E3B\u673A\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]},e.createElement(f.Z,{placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,{name:"user",label:"\u7528\u6237\u540D",hasFeedback:!0,rules:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]},e.createElement(f.Z,{placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,{name:"port",label:"\u7AEF\u53E3",rules:[{required:!0,message:"\u7AEF\u53E3\u4E0D\u80FD\u4E3A\u7A7A!"}]},e.createElement(x.Z,{min:0,placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,{name:"pwd",label:"\u767B\u5F55\u5BC6\u7801",hasFeedback:!0,rules:[{required:!0,message:"\u767B\u5F55\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]},e.createElement(f.Z.Password,{placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,ce,e.createElement(X.Z,null,e.createElement(P.Z,{type:"primary",onClick:function(){return $()}},"\u63D0\u4EA4"),e.createElement(P.Z,{onClick:a},"\u53D6\u6D88")))))},de=me,pe={labelCol:{span:5},wrapperCol:{span:18}},fe={wrapperCol:{span:18,offset:5}},he=function(t){var i=t.onSubmit,r=t.onCancel,o=t.updateModalVisible,v=t.values,a=(0,e.useState)(v),V=(0,E.Z)(a,1),k=V[0],T=l.Z.useForm(),I=(0,E.Z)(T,1),R=I[0],C=(0,e.useState)(k.option==1),g=(0,E.Z)(C,2),D=g[0],$=g[1],F=function(){var b=(0,p.Z)(n().mark(function A(){var O;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,R.validateFields();case 2:O=U.sent,i((0,c.Z)((0,c.Z)({},k),O));case 4:case"end":return U.stop()}},A)}));return function(){return b.apply(this,arguments)}}(),w=function(A){A.target.value==1?$(!0):$(!1)};return e.createElement(Q.Z,{bodyStyle:{padding:"32px 40px 10px"},destroyOnClose:!0,maskClosable:!1,title:"\u7F16\u8F91\u9879\u76EE",visible:o,onCancel:function(){return r()},footer:null,width:800,centered:!0},e.createElement(l.Z,(0,W.Z)({},pe,{form:R,colon:!1,initialValues:k,size:"middle"}),e.createElement(l.Z.Item,{name:"symbol",label:"\u9879\u76EE\u6807\u8BC6",hasFeedback:!0,rules:[{required:!0,message:"\u9879\u76EE\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]},e.createElement(f.Z,{disabled:!0,placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,{name:"name",label:"\u9879\u76EE\u540D\u79F0",hasFeedback:!0,rules:[{required:!0,message:"\u9879\u76EE\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]},e.createElement(f.Z,{placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,{name:"option",label:"\u90E8\u7F72\u7C7B\u578B",hasFeedback:!0},e.createElement(L.ZP.Group,{onChange:w},e.createElement(L.ZP,{value:1},"\u81EA\u52A8\u5316\u90E8\u7F72"),e.createElement(L.ZP,{value:2},"\u4E0A\u7EBF\u53D1\u5E03"))),D&&e.createElement(l.Z.Item,{name:"secret",label:"\u79D8\u94A5",hasFeedback:!0,tooltip:"\u81EA\u52A8\u5316\u90E8\u7F72\u5FC5\u987B\u914D\u7F6E\u6821\u9A8C\u79D8\u94A5"},e.createElement(f.Z,{placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,{name:"path",label:"\u90E8\u7F72\u8DEF\u5F84",hasFeedback:!0,rules:[{required:!0,message:"\u90E8\u7F72\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]},e.createElement(f.Z,{placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,{name:"host",label:"\u4E3B\u673A",hasFeedback:!0,rules:[{required:!0,message:"\u4E3B\u673A\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]},e.createElement(f.Z,{placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,{name:"user",label:"\u7528\u6237\u540D",hasFeedback:!0,rules:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]},e.createElement(f.Z,{placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,{name:"port",label:"\u7AEF\u53E3",rules:[{required:!0,message:"\u7AEF\u53E3\u4E0D\u80FD\u4E3A\u7A7A!"}]},e.createElement(x.Z,{min:0,placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,{name:"pwd",label:"\u767B\u5F55\u5BC6\u7801",hasFeedback:!0},e.createElement(f.Z.Password,{placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,fe,e.createElement(X.Z,null,e.createElement(P.Z,{type:"primary",onClick:function(){return F()}},"\u63D0\u4EA4"),e.createElement(P.Z,{onClick:function(){return r(!1,v)}},"\u53D6\u6D88")))))},ve=he,Ee={labelCol:{span:5},wrapperCol:{span:18}},Ze={wrapperCol:{span:18,offset:5}},Fe=function(t){var i=(0,e.useState)({symbol:t.symbol,branch:"",html_url:""}),r=(0,E.Z)(i,1),o=r[0],v=t.modalVisible,a=t.onCancel,V=t.onSubmit,k=l.Z.useForm(),T=(0,E.Z)(k,1),I=T[0],R=function(){var C=(0,p.Z)(n().mark(function g(){var D;return n().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,I.validateFields();case 2:D=F.sent,V((0,c.Z)((0,c.Z)({},o),D));case 4:case"end":return F.stop()}},g)}));return function(){return C.apply(this,arguments)}}();return e.createElement(Q.Z,{bodyStyle:{padding:"32px 40px 10px"},destroyOnClose:!0,maskClosable:!1,title:"\u53D1\u5E03\u4EFB\u52A1",visible:v,onCancel:function(){return a()},footer:null,width:600,centered:!0},e.createElement(l.Z,(0,W.Z)({},Ee,{form:I,colon:!1,initialValues:o,size:"middle"}),e.createElement(l.Z.Item,{name:"html_url",label:"repo",hasFeedback:!0,rules:[{required:!0,message:"git\u4ED3\u5E93\u5730\u5740\uFF01"}]},e.createElement(f.Z,{placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,{name:"branch",label:"\u5206\u652F",hasFeedback:!0,rules:[{required:!0,message:"\u53D1\u5E03\u5206\u652F\u4E0D\u80FD\u4E3A\u7A7A\uFF01"}]},e.createElement(f.Z,{placeholder:"\u8BF7\u8F93\u5165"})),e.createElement(l.Z.Item,Ze,e.createElement(X.Z,null,e.createElement(P.Z,{type:"primary",onClick:function(){return R()}},"\u63D0\u4EA4"),e.createElement(P.Z,{onClick:a},"\u53D6\u6D88")))))},be=Fe,ye=function(){var s=(0,p.Z)(n().mark(function t(i){var r,o;return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=d.default.loading({content:"\u63D0\u4EA4\u4E2D...",key:"handleRelease"}),a.prev=1,a.next=4,oe((0,c.Z)({},i));case 4:if(o=a.sent,o.code!=400){a.next=8;break}return d.default.error({content:o.message,key:"handleRelease",duration:2}),a.abrupt("return",!1);case 8:return d.default.success({content:"\u53D1\u5E03\u4EFB\u52A1\u6210\u529F!",key:"handleRelease",duration:2}),a.abrupt("return",!0);case 12:return a.prev=12,a.t0=a.catch(1),d.default.error({content:"\u53D1\u5E03\u4EFB\u52A1\u5931\u8D25!",key:"handleRelease",duration:2}),a.abrupt("return",!1);case 16:return a.prev=16,setTimeout(function(){r()},2e3),a.finish(16);case 19:case"end":return a.stop()}},t,null,[[1,12,16,19]])}));return function(i){return s.apply(this,arguments)}}(),Ce=function(){var s=(0,p.Z)(n().mark(function t(i){var r,o;return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=d.default.loading({content:"\u63D0\u4EA4\u4E2D...",key:"handleAdd"}),a.prev=1,a.next=4,le((0,c.Z)({},i));case 4:if(o=a.sent,o.code!=400){a.next=8;break}return d.default.error({content:o.message,key:"handleAdd",duration:2}),a.abrupt("return",!1);case 8:return d.default.success({content:"\u521B\u5EFA\u6210\u529F!",key:"handleAdd",duration:2}),a.abrupt("return",!0);case 12:return a.prev=12,a.t0=a.catch(1),d.default.error({content:"\u521B\u5EFA\u5931\u8D25!",key:"handleAdd",duration:2}),a.abrupt("return",!1);case 16:return a.prev=16,setTimeout(function(){r()},2e3),a.finish(16);case 19:case"end":return a.stop()}},t,null,[[1,12,16,19]])}));return function(i){return s.apply(this,arguments)}}(),ge=function(){var s=(0,p.Z)(n().mark(function t(i){var r,o;return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=d.default.loading({content:"\u63D0\u4EA4\u4E2D...",key:"handleAdd"}),a.prev=1,a.next=4,se(i);case 4:if(o=a.sent,o.code!=400){a.next=8;break}return d.default.error({content:o.message,key:"handleAdd",duration:2}),a.abrupt("return",!1);case 8:return d.default.success({content:"\u66F4\u65B0\u6210\u529F!",key:"handleAdd",duration:2}),a.abrupt("return",!0);case 12:return a.prev=12,a.t0=a.catch(1),d.default.error({content:"\u66F4\u65B0\u5931\u8D25!",key:"handleAdd",duration:2}),a.abrupt("return",!1);case 16:return a.prev=16,setTimeout(function(){r()},2e3),a.finish(16);case 19:case"end":return a.stop()}},t,null,[[1,12,16,19]])}));return function(i){return s.apply(this,arguments)}}(),Se=function(){var s=(0,p.Z)(n().mark(function t(i){var r,o;return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=d.default.loading({content:"\u63D0\u4EA4\u4E2D...",key:"handleRemove"}),a.prev=1,a.next=4,ne(i);case 4:if(o=a.sent,o.code!==400){a.next=8;break}return d.default.error({content:o.message,key:"handleRemove",duration:2}),a.abrupt("return",!1);case 8:return d.default.success({content:"\u5220\u9664\u6210\u529F!",key:"handleRemove",duration:2}),a.abrupt("return",!0);case 12:return a.prev=12,a.t0=a.catch(1),d.default.error({content:"\u5220\u9664\u5931\u8D25!",key:"handleRemove",duration:2}),a.abrupt("return",!1);case 16:return a.prev=16,setTimeout(function(){r()},2e3),a.finish(16);case 19:case"end":return a.stop()}},t,null,[[1,12,16,19]])}));return function(i){return s.apply(this,arguments)}}(),ke=function(){var t=(0,e.useRef)(),i=(0,e.useState)(!1),r=(0,E.Z)(i,2),o=r[0],v=r[1],a=(0,e.useState)(""),V=(0,E.Z)(a,2),k=V[0],T=V[1],I=(0,e.useState)(!1),R=(0,E.Z)(I,2),C=R[0],g=R[1],D=(0,e.useState)(!1),$=(0,E.Z)(D,2),F=$[0],w=$[1],b=(0,e.useState)(),A=(0,E.Z)(b,2),O=A[0],B=A[1],U=[{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"name",fixed:"left",ellipsis:!0,width:120},{title:"\u9879\u76EE\u7C7B\u578B",dataIndex:"option",width:100,render:function(Z,h){return h.option==1?"\u81EA\u52A8\u5316\u90E8\u7F72":"\u4E0A\u7EBF\u53D1\u5E03"}},{title:"\u901A\u77E5\u5730\u5740",dataIndex:"symbol",ellipsis:!0,copyable:!0,width:180},{title:"\u79D8\u94A5",dataIndex:"secret",ellipsis:!0,copyable:!0,width:220},{title:"\u90E8\u7F72\u76EE\u5F55",dataIndex:"path",ellipsis:!0,hideInTable:!0,width:150},{title:"\u4E3B\u673A\u5730\u5740",dataIndex:"host",hideInTable:!0},{title:"\u7528\u6237\u540D",dataIndex:"ssh",hideInTable:!0},{title:"\u7AEF\u53E3",dataIndex:"port",hideInTable:!0},{title:"\u94FE\u63A5\u5BC6\u7801",dataIndex:"pwd",hideInTable:!0},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",width:140,fixed:"right",render:function(Z,h){var S=null;return h.option==2&&(S=e.createElement(e.Fragment,null,e.createElement(q.Z,{type:"vertical"}),e.createElement("a",{onClick:function(){T(h.release_symbol),v(!0)}},"\u53D1\u5E03"))),e.createElement(e.Fragment,null,e.createElement("a",{onClick:function(){B((0,c.Z)((0,c.Z)({},h),{},{symbol:h.release_symbol})),w(!0)}},"\u914D\u7F6E"),e.createElement(q.Z,{type:"vertical"}),e.createElement(_.Z,{title:"\u786E\u8BA4\u8981\u5220\u9664\u9879\u76EE\u914D\u7F6E\u5417?",onConfirm:function(){Se(h.release_symbol),t.current&&t.current.reload()},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88"},e.createElement("a",null,"\u5220\u9664")),S)}}];return e.createElement(re.Z,null,e.createElement(te.ZP,{headerTitle:"\u9879\u76EE\u5217\u8868",size:"small",actionRef:t,rowKey:"symbol",search:!1,toolBarRender:function(){return[e.createElement(P.Z,{type:"primary",key:"primary",onClick:function(){g(!0)}},e.createElement(ae.Z,null)," \u6DFB\u52A0")]},request:function(Z,h){return ue((0,c.Z)((0,c.Z)({},Z),{},{sorter:h}))},columns:U,scroll:{x:800}}),o?e.createElement(be,{modalVisible:o,onCancel:function(){return v(!1)},onSubmit:function(){var y=(0,p.Z)(n().mark(function Z(h){var S;return n().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,ye((0,c.Z)((0,c.Z)({},h),{},{symbol:k}));case 2:S=m.sent,S&&(v(!1),T(""));case 4:case"end":return m.stop()}},Z)}));return function(Z){return y.apply(this,arguments)}}(),symbol:k}):null,C?e.createElement(de,{onCancel:function(){return g(!1)},modalVisible:C,onSubmit:function(){var y=(0,p.Z)(n().mark(function Z(h){var S;return n().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Ce(h);case 2:S=m.sent,S&&(g(!1),t.current&&t.current.reload());case 4:case"end":return m.stop()}},Z)}));return function(Z){return y.apply(this,arguments)}}()}):null,F?e.createElement(ve,{values:O,onSubmit:function(){var y=(0,p.Z)(n().mark(function Z(h){var S;return n().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,ge(h);case 2:S=m.sent,S&&(w(!1),B({symbol:"",name:"",secret:"",path:"",option:1,user:"",host:"",port:22,pwd:""}),t.current&&t.current.reload());case 4:case"end":return m.stop()}},Z)}));return function(Z){return y.apply(this,arguments)}}(),onCancel:function(){w(!1),B({symbol:"",name:"",secret:"",path:"",option:1,user:"",host:"",port:22,pwd:""})},updateModalVisible:F}):null)},we=ke}}]);
