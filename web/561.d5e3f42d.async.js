(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[561],{70347:function(){},7935:function(ie,J,K){"use strict";K.d(J,{Z:function(){return a}});var Z=K(65497),z=K(82124),M=K(67294),H=K(75177),l=K.n(H),g=K(62010),u=K(21458),p=function(h,d){var m={};for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&d.indexOf(y)<0&&(m[y]=h[y]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,y=Object.getOwnPropertySymbols(h);S<y.length;S++)d.indexOf(y[S])<0&&Object.prototype.propertyIsEnumerable.call(h,y[S])&&(m[y[S]]=h[y[S]]);return m},_=function(d){var m=d.prefixCls,y=d.className,S=d.hoverable,C=S===void 0?!0:S,A=p(d,["prefixCls","className","hoverable"]);return M.createElement(u.C,null,function(L){var x=L.getPrefixCls,w=x("card",m),b=l()("".concat(w,"-grid"),y,(0,Z.Z)({},"".concat(w,"-grid-hoverable"),C));return M.createElement("div",(0,z.Z)({},A,{className:b}))})},f=_,E=function(h,d){var m={};for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&d.indexOf(y)<0&&(m[y]=h[y]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,y=Object.getOwnPropertySymbols(h);S<y.length;S++)d.indexOf(y[S])<0&&Object.prototype.propertyIsEnumerable.call(h,y[S])&&(m[y[S]]=h[y[S]]);return m},v=function(d){return M.createElement(u.C,null,function(m){var y=m.getPrefixCls,S=d.prefixCls,C=d.className,A=d.avatar,L=d.title,x=d.description,w=E(d,["prefixCls","className","avatar","title","description"]),b=y("card",S),D=l()("".concat(b,"-meta"),C),R=A?M.createElement("div",{className:"".concat(b,"-meta-avatar")},A):null,j=L?M.createElement("div",{className:"".concat(b,"-meta-title")},L):null,B=x?M.createElement("div",{className:"".concat(b,"-meta-description")},x):null,F=j||B?M.createElement("div",{className:"".concat(b,"-meta-detail")},j,B):null;return M.createElement("div",(0,z.Z)({},w,{className:D}),R,F)})},o=v,c=K(36322),n=K(87379),t=K(29024),r=K(61470),e=function(h,d){var m={};for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&d.indexOf(y)<0&&(m[y]=h[y]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,y=Object.getOwnPropertySymbols(h);S<y.length;S++)d.indexOf(y[S])<0&&Object.prototype.propertyIsEnumerable.call(h,y[S])&&(m[y[S]]=h[y[S]]);return m};function i(h){var d=h.map(function(m,y){return M.createElement("li",{style:{width:"".concat(100/h.length,"%")},key:"action-".concat(y)},M.createElement("span",null,m))});return d}var s=function(d){var m,y,S=M.useContext(u.E_),C=S.getPrefixCls,A=S.direction,L=M.useContext(r.Z),x=function(ae){var ne;(ne=d.onTabChange)===null||ne===void 0||ne.call(d,ae)},w=function(){var ae;return M.Children.forEach(d.children,function(ne){ne&&ne.type&&ne.type===f&&(ae=!0)}),ae},b=d.prefixCls,D=d.className,R=d.extra,j=d.headStyle,B=j===void 0?{}:j,F=d.bodyStyle,N=F===void 0?{}:F,V=d.title,k=d.loading,O=d.bordered,T=O===void 0?!0:O,I=d.size,P=d.type,W=d.cover,U=d.actions,Y=d.tabList,$=d.children,Q=d.activeTabKey,q=d.defaultActiveTabKey,G=d.tabBarExtraContent,ee=d.hoverable,re=d.tabProps,se=re===void 0?{}:re,fe=e(d,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),X=C("card",b),_e=N.padding===0||N.padding==="0px"?{padding:24}:void 0,te=M.createElement("div",{className:"".concat(X,"-loading-block")}),de=M.createElement("div",{className:"".concat(X,"-loading-content"),style:_e},M.createElement(n.Z,{gutter:8},M.createElement(t.Z,{span:22},te)),M.createElement(n.Z,{gutter:8},M.createElement(t.Z,{span:8},te),M.createElement(t.Z,{span:15},te)),M.createElement(n.Z,{gutter:8},M.createElement(t.Z,{span:6},te),M.createElement(t.Z,{span:18},te)),M.createElement(n.Z,{gutter:8},M.createElement(t.Z,{span:13},te),M.createElement(t.Z,{span:9},te)),M.createElement(n.Z,{gutter:8},M.createElement(t.Z,{span:4},te),M.createElement(t.Z,{span:3},te),M.createElement(t.Z,{span:16},te))),ce=Q!==void 0,pe=(0,z.Z)((0,z.Z)({},se),(m={},(0,Z.Z)(m,ce?"activeKey":"defaultActiveKey",ce?Q:q),(0,Z.Z)(m,"tabBarExtraContent",G),m)),le,he=Y&&Y.length?M.createElement(c.Z,(0,z.Z)({size:"large"},pe,{className:"".concat(X,"-head-tabs"),onChange:x}),Y.map(function(oe){return M.createElement(c.Z.TabPane,{tab:oe.tab,disabled:oe.disabled,key:oe.key})})):null;(V||R||he)&&(le=M.createElement("div",{className:"".concat(X,"-head"),style:B},M.createElement("div",{className:"".concat(X,"-head-wrapper")},V&&M.createElement("div",{className:"".concat(X,"-head-title")},V),R&&M.createElement("div",{className:"".concat(X,"-extra")},R)),he));var ve=W?M.createElement("div",{className:"".concat(X,"-cover")},W):null,ge=M.createElement("div",{className:"".concat(X,"-body"),style:N},k?de:$),ye=U&&U.length?M.createElement("ul",{className:"".concat(X,"-actions")},i(U)):null,be=(0,g.Z)(fe,["onTabChange"]),ue=I||L,me=l()(X,(y={},(0,Z.Z)(y,"".concat(X,"-loading"),k),(0,Z.Z)(y,"".concat(X,"-bordered"),T),(0,Z.Z)(y,"".concat(X,"-hoverable"),ee),(0,Z.Z)(y,"".concat(X,"-contain-grid"),w()),(0,Z.Z)(y,"".concat(X,"-contain-tabs"),Y&&Y.length),(0,Z.Z)(y,"".concat(X,"-").concat(ue),ue),(0,Z.Z)(y,"".concat(X,"-type-").concat(P),!!P),(0,Z.Z)(y,"".concat(X,"-rtl"),A==="rtl"),y),D);return M.createElement("div",(0,z.Z)({},be,{className:me}),le,ve,ge,ye)};s.Grid=f,s.Meta=o;var a=s},81766:function(ie,J,K){"use strict";var Z=K(65056),z=K.n(Z),M=K(70347),H=K.n(M),l=K(68383),g=K(69885),u=K(1898)},99625:function(ie){(function(J,K){ie.exports=K()})(self,function(){return function(){"use strict";var J={775:function(z,M){Object.defineProperty(M,"__esModule",{value:!0}),M.FitAddon=void 0;var H=function(){function l(){}return l.prototype.activate=function(g){this._terminal=g},l.prototype.dispose=function(){},l.prototype.fit=function(){var g=this.proposeDimensions();if(g&&this._terminal){var u=this._terminal._core;this._terminal.rows===g.rows&&this._terminal.cols===g.cols||(u._renderService.clear(),this._terminal.resize(g.cols,g.rows))}},l.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var g=this._terminal._core;if(g._renderService.dimensions.actualCellWidth!==0&&g._renderService.dimensions.actualCellHeight!==0){var u=window.getComputedStyle(this._terminal.element.parentElement),p=parseInt(u.getPropertyValue("height")),_=Math.max(0,parseInt(u.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),E=p-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),v=_-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-g.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(v/g._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(E/g._renderService.dimensions.actualCellHeight))}}}},l}();M.FitAddon=H}},K={};return function Z(z){if(K[z])return K[z].exports;var M=K[z]={exports:{}};return J[z](M,M.exports,Z),M.exports}(775)}()})},9688:function(ie){(function(J,K){ie.exports=K()})(window,function(){return function(J){var K={};function Z(z){if(K[z])return K[z].exports;var M=K[z]={i:z,l:!1,exports:{}};return J[z].call(M.exports,M,M.exports,Z),M.l=!0,M.exports}return Z.m=J,Z.c=K,Z.d=function(z,M,H){Z.o(z,M)||Object.defineProperty(z,M,{enumerable:!0,get:H})},Z.r=function(z){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})},Z.t=function(z,M){if(1&M&&(z=Z(z)),8&M||4&M&&typeof z=="object"&&z&&z.__esModule)return z;var H=Object.create(null);if(Z.r(H),Object.defineProperty(H,"default",{enumerable:!0,value:z}),2&M&&typeof z!="string")for(var l in z)Z.d(H,l,function(g){return z[g]}.bind(null,l));return H},Z.n=function(z){var M=z&&z.__esModule?function(){return z.default}:function(){return z};return Z.d(M,"a",M),M},Z.o=function(z,M){return Object.prototype.hasOwnProperty.call(z,M)},Z.p="",Z(Z.s=0)}([function(J,K,Z){"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.WebLinksAddon=void 0;var z=Z(1),M=new RegExp(`(?:^|[^\\da-z\\.-]+)((https?:\\/\\/)((([\\da-z\\.-]+)\\.([a-z\\.]{2,6}))|((\\d{1,3}\\.){3}\\d{1,3})|(localhost))(:\\d{1,5})?((\\/[\\/\\w\\.\\-%~:+@]*)*([^:"'\\s]))?(\\?[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?(#[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?)($|[^\\/\\w\\.\\-%]+)`);function H(g,u){var p=window.open();p?(p.opener=null,p.location.href=u):console.warn("Opening link blocked as opener could not be cleared")}var l=function(){function g(u,p,_){u===void 0&&(u=H),p===void 0&&(p={}),_===void 0&&(_=!1),this._handler=u,this._options=p,this._useLinkProvider=_,this._options.matchIndex=1}return g.prototype.activate=function(u){this._terminal=u,this._useLinkProvider&&"registerLinkProvider"in this._terminal?this._linkProvider=this._terminal.registerLinkProvider(new z.WebLinkProvider(this._terminal,M,this._handler)):this._linkMatcherId=this._terminal.registerLinkMatcher(M,this._handler,this._options)},g.prototype.dispose=function(){var u;this._linkMatcherId!==void 0&&this._terminal!==void 0&&this._terminal.deregisterLinkMatcher(this._linkMatcherId),(u=this._linkProvider)===null||u===void 0||u.dispose()},g}();K.WebLinksAddon=l},function(J,K,Z){"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.LinkComputer=K.WebLinkProvider=void 0;var z=function(){function H(l,g,u){this._terminal=l,this._regex=g,this._handler=u}return H.prototype.provideLinks=function(l,g){g(M.computeLink(l,this._regex,this._terminal,this._handler))},H}();K.WebLinkProvider=z;var M=function(){function H(){}return H.computeLink=function(l,g,u,p){for(var _,f=new RegExp(g.source,(g.flags||"")+"g"),E=H._translateBufferLineToStringWithWrap(l-1,!1,u),v=E[0],o=E[1],c=-1,n=[];(_=f.exec(v))!==null;){var t=_[1];if(!t){console.log("match found without corresponding matchIndex");break}if(c=v.indexOf(t,c+1),f.lastIndex=c+t.length,c<0)break;for(var r=c+t.length,e=o+1;r>u.cols;)r-=u.cols,e++;var i={start:{x:c+1,y:o+1},end:{x:r,y:e}};n.push({range:i,text:t,activate:p})}return n},H._translateBufferLineToStringWithWrap=function(l,g,u){var p,_,f="";do{if(!(v=u.buffer.active.getLine(l)))break;v.isWrapped&&l--,_=v.isWrapped}while(_);var E=l;do{var v,o=u.buffer.active.getLine(l+1);if(p=!!o&&o.isWrapped,!(v=u.buffer.active.getLine(l)))break;f+=v.translateToString(!p&&g).substring(0,u.cols),l++}while(p);return[f,E]},H}();K.LinkComputer=M}])})},18701:function(ie){(function(J,K){if(!0)ie.exports=K();else var Z,z})(self,function(){return function(){"use strict";var J={4567:function(H,l,g){var u,p=this&&this.__extends||(u=function(e,i){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(s[h]=a[h])})(e,i)},function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=r}u(r,e),r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.AccessibilityManager=void 0;var _=g(9042),f=g(6114),E=g(6193),v=g(3656),o=g(844),c=g(5596),n=g(9631),t=function(r){function e(i,s){var a=r.call(this)||this;a._terminal=i,a._renderService=s,a._liveRegionLineCount=0,a._charsToConsume=[],a._charsToAnnounce="",a._accessibilityTreeRoot=document.createElement("div"),a._accessibilityTreeRoot.classList.add("xterm-accessibility"),a._rowContainer=document.createElement("div"),a._rowContainer.setAttribute("role","list"),a._rowContainer.classList.add("xterm-accessibility-tree"),a._rowElements=[];for(var h=0;h<a._terminal.rows;h++)a._rowElements[h]=a._createAccessibilityTreeNode(),a._rowContainer.appendChild(a._rowElements[h]);if(a._topBoundaryFocusListener=function(d){return a._onBoundaryFocus(d,0)},a._bottomBoundaryFocusListener=function(d){return a._onBoundaryFocus(d,1)},a._rowElements[0].addEventListener("focus",a._topBoundaryFocusListener),a._rowElements[a._rowElements.length-1].addEventListener("focus",a._bottomBoundaryFocusListener),a._refreshRowsDimensions(),a._accessibilityTreeRoot.appendChild(a._rowContainer),a._renderRowsDebouncer=new E.RenderDebouncer(a._renderRows.bind(a)),a._refreshRows(),a._liveRegion=document.createElement("div"),a._liveRegion.classList.add("live-region"),a._liveRegion.setAttribute("aria-live","assertive"),a._accessibilityTreeRoot.appendChild(a._liveRegion),!a._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return a._terminal.element.insertAdjacentElement("afterbegin",a._accessibilityTreeRoot),a.register(a._renderRowsDebouncer),a.register(a._terminal.onResize(function(d){return a._onResize(d.rows)})),a.register(a._terminal.onRender(function(d){return a._refreshRows(d.start,d.end)})),a.register(a._terminal.onScroll(function(){return a._refreshRows()})),a.register(a._terminal.onA11yChar(function(d){return a._onChar(d)})),a.register(a._terminal.onLineFeed(function(){return a._onChar(`
`)})),a.register(a._terminal.onA11yTab(function(d){return a._onTab(d)})),a.register(a._terminal.onKey(function(d){return a._onKey(d.key)})),a.register(a._terminal.onBlur(function(){return a._clearLiveRegion()})),a.register(a._renderService.onDimensionsChange(function(){return a._refreshRowsDimensions()})),a._screenDprMonitor=new c.ScreenDprMonitor,a.register(a._screenDprMonitor),a._screenDprMonitor.setListener(function(){return a._refreshRowsDimensions()}),a.register(v.addDisposableDomListener(window,"resize",function(){return a._refreshRowsDimensions()})),a}return p(e,r),e.prototype.dispose=function(){r.prototype.dispose.call(this),n.removeElementFromParent(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(i,s){var a=i.target,h=this._rowElements[s===0?1:this._rowElements.length-2];if(a.getAttribute("aria-posinset")!==(s===0?"1":""+this._terminal.buffer.lines.length)&&i.relatedTarget===h){var d,m;if(s===0?(d=a,m=this._rowElements.pop(),this._rowContainer.removeChild(m)):(d=this._rowElements.shift(),m=a,this._rowContainer.removeChild(d)),d.removeEventListener("focus",this._topBoundaryFocusListener),m.removeEventListener("focus",this._bottomBoundaryFocusListener),s===0){var y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else y=this._createAccessibilityTreeNode(),this._rowElements.push(y),this._rowContainer.appendChild(y);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(s===0?-1:1),this._rowElements[s===0?1:this._rowElements.length-2].focus(),i.preventDefault(),i.stopImmediatePropagation()}},e.prototype._onResize=function(i){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var s=this._rowContainer.children.length;s<this._terminal.rows;s++)this._rowElements[s]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[s]);for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var i=document.createElement("div");return i.setAttribute("role","listitem"),i.tabIndex=-1,this._refreshRowDimensions(i),i},e.prototype._onTab=function(i){for(var s=0;s<i;s++)this._onChar(" ")},e.prototype._onChar=function(i){var s=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==i&&(this._charsToAnnounce+=i):this._charsToAnnounce+=i,i===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=_.tooMuchOutput)),f.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){s._accessibilityTreeRoot.appendChild(s._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,f.isMac&&n.removeElementFromParent(this._liveRegion)},e.prototype._onKey=function(i){this._clearLiveRegion(),this._charsToConsume.push(i)},e.prototype._refreshRows=function(i,s){this._renderRowsDebouncer.refresh(i,s,this._terminal.rows)},e.prototype._renderRows=function(i,s){for(var a=this._terminal.buffer,h=a.lines.length.toString(),d=i;d<=s;d++){var m=a.translateBufferLineToString(a.ydisp+d,!0),y=(a.ydisp+d+1).toString(),S=this._rowElements[d];S&&(m.length===0?S.innerText="\xA0":S.textContent=m,S.setAttribute("aria-posinset",y),S.setAttribute("aria-setsize",h))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var i=0;i<this._terminal.rows;i++)this._refreshRowDimensions(this._rowElements[i])}},e.prototype._refreshRowDimensions=function(i){i.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(o.Disposable);l.AccessibilityManager=t},3614:function(H,l){function g(f){return f.replace(/\r?\n/g,"\r")}function u(f,E){return E?"[200~"+f+"[201~":f}function p(f,E,v){f=u(f=g(f),v.decPrivateModes.bracketedPasteMode),v.triggerDataEvent(f,!0),E.value=""}function _(f,E,v){var o=v.getBoundingClientRect(),c=f.clientX-o.left-10,n=f.clientY-o.top-10;E.style.width="20px",E.style.height="20px",E.style.left=c+"px",E.style.top=n+"px",E.style.zIndex="1000",E.focus()}Object.defineProperty(l,"__esModule",{value:!0}),l.rightClickHandler=l.moveTextAreaUnderMouseCursor=l.paste=l.handlePasteEvent=l.copyHandler=l.bracketTextForPaste=l.prepareTextForTerminal=void 0,l.prepareTextForTerminal=g,l.bracketTextForPaste=u,l.copyHandler=function(f,E){f.clipboardData&&f.clipboardData.setData("text/plain",E.selectionText),f.preventDefault()},l.handlePasteEvent=function(f,E,v){f.stopPropagation(),f.clipboardData&&p(f.clipboardData.getData("text/plain"),E,v)},l.paste=p,l.moveTextAreaUnderMouseCursor=_,l.rightClickHandler=function(f,E,v,o,c){_(f,E,v),c&&o.rightClickSelect(f),E.value=o.selectionText,E.select()}},4774:function(H,l){var g,u,p,_;function f(v){var o=v.toString(16);return o.length<2?"0"+o:o}function E(v,o){return v<o?(o+.05)/(v+.05):(v+.05)/(o+.05)}Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=void 0,function(v){v.toCss=function(o,c,n,t){return t!==void 0?"#"+f(o)+f(c)+f(n)+f(t):"#"+f(o)+f(c)+f(n)},v.toRgba=function(o,c,n,t){return t===void 0&&(t=255),(o<<24|c<<16|n<<8|t)>>>0}}(g=l.channels||(l.channels={})),(u=l.color||(l.color={})).blend=function(v,o){var c=(255&o.rgba)/255;if(c===1)return{css:o.css,rgba:o.rgba};var n=o.rgba>>24&255,t=o.rgba>>16&255,r=o.rgba>>8&255,e=v.rgba>>24&255,i=v.rgba>>16&255,s=v.rgba>>8&255,a=e+Math.round((n-e)*c),h=i+Math.round((t-i)*c),d=s+Math.round((r-s)*c);return{css:g.toCss(a,h,d),rgba:g.toRgba(a,h,d)}},u.isOpaque=function(v){return(255&v.rgba)==255},u.ensureContrastRatio=function(v,o,c){var n=_.ensureContrastRatio(v.rgba,o.rgba,c);if(n)return _.toColor(n>>24&255,n>>16&255,n>>8&255)},u.opaque=function(v){var o=(255|v.rgba)>>>0,c=_.toChannels(o),n=c[0],t=c[1],r=c[2];return{css:g.toCss(n,t,r),rgba:o}},u.opacity=function(v,o){var c=Math.round(255*o),n=_.toChannels(v.rgba),t=n[0],r=n[1],e=n[2];return{css:g.toCss(t,r,e,c),rgba:g.toRgba(t,r,e,c)}},(l.css||(l.css={})).toColor=function(v){switch(v.length){case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(v){function o(c,n,t){var r=c/255,e=n/255,i=t/255;return .2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}v.relativeLuminance=function(c){return o(c>>16&255,c>>8&255,255&c)},v.relativeLuminance2=o}(p=l.rgb||(l.rgb={})),function(v){function o(n,t,r){for(var e=n>>24&255,i=n>>16&255,s=n>>8&255,a=t>>24&255,h=t>>16&255,d=t>>8&255,m=E(p.relativeLuminance2(a,d,h),p.relativeLuminance2(e,i,s));m<r&&(a>0||h>0||d>0);)a-=Math.max(0,Math.ceil(.1*a)),h-=Math.max(0,Math.ceil(.1*h)),d-=Math.max(0,Math.ceil(.1*d)),m=E(p.relativeLuminance2(a,d,h),p.relativeLuminance2(e,i,s));return(a<<24|h<<16|d<<8|255)>>>0}function c(n,t,r){for(var e=n>>24&255,i=n>>16&255,s=n>>8&255,a=t>>24&255,h=t>>16&255,d=t>>8&255,m=E(p.relativeLuminance2(a,d,h),p.relativeLuminance2(e,i,s));m<r&&(a<255||h<255||d<255);)a=Math.min(255,a+Math.ceil(.1*(255-a))),h=Math.min(255,h+Math.ceil(.1*(255-h))),d=Math.min(255,d+Math.ceil(.1*(255-d))),m=E(p.relativeLuminance2(a,d,h),p.relativeLuminance2(e,i,s));return(a<<24|h<<16|d<<8|255)>>>0}v.ensureContrastRatio=function(n,t,r){var e=p.relativeLuminance(n>>8),i=p.relativeLuminance(t>>8);if(E(e,i)<r)return i<e?o(n,t,r):c(n,t,r)},v.reduceLuminance=o,v.increaseLuminance=c,v.toChannels=function(n){return[n>>24&255,n>>16&255,n>>8&255,255&n]},v.toColor=function(n,t,r){return{css:g.toCss(n,t,r),rgba:g.toRgba(n,t,r)}}}(_=l.rgba||(l.rgba={})),l.toPaddedHex=f,l.contrastRatio=E},7239:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.ColorContrastCache=void 0;var g=function(){function u(){this._color={},this._rgba={}}return u.prototype.clear=function(){this._color={},this._rgba={}},u.prototype.setCss=function(p,_,f){this._rgba[p]||(this._rgba[p]={}),this._rgba[p][_]=f},u.prototype.getCss=function(p,_){return this._rgba[p]?this._rgba[p][_]:void 0},u.prototype.setColor=function(p,_,f){this._color[p]||(this._color[p]={}),this._color[p][_]=f},u.prototype.getColor=function(p,_){return this._color[p]?this._color[p][_]:void 0},u}();l.ColorContrastCache=g},5680:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.ColorManager=l.DEFAULT_ANSI_COLORS=void 0;var u=g(4774),p=g(7239),_=u.css.toColor("#ffffff"),f=u.css.toColor("#000000"),E=u.css.toColor("#ffffff"),v=u.css.toColor("#000000"),o={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};l.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var n=[u.css.toColor("#2e3436"),u.css.toColor("#cc0000"),u.css.toColor("#4e9a06"),u.css.toColor("#c4a000"),u.css.toColor("#3465a4"),u.css.toColor("#75507b"),u.css.toColor("#06989a"),u.css.toColor("#d3d7cf"),u.css.toColor("#555753"),u.css.toColor("#ef2929"),u.css.toColor("#8ae234"),u.css.toColor("#fce94f"),u.css.toColor("#729fcf"),u.css.toColor("#ad7fa8"),u.css.toColor("#34e2e2"),u.css.toColor("#eeeeec")],t=[0,95,135,175,215,255],r=0;r<216;r++){var e=t[r/36%6|0],i=t[r/6%6|0],s=t[r%6];n.push({css:u.channels.toCss(e,i,s),rgba:u.channels.toRgba(e,i,s)})}for(r=0;r<24;r++){var a=8+10*r;n.push({css:u.channels.toCss(a,a,a),rgba:u.channels.toRgba(a,a,a)})}return n}());var c=function(){function n(t,r){this.allowTransparency=r;var e=t.createElement("canvas");e.width=1,e.height=1;var i=e.getContext("2d");if(!i)throw new Error("Could not get rendering context");this._ctx=i,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new p.ColorContrastCache,this.colors={foreground:_,background:f,cursor:E,cursorAccent:v,selectionTransparent:o,selectionOpaque:u.color.blend(f,o),ansi:l.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return n.prototype.onOptionsChange=function(t){t==="minimumContrastRatio"&&this._contrastCache.clear()},n.prototype.setTheme=function(t){t===void 0&&(t={}),this.colors.foreground=this._parseColor(t.foreground,_),this.colors.background=this._parseColor(t.background,f),this.colors.cursor=this._parseColor(t.cursor,E,!0),this.colors.cursorAccent=this._parseColor(t.cursorAccent,v,!0),this.colors.selectionTransparent=this._parseColor(t.selection,o,!0),this.colors.selectionOpaque=u.color.blend(this.colors.background,this.colors.selectionTransparent),u.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=u.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(t.black,l.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(t.red,l.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(t.green,l.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(t.yellow,l.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(t.blue,l.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(t.magenta,l.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(t.cyan,l.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(t.white,l.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(t.brightBlack,l.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(t.brightRed,l.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(t.brightGreen,l.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(t.brightYellow,l.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(t.brightBlue,l.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(t.brightMagenta,l.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(t.brightCyan,l.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(t.brightWhite,l.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},n.prototype._parseColor=function(t,r,e){if(e===void 0&&(e=this.allowTransparency),t===void 0)return r;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=t,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+t+" is invalid using fallback "+r.css),r;this._ctx.fillRect(0,0,1,1);var i=this._ctx.getImageData(0,0,1,1).data;if(i[3]!==255){if(!e)return console.warn("Color: "+t+" is using transparency, but allowTransparency is false. Using fallback "+r.css+"."),r;var s=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(S){return Number(S)}),a=s[0],h=s[1],d=s[2],m=s[3],y=Math.round(255*m);return{rgba:u.channels.toRgba(a,h,d,y),css:t}}return{css:this._ctx.fillStyle,rgba:u.channels.toRgba(i[0],i[1],i[2],i[3])}},n}();l.ColorManager=c},9631:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.removeElementFromParent=void 0,l.removeElementFromParent=function(){for(var g,u=[],p=0;p<arguments.length;p++)u[p]=arguments[p];for(var _=0,f=u;_<f.length;_++){var E=f[_];(g=E==null?void 0:E.parentElement)===null||g===void 0||g.removeChild(E)}}},3656:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(g,u,p,_){g.addEventListener(u,p,_);var f=!1;return{dispose:function(){f||(f=!0,g.removeEventListener(u,p,_))}}}},3551:function(H,l,g){var u=this&&this.__decorate||function(o,c,n,t){var r,e=arguments.length,i=e<3?c:t===null?t=Object.getOwnPropertyDescriptor(c,n):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,c,n,t);else for(var s=o.length-1;s>=0;s--)(r=o[s])&&(i=(e<3?r(i):e>3?r(c,n,i):r(c,n))||i);return e>3&&i&&Object.defineProperty(c,n,i),i},p=this&&this.__param||function(o,c){return function(n,t){c(n,t,o)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseZone=l.Linkifier=void 0;var _=g(8460),f=g(2585),E=function(){function o(c,n,t){this._bufferService=c,this._logService=n,this._unicodeService=t,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new _.EventEmitter,this._onHideLinkUnderline=new _.EventEmitter,this._onLinkTooltip=new _.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(o.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),o.prototype.attachToDom=function(c,n){this._element=c,this._mouseZoneManager=n},o.prototype.linkifyRows=function(c,n){var t=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=c,this._rowsToLinkify.end=n):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,c),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,n)),this._mouseZoneManager.clearAll(c,n),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return t._linkifyRows()},o._timeBeforeLatency))},o.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var c=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var n=c.ydisp+this._rowsToLinkify.start;if(!(n>=c.lines.length)){for(var t=c.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,r=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,n,t,r,r);e.hasNext();)for(var i=e.next(),s=0;s<this._linkMatchers.length;s++)this._doLinkifyRow(i.range.first,i.content,this._linkMatchers[s]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},o.prototype.registerLinkMatcher=function(c,n,t){if(t===void 0&&(t={}),!n)throw new Error("handler must be defined");var r={id:this._nextLinkMatcherId++,regex:c,handler:n,matchIndex:t.matchIndex,validationCallback:t.validationCallback,hoverTooltipCallback:t.tooltipCallback,hoverLeaveCallback:t.leaveCallback,willLinkActivate:t.willLinkActivate,priority:t.priority||0};return this._addLinkMatcherToList(r),r.id},o.prototype._addLinkMatcherToList=function(c){if(this._linkMatchers.length!==0){for(var n=this._linkMatchers.length-1;n>=0;n--)if(c.priority<=this._linkMatchers[n].priority)return void this._linkMatchers.splice(n+1,0,c);this._linkMatchers.splice(0,0,c)}else this._linkMatchers.push(c)},o.prototype.deregisterLinkMatcher=function(c){for(var n=0;n<this._linkMatchers.length;n++)if(this._linkMatchers[n].id===c)return this._linkMatchers.splice(n,1),!0;return!1},o.prototype._doLinkifyRow=function(c,n,t){for(var r,e=this,i=new RegExp(t.regex.source,(t.regex.flags||"")+"g"),s=-1,a=function(){var m=r[typeof t.matchIndex!="number"?0:t.matchIndex];if(!m)return h._logService.debug("match found without corresponding matchIndex",r,t),"break";if(s=n.indexOf(m,s+1),i.lastIndex=s+m.length,s<0)return"break";var y=h._bufferService.buffer.stringIndexToBufferIndex(c,s);if(y[0]<0)return"break";var S=h._bufferService.buffer.lines.get(y[0]);if(!S)return"break";var C=S.getFg(y[1]),A=C?C>>9&511:void 0;t.validationCallback?t.validationCallback(m,function(L){e._rowsTimeoutId||L&&e._addLink(y[1],y[0]-e._bufferService.buffer.ydisp,m,t,A)}):h._addLink(y[1],y[0]-h._bufferService.buffer.ydisp,m,t,A)},h=this;(r=i.exec(n))!==null&&a()!=="break";);},o.prototype._addLink=function(c,n,t,r,e){var i=this;if(this._mouseZoneManager&&this._element){var s=this._unicodeService.getStringCellWidth(t),a=c%this._bufferService.cols,h=n+Math.floor(c/this._bufferService.cols),d=(a+s)%this._bufferService.cols,m=h+Math.floor((a+s)/this._bufferService.cols);d===0&&(d=this._bufferService.cols,m--),this._mouseZoneManager.add(new v(a+1,h+1,d+1,m+1,function(y){if(r.handler)return r.handler(y,t);var S=window.open();S?(S.opener=null,S.location.href=t):console.warn("Opening link blocked as opener could not be cleared")},function(){i._onShowLinkUnderline.fire(i._createLinkHoverEvent(a,h,d,m,e)),i._element.classList.add("xterm-cursor-pointer")},function(y){i._onLinkTooltip.fire(i._createLinkHoverEvent(a,h,d,m,e)),r.hoverTooltipCallback&&r.hoverTooltipCallback(y,t,{start:{x:a,y:h},end:{x:d,y:m}})},function(){i._onHideLinkUnderline.fire(i._createLinkHoverEvent(a,h,d,m,e)),i._element.classList.remove("xterm-cursor-pointer"),r.hoverLeaveCallback&&r.hoverLeaveCallback()},function(y){return!r.willLinkActivate||r.willLinkActivate(y,t)}))}},o.prototype._createLinkHoverEvent=function(c,n,t,r,e){return{x1:c,y1:n,x2:t,y2:r,cols:this._bufferService.cols,fg:e}},o._timeBeforeLatency=200,o=u([p(0,f.IBufferService),p(1,f.ILogService),p(2,f.IUnicodeService)],o)}();l.Linkifier=E;var v=function(c,n,t,r,e,i,s,a,h){this.x1=c,this.y1=n,this.x2=t,this.y2=r,this.clickCallback=e,this.hoverCallback=i,this.tooltipCallback=s,this.leaveCallback=a,this.willLinkActivate=h};l.MouseZone=v},6465:function(H,l,g){var u,p=this&&this.__extends||(u=function(r,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])})(r,e)},function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}u(t,r),t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),_=this&&this.__decorate||function(t,r,e,i){var s,a=arguments.length,h=a<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(t,r,e,i);else for(var d=t.length-1;d>=0;d--)(s=t[d])&&(h=(a<3?s(h):a>3?s(r,e,h):s(r,e))||h);return a>3&&h&&Object.defineProperty(r,e,h),h},f=this&&this.__param||function(t,r){return function(e,i){r(e,i,t)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Linkifier2=void 0;var E=g(2585),v=g(8460),o=g(844),c=g(3656),n=function(t){function r(e){var i=t.call(this)||this;return i._bufferService=e,i._linkProviders=[],i._linkCacheDisposables=[],i._isMouseOut=!0,i._activeLine=-1,i._onShowLinkUnderline=i.register(new v.EventEmitter),i._onHideLinkUnderline=i.register(new v.EventEmitter),i.register(o.getDisposeArrayDisposable(i._linkCacheDisposables)),i}return p(r,t),Object.defineProperty(r.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),r.prototype.registerLinkProvider=function(e){var i=this;return this._linkProviders.push(e),{dispose:function(){var a=i._linkProviders.indexOf(e);a!==-1&&i._linkProviders.splice(a,1)}}},r.prototype.attachToDom=function(e,i,s){var a=this;this._element=e,this._mouseService=i,this._renderService=s,this.register(c.addDisposableDomListener(this._element,"mouseleave",function(){a._isMouseOut=!0,a._clearCurrentLink()})),this.register(c.addDisposableDomListener(this._element,"mousemove",this._onMouseMove.bind(this))),this.register(c.addDisposableDomListener(this._element,"click",this._onClick.bind(this)))},r.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var i=this._positionFromMouseEvent(e,this._element,this._mouseService);if(i){this._isMouseOut=!1;for(var s=e.composedPath(),a=0;a<s.length;a++){var h=s[a];if(h.classList.contains("xterm"))break;if(h.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._onHover(i),this._lastBufferCell=i)}}},r.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},r.prototype._askForLink=function(e,i){var s,a=this;this._activeProviderReplies&&i||((s=this._activeProviderReplies)===null||s===void 0||s.forEach(function(d){d==null||d.forEach(function(m){m.link.dispose&&m.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);var h=!1;this._linkProviders.forEach(function(d,m){var y;i?((y=a._activeProviderReplies)===null||y===void 0?void 0:y.get(m))&&(h=a._checkLinkProviderResult(m,e,h)):d.provideLinks(e.y,function(S){var C,A;if(!a._isMouseOut){var L=S==null?void 0:S.map(function(x){return{link:x}});(C=a._activeProviderReplies)===null||C===void 0||C.set(m,L),h=a._checkLinkProviderResult(m,e,h),((A=a._activeProviderReplies)===null||A===void 0?void 0:A.size)===a._linkProviders.length&&a._removeIntersectingLinks(e.y,a._activeProviderReplies)}})})},r.prototype._removeIntersectingLinks=function(e,i){for(var s=new Set,a=0;a<i.size;a++){var h=i.get(a);if(h)for(var d=0;d<h.length;d++)for(var m=h[d],y=m.link.range.start.y<e?0:m.link.range.start.x,S=m.link.range.end.y>e?this._bufferService.cols:m.link.range.end.x,C=y;C<=S;C++){if(s.has(C)){h.splice(d--,1);break}s.add(C)}}},r.prototype._checkLinkProviderResult=function(e,i,s){var a,h=this;if(!this._activeProviderReplies)return s;for(var d=this._activeProviderReplies.get(e),m=!1,y=0;y<e;y++)this._activeProviderReplies.has(y)&&!this._activeProviderReplies.get(y)||(m=!0);if(!m&&d){var S=d.find(function(A){return h._linkAtPosition(A.link,i)});S&&(s=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!s)for(y=0;y<this._activeProviderReplies.size;y++){var C=(a=this._activeProviderReplies.get(y))===null||a===void 0?void 0:a.find(function(A){return h._linkAtPosition(A.link,i)});if(C){s=!0,this._handleNewLink(C);break}}return s},r.prototype._onClick=function(e){if(this._element&&this._mouseService&&this._currentLink){var i=this._positionFromMouseEvent(e,this._element,this._mouseService);i&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},r.prototype._clearCurrentLink=function(e,i){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!i||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,o.disposeArray(this._linkCacheDisposables))},r.prototype._handleNewLink=function(e){var i=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._linkAtPosition(e.link,s)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var h,d;return(d=(h=i._currentLink)===null||h===void 0?void 0:h.state)===null||d===void 0?void 0:d.decorations.pointerCursor},set:function(h){var d,m;((d=i._currentLink)===null||d===void 0?void 0:d.state)&&i._currentLink.state.decorations.pointerCursor!==h&&(i._currentLink.state.decorations.pointerCursor=h,i._currentLink.state.isHovered&&((m=i._element)===null||m===void 0||m.classList.toggle("xterm-cursor-pointer",h)))}},underline:{get:function(){var h,d;return(d=(h=i._currentLink)===null||h===void 0?void 0:h.state)===null||d===void 0?void 0:d.decorations.underline},set:function(h){var d,m,y;((d=i._currentLink)===null||d===void 0?void 0:d.state)&&((y=(m=i._currentLink)===null||m===void 0?void 0:m.state)===null||y===void 0?void 0:y.decorations.underline)!==h&&(i._currentLink.state.decorations.underline=h,i._currentLink.state.isHovered&&i._fireUnderlineEvent(e.link,h))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(a){var h=a.start===0?0:a.start+1+i._bufferService.buffer.ydisp;i._clearCurrentLink(h,a.end+1+i._bufferService.buffer.ydisp)})))}},r.prototype._linkHover=function(e,i,s){var a;((a=this._currentLink)===null||a===void 0?void 0:a.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(s,i.text)},r.prototype._fireUnderlineEvent=function(e,i){var s=e.range,a=this._bufferService.buffer.ydisp,h=this._createLinkUnderlineEvent(s.start.x-1,s.start.y-a-1,s.end.x,s.end.y-a-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(h)},r.prototype._linkLeave=function(e,i,s){var a;((a=this._currentLink)===null||a===void 0?void 0:a.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(s,i.text)},r.prototype._linkAtPosition=function(e,i){var s=e.range.start.y===e.range.end.y,a=e.range.start.y<i.y,h=e.range.end.y>i.y;return(s&&e.range.start.x<=i.x&&e.range.end.x>=i.x||a&&e.range.end.x>=i.x||h&&e.range.start.x<=i.x||a&&h)&&e.range.start.y<=i.y&&e.range.end.y>=i.y},r.prototype._positionFromMouseEvent=function(e,i,s){var a=s.getCoords(e,i,this._bufferService.cols,this._bufferService.rows);if(a)return{x:a[0],y:a[1]+this._bufferService.buffer.ydisp}},r.prototype._createLinkUnderlineEvent=function(e,i,s,a,h){return{x1:e,y1:i,x2:s,y2:a,cols:this._bufferService.cols,fg:h}},_([f(0,E.IBufferService)],r)}(o.Disposable);l.Linkifier2=n},9042:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.tooMuchOutput=l.promptLabel=void 0,l.promptLabel="Terminal input",l.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(H,l,g){var u,p=this&&this.__extends||(u=function(r,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])})(r,e)},function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}u(t,r),t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),_=this&&this.__decorate||function(t,r,e,i){var s,a=arguments.length,h=a<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(t,r,e,i);else for(var d=t.length-1;d>=0;d--)(s=t[d])&&(h=(a<3?s(h):a>3?s(r,e,h):s(r,e))||h);return a>3&&h&&Object.defineProperty(r,e,h),h},f=this&&this.__param||function(t,r){return function(e,i){r(e,i,t)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseZoneManager=void 0;var E=g(844),v=g(3656),o=g(4725),c=g(2585),n=function(t){function r(e,i,s,a,h,d){var m=t.call(this)||this;return m._element=e,m._screenElement=i,m._bufferService=s,m._mouseService=a,m._selectionService=h,m._optionsService=d,m._zones=[],m._areZonesActive=!1,m._lastHoverCoords=[void 0,void 0],m._initialSelectionLength=0,m.register(v.addDisposableDomListener(m._element,"mousedown",function(y){return m._onMouseDown(y)})),m._mouseMoveListener=function(y){return m._onMouseMove(y)},m._mouseLeaveListener=function(y){return m._onMouseLeave(y)},m._clickListener=function(y){return m._onClick(y)},m}return p(r,t),r.prototype.dispose=function(){t.prototype.dispose.call(this),this._deactivate()},r.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},r.prototype.clearAll=function(e,i){if(this._zones.length!==0){e&&i||(e=0,i=this._bufferService.rows-1);for(var s=0;s<this._zones.length;s++){var a=this._zones[s];(a.y1>e&&a.y1<=i+1||a.y2>e&&a.y2<=i+1||a.y1<e&&a.y2>i+1)&&(this._currentZone&&this._currentZone===a&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(s--,1))}this._zones.length===0&&this._deactivate()}},r.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},r.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},r.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},r.prototype._onHover=function(e){var i=this,s=this._findZoneEventAt(e);s!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),s&&(this._currentZone=s,s.hoverCallback&&s.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return i._onTooltip(e)},this._optionsService.options.linkTooltipHoverDuration)))},r.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var i=this._findZoneEventAt(e);i==null||i.tooltipCallback(e)},r.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var i=this._findZoneEventAt(e);(i==null?void 0:i.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},r.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},r.prototype._onClick=function(e){var i=this._findZoneEventAt(e),s=this._getSelectionLength();i&&s===this._initialSelectionLength&&(i.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},r.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},r.prototype._findZoneEventAt=function(e){var i=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(i)for(var s=i[0],a=i[1],h=0;h<this._zones.length;h++){var d=this._zones[h];if(d.y1===d.y2){if(a===d.y1&&s>=d.x1&&s<d.x2)return d}else if(a===d.y1&&s>=d.x1||a===d.y2&&s<d.x2||a>d.y1&&a<d.y2)return d}},_([f(2,c.IBufferService),f(3,o.IMouseService),f(4,o.ISelectionService),f(5,c.IOptionsService)],r)}(E.Disposable);l.MouseZoneManager=n},6193:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.RenderDebouncer=void 0;var g=function(){function u(p){this._renderCallback=p}return u.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},u.prototype.refresh=function(p,_,f){var E=this;this._rowCount=f,p=p!==void 0?p:0,_=_!==void 0?_:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,p):p,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,_):_,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return E._innerRefresh()}))},u.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var p=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(p,_)}},u}();l.RenderDebouncer=g},5596:function(H,l,g){var u,p=this&&this.__extends||(u=function(E,v){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var n in c)Object.prototype.hasOwnProperty.call(c,n)&&(o[n]=c[n])})(E,v)},function(f,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function v(){this.constructor=f}u(f,E),f.prototype=E===null?Object.create(E):(v.prototype=E.prototype,new v)});Object.defineProperty(l,"__esModule",{value:!0}),l.ScreenDprMonitor=void 0;var _=function(f){function E(){var v=f!==null&&f.apply(this,arguments)||this;return v._currentDevicePixelRatio=window.devicePixelRatio,v}return p(E,f),E.prototype.setListener=function(v){var o=this;this._listener&&this.clearListener(),this._listener=v,this._outerListener=function(){o._listener&&(o._listener(window.devicePixelRatio,o._currentDevicePixelRatio),o._updateDpr())},this._updateDpr()},E.prototype.dispose=function(){f.prototype.dispose.call(this),this.clearListener()},E.prototype._updateDpr=function(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},E.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},E}(g(844).Disposable);l.ScreenDprMonitor=_},3236:function(H,l,g){var u,p=this&&this.__extends||(u=function(k,O){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,I){T.__proto__=I}||function(T,I){for(var P in I)Object.prototype.hasOwnProperty.call(I,P)&&(T[P]=I[P])})(k,O)},function(V,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}u(V,k),V.prototype=k===null?Object.create(k):(O.prototype=k.prototype,new O)});Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;var _=g(2950),f=g(1680),E=g(3614),v=g(2584),o=g(5435),c=g(3525),n=g(3551),t=g(9312),r=g(6114),e=g(3656),i=g(9042),s=g(357),a=g(6954),h=g(4567),d=g(1296),m=g(7399),y=g(8460),S=g(8437),C=g(5680),A=g(3230),L=g(4725),x=g(428),w=g(8934),b=g(6465),D=g(5114),R=g(8969),j=g(4774),B=g(4269),F=typeof window!="undefined"?window.document:null,N=function(V){function k(O){O===void 0&&(O={});var T=V.call(this,O)||this;return T.browser=r,T._keyDownHandled=!1,T._onCursorMove=new y.EventEmitter,T._onKey=new y.EventEmitter,T._onRender=new y.EventEmitter,T._onSelectionChange=new y.EventEmitter,T._onTitleChange=new y.EventEmitter,T._onBell=new y.EventEmitter,T._onFocus=new y.EventEmitter,T._onBlur=new y.EventEmitter,T._onA11yCharEmitter=new y.EventEmitter,T._onA11yTabEmitter=new y.EventEmitter,T._setup(),T.linkifier=T._instantiationService.createInstance(n.Linkifier),T.linkifier2=T.register(T._instantiationService.createInstance(b.Linkifier2)),T.register(T._inputHandler.onRequestBell(function(){return T.bell()})),T.register(T._inputHandler.onRequestRefreshRows(function(I,P){return T.refresh(I,P)})),T.register(T._inputHandler.onRequestReset(function(){return T.reset()})),T.register(T._inputHandler.onRequestWindowsOptionsReport(function(I){return T._reportWindowsOptions(I)})),T.register(T._inputHandler.onAnsiColorChange(function(I){return T._changeAnsiColor(I)})),T.register(y.forwardEvent(T._inputHandler.onCursorMove,T._onCursorMove)),T.register(y.forwardEvent(T._inputHandler.onTitleChange,T._onTitleChange)),T.register(y.forwardEvent(T._inputHandler.onA11yChar,T._onA11yCharEmitter)),T.register(y.forwardEvent(T._inputHandler.onA11yTab,T._onA11yTabEmitter)),T.register(T._bufferService.onResize(function(I){return T._afterResize(I.cols,I.rows)})),T}return p(k,V),Object.defineProperty(k.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),k.prototype._changeAnsiColor=function(O){var T,I;if(this._colorManager){for(var P=0,W=O.colors;P<W.length;P++){var U=W[P],Y=j.rgba.toColor(U.red,U.green,U.blue);this._colorManager.colors.ansi[U.colorIndex]=Y}(T=this._renderService)===null||T===void 0||T.setColors(this._colorManager.colors),(I=this.viewport)===null||I===void 0||I.onThemeChange(this._colorManager.colors)}},k.prototype.dispose=function(){var O,T,I;this._isDisposed||(V.prototype.dispose.call(this),(O=this._renderService)===null||O===void 0||O.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(I=(T=this.element)===null||T===void 0?void 0:T.parentNode)===null||I===void 0||I.removeChild(this.element))},k.prototype._setup=function(){V.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(k.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),k.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},k.prototype._updateOptions=function(O){var T,I,P,W;switch(V.prototype._updateOptions.call(this,O),O){case"fontFamily":case"fontSize":(T=this._renderService)===null||T===void 0||T.clear(),(I=this._charSizeService)===null||I===void 0||I.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(P=this.viewport)===null||P===void 0||P.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new h.AccessibilityManager(this,this._renderService)):((W=this._accessibilityManager)===null||W===void 0||W.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},k.prototype._onTextAreaFocus=function(O){this._coreService.decPrivateModes.sendFocus&&this._coreService.triggerDataEvent(v.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},k.prototype.blur=function(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()},k.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this._coreService.decPrivateModes.sendFocus&&this._coreService.triggerDataEvent(v.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},k.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var O=this.buffer.ybase+this.buffer.y,T=this.buffer.lines.get(O);if(T){var I=Math.min(this.buffer.x,this.cols-1),P=this._renderService.dimensions.actualCellHeight,W=T.getWidth(I),U=this._renderService.dimensions.actualCellWidth*W,Y=this.buffer.y*this._renderService.dimensions.actualCellHeight,$=I*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=$+"px",this.textarea.style.top=Y+"px",this.textarea.style.width=U+"px",this.textarea.style.height=P+"px",this.textarea.style.lineHeight=P+"px",this.textarea.style.zIndex="-5"}}},k.prototype._initGlobal=function(){var O=this;this._bindKeys(),this.register(e.addDisposableDomListener(this.element,"copy",function(I){O.hasSelection()&&E.copyHandler(I,O._selectionService)}));var T=function(P){return E.handlePasteEvent(P,O.textarea,O._coreService)};this.register(e.addDisposableDomListener(this.textarea,"paste",T)),this.register(e.addDisposableDomListener(this.element,"paste",T)),r.isFirefox?this.register(e.addDisposableDomListener(this.element,"mousedown",function(I){I.button===2&&E.rightClickHandler(I,O.textarea,O.screenElement,O._selectionService,O.options.rightClickSelectsWord)})):this.register(e.addDisposableDomListener(this.element,"contextmenu",function(I){E.rightClickHandler(I,O.textarea,O.screenElement,O._selectionService,O.options.rightClickSelectsWord)})),r.isLinux&&this.register(e.addDisposableDomListener(this.element,"auxclick",function(I){I.button===1&&E.moveTextAreaUnderMouseCursor(I,O.textarea,O.screenElement)}))},k.prototype._bindKeys=function(){var O=this;this.register(e.addDisposableDomListener(this.textarea,"keyup",function(T){return O._keyUp(T)},!0)),this.register(e.addDisposableDomListener(this.textarea,"keydown",function(T){return O._keyDown(T)},!0)),this.register(e.addDisposableDomListener(this.textarea,"keypress",function(T){return O._keyPress(T)},!0)),this.register(e.addDisposableDomListener(this.textarea,"compositionstart",function(){return O._compositionHelper.compositionstart()})),this.register(e.addDisposableDomListener(this.textarea,"compositionupdate",function(T){return O._compositionHelper.compositionupdate(T)})),this.register(e.addDisposableDomListener(this.textarea,"compositionend",function(){return O._compositionHelper.compositionend()})),this.register(this.onRender(function(){return O._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(T){return O._queueLinkification(T.start,T.end)}))},k.prototype.open=function(O){var T=this;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("role","document"),O.appendChild(this.element);var I=F.createDocumentFragment();this._viewportElement=F.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),I.appendChild(this._viewportElement),this._viewportScrollArea=F.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=F.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=F.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),I.appendChild(this.screenElement),this.textarea=F.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",i.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(e.addDisposableDomListener(this.textarea,"focus",function(U){return T._onTextAreaFocus(U)})),this.register(e.addDisposableDomListener(this.textarea,"blur",function(){return T._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var P=this._instantiationService.createInstance(D.CoreBrowserService,this.textarea);this._instantiationService.setService(L.ICoreBrowserService,P),this._charSizeService=this._instantiationService.createInstance(x.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new C.ColorManager(F,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(U){return T._colorManager.onOptionsChange(U)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(B.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService);var W=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(A.RenderService,W,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(U){return T._onRender.fire(U)})),this.onResize(function(U){return T._renderService.resize(U.cols,U.rows)}),this._compositionView=F.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(_.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(I),this._soundService=this._instantiationService.createInstance(s.SoundService),this._instantiationService.setService(L.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(w.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(f.Viewport,function(U){return T.scrollLines(U,!0,1)},this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return T.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){T._renderService.onCursorMove(),T._syncTextArea()})),this.register(this.onResize(function(){return T._renderService.onResize(T.cols,T.rows)})),this.register(this.onBlur(function(){return T._renderService.onBlur()})),this.register(this.onFocus(function(){return T._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return T.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(t.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(U){return T.scrollLines(U.amount,U.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return T._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(U){return T._renderService.onSelectionChanged(U.start,U.end,U.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(U){T.textarea.value=U,T.textarea.focus(),T.textarea.select()})),this.register(this._onScroll.event(function(U){T.viewport.syncScrollArea(),T._selectionService.refresh()})),this.register(e.addDisposableDomListener(this._viewportElement,"scroll",function(){return T._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(a.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return T._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService),this.register(e.addDisposableDomListener(this.element,"mousedown",function(U){return T._selectionService.onMouseDown(U)})),this._coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new h.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},k.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(c.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(d.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},k.prototype._setTheme=function(O){var T,I,P;this._theme=O,(T=this._colorManager)===null||T===void 0||T.setTheme(O),(I=this._renderService)===null||I===void 0||I.setColors(this._colorManager.colors),(P=this.viewport)===null||P===void 0||P.onThemeChange(this._colorManager.colors)},k.prototype.bindMouse=function(){var O=this,T=this,I=this.element;function P(q){var G,ee,re=T._mouseService.getRawByteCoords(q,T.screenElement,T.cols,T.rows);if(!re)return!1;switch(q.overrideType||q.type){case"mousemove":ee=32,q.buttons===void 0?(G=3,q.button!==void 0&&(G=q.button<3?q.button:3)):G=1&q.buttons?0:4&q.buttons?1:2&q.buttons?2:3;break;case"mouseup":ee=0,G=q.button<3?q.button:3;break;case"mousedown":ee=1,G=q.button<3?q.button:3;break;case"wheel":q.deltaY!==0&&(ee=q.deltaY<0?0:1),G=4;break;default:return!1}return!(ee===void 0||G===void 0||G>4)&&T._coreMouseService.triggerMouseEvent({col:re.x-33,row:re.y-33,button:G,action:ee,ctrl:q.ctrlKey,alt:q.altKey,shift:q.shiftKey})}var W={mouseup:null,wheel:null,mousedrag:null,mousemove:null},U=function(G){return P(G),G.buttons||(O._document.removeEventListener("mouseup",W.mouseup),W.mousedrag&&O._document.removeEventListener("mousemove",W.mousedrag)),O.cancel(G)},Y=function(G){return P(G),G.preventDefault(),O.cancel(G)},$=function(G){G.buttons&&P(G)},Q=function(G){G.buttons||P(G)};this.register(this._coreMouseService.onProtocolChange(function(q){q?(O.optionsService.options.logLevel==="debug"&&O._logService.debug("Binding to mouse events:",O._coreMouseService.explainEvents(q)),O.element.classList.add("enable-mouse-events"),O._selectionService.disable()):(O._logService.debug("Unbinding from mouse events."),O.element.classList.remove("enable-mouse-events"),O._selectionService.enable()),8&q?W.mousemove||(I.addEventListener("mousemove",Q),W.mousemove=Q):(I.removeEventListener("mousemove",W.mousemove),W.mousemove=null),16&q?W.wheel||(I.addEventListener("wheel",Y,{passive:!1}),W.wheel=Y):(I.removeEventListener("wheel",W.wheel),W.wheel=null),2&q?W.mouseup||(W.mouseup=U):(O._document.removeEventListener("mouseup",W.mouseup),W.mouseup=null),4&q?W.mousedrag||(W.mousedrag=$):(O._document.removeEventListener("mousemove",W.mousedrag),W.mousedrag=null)})),this._coreMouseService.activeProtocol=this._coreMouseService.activeProtocol,this.register(e.addDisposableDomListener(I,"mousedown",function(q){if(q.preventDefault(),O.focus(),O._coreMouseService.areMouseEventsActive&&!O._selectionService.shouldForceSelection(q))return P(q),W.mouseup&&O._document.addEventListener("mouseup",W.mouseup),W.mousedrag&&O._document.addEventListener("mousemove",W.mousedrag),O.cancel(q)})),this.register(e.addDisposableDomListener(I,"wheel",function(q){if(!W.wheel){if(!O.buffer.hasScrollback){var G=O.viewport.getLinesScrolled(q);if(G===0)return;for(var ee=v.C0.ESC+(O._coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(q.deltaY<0?"A":"B"),re="",se=0;se<Math.abs(G);se++)re+=ee;O._coreService.triggerDataEvent(re,!0)}}},{passive:!0})),this.register(e.addDisposableDomListener(I,"wheel",function(q){if(!W.wheel)return O.viewport.onWheel(q)?void 0:O.cancel(q)},{passive:!1})),this.register(e.addDisposableDomListener(I,"touchstart",function(q){if(!O._coreMouseService.areMouseEventsActive)return O.viewport.onTouchStart(q),O.cancel(q)},{passive:!0})),this.register(e.addDisposableDomListener(I,"touchmove",function(q){if(!O._coreMouseService.areMouseEventsActive)return O.viewport.onTouchMove(q)?void 0:O.cancel(q)},{passive:!1}))},k.prototype.refresh=function(O,T){var I;(I=this._renderService)===null||I===void 0||I.refreshRows(O,T)},k.prototype._queueLinkification=function(O,T){var I;(I=this.linkifier)===null||I===void 0||I.linkifyRows(O,T)},k.prototype.updateCursorStyle=function(O){var T;((T=this._selectionService)===null||T===void 0?void 0:T.shouldColumnSelect(O))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},k.prototype._showCursor=function(){this._coreService.isCursorInitialized||(this._coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},k.prototype.scrollLines=function(O,T,I){I===void 0&&(I=0),V.prototype.scrollLines.call(this,O,T,I),this.refresh(0,this.rows-1)},k.prototype.paste=function(O){E.paste(O,this.textarea,this._coreService)},k.prototype.attachCustomKeyEventHandler=function(O){this._customKeyEventHandler=O},k.prototype.registerLinkMatcher=function(O,T,I){var P=this.linkifier.registerLinkMatcher(O,T,I);return this.refresh(0,this.rows-1),P},k.prototype.deregisterLinkMatcher=function(O){this.linkifier.deregisterLinkMatcher(O)&&this.refresh(0,this.rows-1)},k.prototype.registerLinkProvider=function(O){return this.linkifier2.registerLinkProvider(O)},k.prototype.registerCharacterJoiner=function(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var T=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),T},k.prototype.deregisterCharacterJoiner=function(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)},Object.defineProperty(k.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),k.prototype.addMarker=function(O){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)},k.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},k.prototype.select=function(O,T,I){this._selectionService.setSelection(O,T,I)},k.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},k.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},k.prototype.clearSelection=function(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()},k.prototype.selectAll=function(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()},k.prototype.selectLines=function(O,T){var I;(I=this._selectionService)===null||I===void 0||I.selectLines(O,T)},k.prototype._keyDown=function(O){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(!this._compositionHelper.keydown(O))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;var T=m.evaluateKeyboardEvent(O,this._coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),T.type===3||T.type===2){var I=this.rows-1;return this.scrollLines(T.type===2?-I:I),this.cancel(O,!0)}return T.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(T.cancel&&this.cancel(O,!0),!T.key||(T.key!==v.C0.ETX&&T.key!==v.C0.CR||(this.textarea.value=""),this._onKey.fire({key:T.key,domEvent:O}),this._showCursor(),this._coreService.triggerDataEvent(T.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(O,!0)))},k.prototype._isThirdLevelShift=function(O,T){var I=O.isMac&&!this.options.macOptionIsMeta&&T.altKey&&!T.ctrlKey&&!T.metaKey||O.isWindows&&T.altKey&&T.ctrlKey&&!T.metaKey;return T.type==="keypress"?I:I&&(!T.keyCode||T.keyCode>47)},k.prototype._keyUp=function(O){this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(T){return T.keyCode===16||T.keyCode===17||T.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O))},k.prototype._keyPress=function(O){var T;if(this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)T=O.charCode;else if(O.which===null||O.which===void 0)T=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;T=O.which}return!(!T||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(T=String.fromCharCode(T),this._onKey.fire({key:T,domEvent:O}),this._showCursor(),this._coreService.triggerDataEvent(T,!0),0))},k.prototype.bell=function(){var O;this._soundBell()&&((O=this._soundService)===null||O===void 0||O.playBellSound()),this._onBell.fire()},k.prototype.resize=function(O,T){O!==this.cols||T!==this.rows?V.prototype.resize.call(this,O,T):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},k.prototype._afterResize=function(O,T){var I,P;(I=this._charSizeService)===null||I===void 0||I.measure(),(P=this.viewport)===null||P===void 0||P.syncScrollArea(!0)},k.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var O=1;O<this.rows;O++)this.buffer.lines.push(this.buffer.getBlankLine(S.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},k.prototype.reset=function(){var O,T;this.options.rows=this.rows,this.options.cols=this.cols;var I=this._customKeyEventHandler;this._setup(),V.prototype.reset.call(this),(O=this._selectionService)===null||O===void 0||O.reset(),this._customKeyEventHandler=I,this.refresh(0,this.rows-1),(T=this.viewport)===null||T===void 0||T.syncScrollArea()},k.prototype._reportWindowsOptions=function(O){if(this._renderService)switch(O){case o.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var T=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),I=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this._coreService.triggerDataEvent(v.C0.ESC+"[4;"+I+";"+T+"t");break;case o.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var P=this._renderService.dimensions.scaledCellWidth.toFixed(0),W=this._renderService.dimensions.scaledCellHeight.toFixed(0);this._coreService.triggerDataEvent(v.C0.ESC+"[6;"+W+";"+P+"t")}},k.prototype.cancel=function(O,T){if(this.options.cancelEvents||T)return O.preventDefault(),O.stopPropagation(),!1},k.prototype._visualBell=function(){return!1},k.prototype._soundBell=function(){return this.options.bellStyle==="sound"},k}(R.CoreTerminal);l.Terminal=N},1680:function(H,l,g){var u,p=this&&this.__extends||(u=function(r,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])})(r,e)},function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}u(t,r),t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),_=this&&this.__decorate||function(t,r,e,i){var s,a=arguments.length,h=a<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(t,r,e,i);else for(var d=t.length-1;d>=0;d--)(s=t[d])&&(h=(a<3?s(h):a>3?s(r,e,h):s(r,e))||h);return a>3&&h&&Object.defineProperty(r,e,h),h},f=this&&this.__param||function(t,r){return function(e,i){r(e,i,t)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Viewport=void 0;var E=g(844),v=g(3656),o=g(4725),c=g(2585),n=function(t){function r(e,i,s,a,h,d,m){var y=t.call(this)||this;return y._scrollLines=e,y._viewportElement=i,y._scrollArea=s,y._bufferService=a,y._optionsService=h,y._charSizeService=d,y._renderService=m,y.scrollBarWidth=0,y._currentRowHeight=0,y._lastRecordedBufferLength=0,y._lastRecordedViewportHeight=0,y._lastRecordedBufferHeight=0,y._lastTouchY=0,y._lastScrollTop=0,y._wheelPartialScroll=0,y._refreshAnimationFrame=null,y._ignoreNextScrollEvent=!1,y.scrollBarWidth=y._viewportElement.offsetWidth-y._scrollArea.offsetWidth||15,y.register(v.addDisposableDomListener(y._viewportElement,"scroll",y._onScroll.bind(y))),setTimeout(function(){return y.syncScrollArea()},0),y}return p(r,t),r.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},r.prototype._refresh=function(e){var i=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return i._innerRefresh()}))},r.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==i&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=i),this._refreshAnimationFrame=null},r.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);if(this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight){var i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._lastScrollTop===i&&this._lastScrollTop===this._viewportElement.scrollTop&&this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh(e)}else this._refresh(e)},r.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var i=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(i)}},r.prototype._bubbleScroll=function(e,i){var s=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(i<0&&this._viewportElement.scrollTop!==0||i>0&&s<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},r.prototype.onWheel=function(e){var i=this._getPixelsScrolled(e);return i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(e,i))},r.prototype._getPixelsScrolled=function(e){if(e.deltaY===0)return 0;var i=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._currentRowHeight*this._bufferService.rows),i},r.prototype.getLinesScrolled=function(e){if(e.deltaY===0)return 0;var i=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(i/=this._currentRowHeight+0,this._wheelPartialScroll+=i,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i},r.prototype._applyScrollModifier=function(e,i){var s=this._optionsService.options.fastScrollModifier;return s==="alt"&&i.altKey||s==="ctrl"&&i.ctrlKey||s==="shift"&&i.shiftKey?e*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:e*this._optionsService.options.scrollSensitivity},r.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},r.prototype.onTouchMove=function(e){var i=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(e,i))},_([f(3,c.IBufferService),f(4,c.IOptionsService),f(5,o.ICharSizeService),f(6,o.IRenderService)],r)}(E.Disposable);l.Viewport=n},2950:function(H,l,g){var u=this&&this.__decorate||function(v,o,c,n){var t,r=arguments.length,e=r<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,c):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(v,o,c,n);else for(var i=v.length-1;i>=0;i--)(t=v[i])&&(e=(r<3?t(e):r>3?t(o,c,e):t(o,c))||e);return r>3&&e&&Object.defineProperty(o,c,e),e},p=this&&this.__param||function(v,o){return function(c,n){o(c,n,v)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CompositionHelper=void 0;var _=g(4725),f=g(2585),E=function(){function v(o,c,n,t,r,e){this._textarea=o,this._compositionView=c,this._bufferService=n,this._optionsService=t,this._coreService=r,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(v.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),v.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},v.prototype.compositionupdate=function(o){var c=this;this._compositionView.textContent=o.data,this.updateCompositionElements(),setTimeout(function(){c._compositionPosition.end=c._textarea.value.length},0)},v.prototype.compositionend=function(){this._finalizeComposition(!0)},v.prototype.keydown=function(o){if(this._isComposing||this._isSendingComposition){if(o.keyCode===229||o.keyCode===16||o.keyCode===17||o.keyCode===18)return!1;this._finalizeComposition(!1)}return o.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},v.prototype._finalizeComposition=function(o){var c=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,o){var n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(c._isSendingComposition){c._isSendingComposition=!1;var r;n.start+=c._dataAlreadySent.length,(r=c._isComposing?c._textarea.value.substring(n.start,n.end):c._textarea.value.substring(n.start)).length>0&&c._coreService.triggerDataEvent(r,!0)}},0)}else{this._isSendingComposition=!1;var t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}},v.prototype._handleAnyTextareaChanges=function(){var o=this,c=this._textarea.value;setTimeout(function(){if(!o._isComposing){var n=o._textarea.value.replace(c,"");n.length>0&&(o._dataAlreadySent=n,o._coreService.triggerDataEvent(n,!0))}},0)},v.prototype.updateCompositionElements=function(o){var c=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),t=this._renderService.dimensions.actualCellHeight,r=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=n*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=r+"px",this._compositionView.style.height=t+"px",this._compositionView.style.lineHeight=t+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var i=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=r+"px",this._textarea.style.width=Math.max(i.width,1)+"px",this._textarea.style.height=Math.max(i.height,1)+"px",this._textarea.style.lineHeight=i.height+"px"}o||setTimeout(function(){return c.updateCompositionElements(!0)},0)}},u([p(2,f.IBufferService),p(3,f.IOptionsService),p(4,f.ICoreService),p(5,_.IRenderService)],v)}();l.CompositionHelper=E},9806:function(H,l){function g(u,p){var _=p.getBoundingClientRect();return[u.clientX-_.left,u.clientY-_.top]}Object.defineProperty(l,"__esModule",{value:!0}),l.getRawByteCoords=l.getCoords=l.getCoordsRelativeToElement=void 0,l.getCoordsRelativeToElement=g,l.getCoords=function(u,p,_,f,E,v,o,c){if(E){var n=g(u,p);if(n)return n[0]=Math.ceil((n[0]+(c?v/2:0))/v),n[1]=Math.ceil(n[1]/o),n[0]=Math.min(Math.max(n[0],1),_+(c?1:0)),n[1]=Math.min(Math.max(n[1],1),f),n}},l.getRawByteCoords=function(u){if(u)return{x:u[0]+32,y:u[1]+32}}},9504:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.moveToCellSequence=void 0;var u=g(2584);function p(c,n,t,r){var e=c-_(t,c),i=n-_(t,n);return o(Math.abs(e-i)-function(s,a,h){for(var d=0,m=s-_(h,s),y=a-_(h,a),S=0;S<Math.abs(m-y);S++){var C=f(s,a)==="A"?-1:1,A=h.buffer.lines.get(m+C*S);A&&A.isWrapped&&d++}return d}(c,n,t),v(f(c,n),r))}function _(c,n){for(var t=0,r=c.buffer.lines.get(n),e=r&&r.isWrapped;e&&n>=0&&n<c.rows;)t++,e=(r=c.buffer.lines.get(--n))&&r.isWrapped;return t}function f(c,n){return c>n?"A":"B"}function E(c,n,t,r,e,i){for(var s=c,a=n,h="";s!==t||a!==r;)s+=e?1:-1,e&&s>i.cols-1?(h+=i.buffer.translateBufferLineToString(a,!1,c,s),s=0,c=0,a++):!e&&s<0&&(h+=i.buffer.translateBufferLineToString(a,!1,0,c+1),c=s=i.cols-1,a--);return h+i.buffer.translateBufferLineToString(a,!1,c,s)}function v(c,n){var t=n?"O":"[";return u.C0.ESC+t+c}function o(c,n){c=Math.floor(c);for(var t="",r=0;r<c;r++)t+=n;return t}l.moveToCellSequence=function(c,n,t,r){var e,i=t.buffer.x,s=t.buffer.y;if(!t.buffer.hasScrollback)return function(h,d,m,y,S,C){return p(d,y,S,C).length===0?"":o(E(h,d,h,d-_(S,d),!1,S).length,v("D",C))}(i,s,0,n,t,r)+p(s,n,t,r)+function(h,d,m,y,S,C){var A;A=p(d,y,S,C).length>0?y-_(S,y):d;var L=y,x=function(w,b,D,R,j,B){var F;return F=p(D,R,j,B).length>0?R-_(j,R):b,w<D&&F<=R||w>=D&&F<R?"C":"D"}(h,d,m,y,S,C);return o(E(h,A,m,L,x==="C",S).length,v(x,C))}(i,s,c,n,t,r);if(s===n)return e=i>c?"D":"C",o(Math.abs(i-c),v(e,r));e=s>n?"D":"C";var a=Math.abs(s-n);return o(function(h,d){return d.cols-h}(s>n?c:i,t)+(a-1)*t.cols+1+((s>n?i:c)-1),v(e,r))}},244:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.AddonManager=void 0;var g=function(){function u(){this._addons=[]}return u.prototype.dispose=function(){for(var p=this._addons.length-1;p>=0;p--)this._addons[p].instance.dispose()},u.prototype.loadAddon=function(p,_){var f=this,E={instance:_,dispose:_.dispose,isDisposed:!1};this._addons.push(E),_.dispose=function(){return f._wrappedAddonDispose(E)},_.activate(p)},u.prototype._wrappedAddonDispose=function(p){if(!p.isDisposed){for(var _=-1,f=0;f<this._addons.length;f++)if(this._addons[f]===p){_=f;break}if(_===-1)throw new Error("Could not dispose an addon that has not been loaded");p.isDisposed=!0,p.dispose.apply(p.instance),this._addons.splice(_,1)}},u}();l.AddonManager=g},1546:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.BaseRenderLayer=void 0;var u=g(643),p=g(8803),_=g(1420),f=g(3734),E=g(1752),v=g(4774),o=g(9631),c=function(){function n(t,r,e,i,s,a,h,d){this._container=t,this._alpha=i,this._colors=s,this._rendererId=a,this._bufferService=h,this._optionsService=d,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+r+"-layer"),this._canvas.style.zIndex=e.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return n.prototype.dispose=function(){var t;o.removeElementFromParent(this._canvas),(t=this._charAtlas)===null||t===void 0||t.dispose()},n.prototype._initCanvas=function(){this._ctx=E.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},n.prototype.onOptionsChanged=function(){},n.prototype.onBlur=function(){},n.prototype.onFocus=function(){},n.prototype.onCursorMove=function(){},n.prototype.onGridChanged=function(t,r){},n.prototype.onSelectionChanged=function(t,r,e){e===void 0&&(e=!1)},n.prototype.setColors=function(t){this._refreshCharAtlas(t)},n.prototype._setTransparency=function(t){if(t!==this._alpha){var r=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,r),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},n.prototype._refreshCharAtlas=function(t){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=_.acquireCharAtlas(this._optionsService.options,this._rendererId,t,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},n.prototype.resize=function(t){this._scaledCellWidth=t.scaledCellWidth,this._scaledCellHeight=t.scaledCellHeight,this._scaledCharWidth=t.scaledCharWidth,this._scaledCharHeight=t.scaledCharHeight,this._scaledCharLeft=t.scaledCharLeft,this._scaledCharTop=t.scaledCharTop,this._canvas.width=t.scaledCanvasWidth,this._canvas.height=t.scaledCanvasHeight,this._canvas.style.width=t.canvasWidth+"px",this._canvas.style.height=t.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},n.prototype._fillCells=function(t,r,e,i){this._ctx.fillRect(t*this._scaledCellWidth,r*this._scaledCellHeight,e*this._scaledCellWidth,i*this._scaledCellHeight)},n.prototype._fillBottomLineAtCells=function(t,r,e){e===void 0&&(e=1),this._ctx.fillRect(t*this._scaledCellWidth,(r+1)*this._scaledCellHeight-window.devicePixelRatio-1,e*this._scaledCellWidth,window.devicePixelRatio)},n.prototype._fillLeftLineAtCell=function(t,r,e){this._ctx.fillRect(t*this._scaledCellWidth,r*this._scaledCellHeight,window.devicePixelRatio*e,this._scaledCellHeight)},n.prototype._strokeRectAtCell=function(t,r,e,i){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(t*this._scaledCellWidth+window.devicePixelRatio/2,r*this._scaledCellHeight+window.devicePixelRatio/2,e*this._scaledCellWidth-window.devicePixelRatio,i*this._scaledCellHeight-window.devicePixelRatio)},n.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},n.prototype._clearCells=function(t,r,e,i){this._alpha?this._ctx.clearRect(t*this._scaledCellWidth,r*this._scaledCellHeight,e*this._scaledCellWidth,i*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(t*this._scaledCellWidth,r*this._scaledCellHeight,e*this._scaledCellWidth,i*this._scaledCellHeight))},n.prototype._fillCharTrueColor=function(t,r,e){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="ideographic",this._clipRow(e),this._ctx.fillText(t.getChars(),r*this._scaledCellWidth+this._scaledCharLeft,e*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},n.prototype._drawChars=function(t,r,e){var i,s,a=this._getContrastColor(t);a||t.isFgRGB()||t.isBgRGB()?this._drawUncachedChars(t,r,e,a):(t.isInverse()?(i=t.isBgDefault()?p.INVERTED_DEFAULT_COLOR:t.getBgColor(),s=t.isFgDefault()?p.INVERTED_DEFAULT_COLOR:t.getFgColor()):(s=t.isBgDefault()?u.DEFAULT_COLOR:t.getBgColor(),i=t.isFgDefault()?u.DEFAULT_COLOR:t.getFgColor()),i+=this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&i<8?8:0,this._currentGlyphIdentifier.chars=t.getChars()||u.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=t.getCode()||u.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=s,this._currentGlyphIdentifier.fg=i,this._currentGlyphIdentifier.bold=!!t.isBold(),this._currentGlyphIdentifier.dim=!!t.isDim(),this._currentGlyphIdentifier.italic=!!t.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,r*this._scaledCellWidth+this._scaledCharLeft,e*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(t,r,e))},n.prototype._drawUncachedChars=function(t,r,e,i){if(this._ctx.save(),this._ctx.font=this._getFont(!!t.isBold(),!!t.isItalic()),this._ctx.textBaseline="ideographic",t.isInverse())if(i)this._ctx.fillStyle=i.css;else if(t.isBgDefault())this._ctx.fillStyle=v.color.opaque(this._colors.background).css;else if(t.isBgRGB())this._ctx.fillStyle="rgb("+f.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var s=t.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&s<8&&(s+=8),this._ctx.fillStyle=this._colors.ansi[s].css}else if(i)this._ctx.fillStyle=i.css;else if(t.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(t.isFgRGB())this._ctx.fillStyle="rgb("+f.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var a=t.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&a<8&&(a+=8),this._ctx.fillStyle=this._colors.ansi[a].css}this._clipRow(e),t.isDim()&&(this._ctx.globalAlpha=p.DIM_OPACITY),this._ctx.fillText(t.getChars(),r*this._scaledCellWidth+this._scaledCharLeft,e*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},n.prototype._clipRow=function(t){this._ctx.beginPath(),this._ctx.rect(0,t*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},n.prototype._getFont=function(t,r){return(r?"italic":"")+" "+(t?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},n.prototype._getContrastColor=function(t){if(this._optionsService.options.minimumContrastRatio!==1){var r=this._colors.contrastCache.getColor(t.bg,t.fg);if(r!==void 0)return r||void 0;var e=t.getFgColor(),i=t.getFgColorMode(),s=t.getBgColor(),a=t.getBgColorMode(),h=!!t.isInverse(),d=!!t.isInverse();if(h){var m=e;e=s,s=m;var y=i;i=a,a=y}var S=this._resolveBackgroundRgba(a,s,h),C=this._resolveForegroundRgba(i,e,h,d),A=v.rgba.ensureContrastRatio(S,C,this._optionsService.options.minimumContrastRatio);if(A){var L={css:v.channels.toCss(A>>24&255,A>>16&255,A>>8&255),rgba:A};return this._colors.contrastCache.setColor(t.bg,t.fg,L),L}this._colors.contrastCache.setColor(t.bg,t.fg,null)}},n.prototype._resolveBackgroundRgba=function(t,r,e){switch(t){case 16777216:case 33554432:return this._colors.ansi[r].rgba;case 50331648:return r<<8;case 0:default:return e?this._colors.foreground.rgba:this._colors.background.rgba}},n.prototype._resolveForegroundRgba=function(t,r,e,i){switch(t){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&i&&r<8&&(r+=8),this._colors.ansi[r].rgba;case 50331648:return r<<8;case 0:default:return e?this._colors.background.rgba:this._colors.foreground.rgba}},n}();l.BaseRenderLayer=c},2512:function(H,l,g){var u,p=this&&this.__extends||(u=function(i,s){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,h){a.__proto__=h}||function(a,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(a[d]=h[d])})(i,s)},function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}u(e,i),e.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}),_=this&&this.__decorate||function(e,i,s,a){var h,d=arguments.length,m=d<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,i,s,a);else for(var y=e.length-1;y>=0;y--)(h=e[y])&&(m=(d<3?h(m):d>3?h(i,s,m):h(i,s))||m);return d>3&&m&&Object.defineProperty(i,s,m),m},f=this&&this.__param||function(e,i){return function(s,a){i(s,a,e)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CursorRenderLayer=void 0;var E=g(1546),v=g(511),o=g(2585),c=g(4725),n=600,t=function(e){function i(s,a,h,d,m,y,S,C,A){var L=e.call(this,s,"cursor",a,!0,h,d,y,S)||this;return L._onRequestRedraw=m,L._coreService=C,L._coreBrowserService=A,L._cell=new v.CellData,L._state={x:0,y:0,isFocused:!1,style:"",width:0},L._cursorRenderers={bar:L._renderBarCursor.bind(L),block:L._renderBlockCursor.bind(L),underline:L._renderUnderlineCursor.bind(L)},L}return p(i,e),i.prototype.resize=function(s){e.prototype.resize.call(this,s),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},i.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},i.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onOptionsChanged=function(){var s,a=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new r(this._coreBrowserService.isFocused,function(){a._render(!0)})):((s=this._cursorBlinkStateManager)===null||s===void 0||s.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},i.prototype.onGridChanged=function(s,a){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},i.prototype._render=function(s){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var a=this._bufferService.buffer.ybase+this._bufferService.buffer.y,h=a-this._bufferService.buffer.ydisp;if(h<0||h>=this._bufferService.rows)this._clearCursor();else{var d=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(a).loadCell(d,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var m=this._optionsService.options.cursorStyle;return m&&m!=="block"?this._cursorRenderers[m](d,h,this._cell):this._renderBlurCursor(d,h,this._cell),this._ctx.restore(),this._state.x=d,this._state.y=h,this._state.isFocused=!1,this._state.style=m,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===d&&this._state.y===h&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](d,h,this._cell),this._ctx.restore(),this._state.x=d,this._state.y=h,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},i.prototype._clearCursor=function(){this._state&&(this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},i.prototype._renderBarCursor=function(s,a,h){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(s,a,this._optionsService.options.cursorWidth),this._ctx.restore()},i.prototype._renderBlockCursor=function(s,a,h){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(s,a,h.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(h,s,a),this._ctx.restore()},i.prototype._renderUnderlineCursor=function(s,a,h){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(s,a),this._ctx.restore()},i.prototype._renderBlurCursor=function(s,a,h){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(s,a,h.getWidth(),1),this._ctx.restore()},_([f(5,o.IBufferService),f(6,o.IOptionsService),f(7,o.ICoreService),f(8,c.ICoreBrowserService)],i)}(E.BaseRenderLayer);l.CursorRenderLayer=t;var r=function(){function e(i,s){this._renderCallback=s,this.isCursorVisible=!0,i&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var i=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){i._renderCallback(),i._animationFrame=void 0})))},e.prototype._restartInterval=function(i){var s=this;i===void 0&&(i=n),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=window.setTimeout(function(){if(s._animationTimeRestarted){var a=n-(Date.now()-s._animationTimeRestarted);if(s._animationTimeRestarted=void 0,a>0)return void s._restartInterval(a)}s.isCursorVisible=!1,s._animationFrame=window.requestAnimationFrame(function(){s._renderCallback(),s._animationFrame=void 0}),s._blinkInterval=window.setInterval(function(){if(s._animationTimeRestarted){var h=n-(Date.now()-s._animationTimeRestarted);return s._animationTimeRestarted=void 0,void s._restartInterval(h)}s.isCursorVisible=!s.isCursorVisible,s._animationFrame=window.requestAnimationFrame(function(){s._renderCallback(),s._animationFrame=void 0})},n)},i)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},3700:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.GridCache=void 0;var g=function(){function u(){this.cache=[]}return u.prototype.resize=function(p,_){for(var f=0;f<p;f++){this.cache.length<=f&&this.cache.push([]);for(var E=this.cache[f].length;E<_;E++)this.cache[f].push(void 0);this.cache[f].length=_}this.cache.length=p},u.prototype.clear=function(){for(var p=0;p<this.cache.length;p++)for(var _=0;_<this.cache[p].length;_++)this.cache[p][_]=void 0},u}();l.GridCache=g},5098:function(H,l,g){var u,p=this&&this.__extends||(u=function(r,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])})(r,e)},function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}u(t,r),t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),_=this&&this.__decorate||function(t,r,e,i){var s,a=arguments.length,h=a<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(t,r,e,i);else for(var d=t.length-1;d>=0;d--)(s=t[d])&&(h=(a<3?s(h):a>3?s(r,e,h):s(r,e))||h);return a>3&&h&&Object.defineProperty(r,e,h),h},f=this&&this.__param||function(t,r){return function(e,i){r(e,i,t)}};Object.defineProperty(l,"__esModule",{value:!0}),l.LinkRenderLayer=void 0;var E=g(1546),v=g(8803),o=g(2040),c=g(2585),n=function(t){function r(e,i,s,a,h,d,m,y){var S=t.call(this,e,"link",i,!0,s,a,m,y)||this;return h.onShowLinkUnderline(function(C){return S._onShowLinkUnderline(C)}),h.onHideLinkUnderline(function(C){return S._onHideLinkUnderline(C)}),d.onShowLinkUnderline(function(C){return S._onShowLinkUnderline(C)}),d.onHideLinkUnderline(function(C){return S._onHideLinkUnderline(C)}),S}return p(r,t),r.prototype.resize=function(e){t.prototype.resize.call(this,e),this._state=void 0},r.prototype.reset=function(){this._clearCurrentLink()},r.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},r.prototype._onShowLinkUnderline=function(e){if(e.fg===v.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&o.is256Color(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var i=e.y1+1;i<e.y2;i++)this._fillBottomLineAtCells(0,i,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},r.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},_([f(6,c.IBufferService),f(7,c.IOptionsService)],r)}(E.BaseRenderLayer);l.LinkRenderLayer=n},3525:function(H,l,g){var u,p=this&&this.__extends||(u=function(d,m){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,S){y.__proto__=S}||function(y,S){for(var C in S)Object.prototype.hasOwnProperty.call(S,C)&&(y[C]=S[C])})(d,m)},function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function m(){this.constructor=h}u(h,d),h.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}),_=this&&this.__decorate||function(h,d,m,y){var S,C=arguments.length,A=C<3?d:y===null?y=Object.getOwnPropertyDescriptor(d,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(h,d,m,y);else for(var L=h.length-1;L>=0;L--)(S=h[L])&&(A=(C<3?S(A):C>3?S(d,m,A):S(d,m))||A);return C>3&&A&&Object.defineProperty(d,m,A),A},f=this&&this.__param||function(h,d){return function(m,y){d(m,y,h)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Renderer=void 0;var E=g(9596),v=g(4149),o=g(2512),c=g(5098),n=g(844),t=g(4725),r=g(2585),e=g(1420),i=g(8460),s=1,a=function(h){function d(m,y,S,C,A,L,x,w){var b=h.call(this)||this;b._colors=m,b._screenElement=y,b._bufferService=L,b._charSizeService=x,b._optionsService=w,b._id=s++,b._onRequestRedraw=new i.EventEmitter;var D=b._optionsService.options.allowTransparency;return b._renderLayers=[A.createInstance(E.TextRenderLayer,b._screenElement,0,b._colors,D,b._id),A.createInstance(v.SelectionRenderLayer,b._screenElement,1,b._colors,b._id),A.createInstance(c.LinkRenderLayer,b._screenElement,2,b._colors,b._id,S,C),A.createInstance(o.CursorRenderLayer,b._screenElement,3,b._colors,b._id,b._onRequestRedraw)],b.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},b._devicePixelRatio=window.devicePixelRatio,b._updateDimensions(),b.onOptionsChanged(),b}return p(d,h),Object.defineProperty(d.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),d.prototype.dispose=function(){for(var m=0,y=this._renderLayers;m<y.length;m++)y[m].dispose();h.prototype.dispose.call(this),e.removeTerminalFromCache(this._id)},d.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},d.prototype.setColors=function(m){this._colors=m;for(var y=0,S=this._renderLayers;y<S.length;y++){var C=S[y];C.setColors(this._colors),C.reset()}},d.prototype.onResize=function(m,y){this._updateDimensions();for(var S=0,C=this._renderLayers;S<C.length;S++)C[S].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},d.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},d.prototype.onBlur=function(){this._runOperation(function(m){return m.onBlur()})},d.prototype.onFocus=function(){this._runOperation(function(m){return m.onFocus()})},d.prototype.onSelectionChanged=function(m,y,S){S===void 0&&(S=!1),this._runOperation(function(C){return C.onSelectionChanged(m,y,S)})},d.prototype.onCursorMove=function(){this._runOperation(function(m){return m.onCursorMove()})},d.prototype.onOptionsChanged=function(){this._runOperation(function(m){return m.onOptionsChanged()})},d.prototype.clear=function(){this._runOperation(function(m){return m.reset()})},d.prototype._runOperation=function(m){for(var y=0,S=this._renderLayers;y<S.length;y++)m(S[y])},d.prototype.renderRows=function(m,y){for(var S=0,C=this._renderLayers;S<C.length;S++)C[S].onGridChanged(m,y)},d.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},_([f(4,r.IInstantiationService),f(5,r.IBufferService),f(6,t.ICharSizeService),f(7,r.IOptionsService)],d)}(n.Disposable);l.Renderer=a},1752:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.throwIfFalsy=void 0,l.throwIfFalsy=function(g){if(!g)throw new Error("value must not be falsy");return g}},4149:function(H,l,g){var u,p=this&&this.__extends||(u=function(n,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])})(n,t)},function(c,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=c}u(c,n),c.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}),_=this&&this.__decorate||function(c,n,t,r){var e,i=arguments.length,s=i<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(c,n,t,r);else for(var a=c.length-1;a>=0;a--)(e=c[a])&&(s=(i<3?e(s):i>3?e(n,t,s):e(n,t))||s);return i>3&&s&&Object.defineProperty(n,t,s),s},f=this&&this.__param||function(c,n){return function(t,r){n(t,r,c)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionRenderLayer=void 0;var E=g(1546),v=g(2585),o=function(c){function n(t,r,e,i,s,a){var h=c.call(this,t,"selection",r,!0,e,i,s,a)||this;return h._clearState(),h}return p(n,c),n.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},n.prototype.resize=function(t){c.prototype.resize.call(this,t),this._clearState()},n.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},n.prototype.onSelectionChanged=function(t,r,e){if(this._didStateChange(t,r,e,this._bufferService.buffer.ydisp))if(this._clearAll(),t&&r){var i=t[1]-this._bufferService.buffer.ydisp,s=r[1]-this._bufferService.buffer.ydisp,a=Math.max(i,0),h=Math.min(s,this._bufferService.rows-1);if(a>=this._bufferService.rows||h<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var d=t[0],m=r[0]-d,y=h-a+1;this._fillCells(d,a,m,y)}else{d=i===a?t[0]:0;var S=a===s?r[0]:this._bufferService.cols;this._fillCells(d,a,S-d,1);var C=Math.max(h-a-1,0);if(this._fillCells(0,a+1,this._bufferService.cols,C),a!==h){var A=s===h?r[0]:this._bufferService.cols;this._fillCells(0,h,A,1)}}this._state.start=[t[0],t[1]],this._state.end=[r[0],r[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},n.prototype._didStateChange=function(t,r,e,i){return!this._areCoordinatesEqual(t,this._state.start)||!this._areCoordinatesEqual(r,this._state.end)||e!==this._state.columnSelectMode||i!==this._state.ydisp},n.prototype._areCoordinatesEqual=function(t,r){return!(!t||!r)&&t[0]===r[0]&&t[1]===r[1]},_([f(4,v.IBufferService),f(5,v.IOptionsService)],n)}(E.BaseRenderLayer);l.SelectionRenderLayer=o},9596:function(H,l,g){var u,p=this&&this.__extends||(u=function(a,h){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(d[y]=m[y])})(a,h)},function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=s}u(s,a),s.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)}),_=this&&this.__decorate||function(s,a,h,d){var m,y=arguments.length,S=y<3?a:d===null?d=Object.getOwnPropertyDescriptor(a,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(s,a,h,d);else for(var C=s.length-1;C>=0;C--)(m=s[C])&&(S=(y<3?m(S):y>3?m(a,h,S):m(a,h))||S);return y>3&&S&&Object.defineProperty(a,h,S),S},f=this&&this.__param||function(s,a){return function(h,d){a(h,d,s)}};Object.defineProperty(l,"__esModule",{value:!0}),l.TextRenderLayer=void 0;var E=g(3700),v=g(1546),o=g(3734),c=g(643),n=g(511),t=g(2585),r=g(4725),e=g(4269),i=function(s){function a(h,d,m,y,S,C,A,L){var x=s.call(this,h,"text",d,y,m,S,C,A)||this;return x._characterJoinerService=L,x._characterWidth=0,x._characterFont="",x._characterOverlapCache={},x._workCell=new n.CellData,x._state=new E.GridCache,x}return p(a,s),a.prototype.resize=function(h){s.prototype.resize.call(this,h);var d=this._getFont(!1,!1);this._characterWidth===h.scaledCharWidth&&this._characterFont===d||(this._characterWidth=h.scaledCharWidth,this._characterFont=d,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},a.prototype.reset=function(){this._state.clear(),this._clearAll()},a.prototype._forEachCell=function(h,d,m){for(var y=h;y<=d;y++)for(var S=y+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.lines.get(S),A=this._characterJoinerService.getJoinedCharacters(S),L=0;L<this._bufferService.cols;L++){C.loadCell(L,this._workCell);var x=this._workCell,w=!1,b=L;if(x.getWidth()!==0){if(A.length>0&&L===A[0][0]){w=!0;var D=A.shift();x=new e.JoinedCellData(this._workCell,C.translateToString(!0,D[0],D[1]),D[1]-D[0]),b=D[1]-1}!w&&this._isOverlapping(x)&&b<C.length-1&&C.getCodePoint(b+1)===c.NULL_CELL_CODE&&(x.content&=-12582913,x.content|=2<<22),m(x,L,y),L=b}}},a.prototype._drawBackground=function(h,d){var m=this,y=this._ctx,S=this._bufferService.cols,C=0,A=0,L=null;y.save(),this._forEachCell(h,d,function(x,w,b){var D=null;x.isInverse()?D=x.isFgDefault()?m._colors.foreground.css:x.isFgRGB()?"rgb("+o.AttributeData.toColorRGB(x.getFgColor()).join(",")+")":m._colors.ansi[x.getFgColor()].css:x.isBgRGB()?D="rgb("+o.AttributeData.toColorRGB(x.getBgColor()).join(",")+")":x.isBgPalette()&&(D=m._colors.ansi[x.getBgColor()].css),L===null&&(C=w,A=b),b!==A?(y.fillStyle=L||"",m._fillCells(C,A,S-C,1),C=w,A=b):L!==D&&(y.fillStyle=L||"",m._fillCells(C,A,w-C,1),C=w,A=b),L=D}),L!==null&&(y.fillStyle=L,this._fillCells(C,A,S-C,1)),y.restore()},a.prototype._drawForeground=function(h,d){var m=this;this._forEachCell(h,d,function(y,S,C){if(!y.isInvisible()&&(m._drawChars(y,S,C),y.isUnderline())){if(m._ctx.save(),y.isInverse())if(y.isBgDefault())m._ctx.fillStyle=m._colors.background.css;else if(y.isBgRGB())m._ctx.fillStyle="rgb("+o.AttributeData.toColorRGB(y.getBgColor()).join(",")+")";else{var A=y.getBgColor();m._optionsService.options.drawBoldTextInBrightColors&&y.isBold()&&A<8&&(A+=8),m._ctx.fillStyle=m._colors.ansi[A].css}else if(y.isFgDefault())m._ctx.fillStyle=m._colors.foreground.css;else if(y.isFgRGB())m._ctx.fillStyle="rgb("+o.AttributeData.toColorRGB(y.getFgColor()).join(",")+")";else{var L=y.getFgColor();m._optionsService.options.drawBoldTextInBrightColors&&y.isBold()&&L<8&&(L+=8),m._ctx.fillStyle=m._colors.ansi[L].css}m._fillBottomLineAtCells(S,C,y.getWidth()),m._ctx.restore()}})},a.prototype.onGridChanged=function(h,d){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,h,this._bufferService.cols,d-h+1),this._drawBackground(h,d),this._drawForeground(h,d))},a.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},a.prototype._isOverlapping=function(h){if(h.getWidth()!==1||h.getCode()<256)return!1;var d=h.getChars();if(this._characterOverlapCache.hasOwnProperty(d))return this._characterOverlapCache[d];this._ctx.save(),this._ctx.font=this._characterFont;var m=Math.floor(this._ctx.measureText(d).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[d]=m,m},_([f(5,t.IBufferService),f(6,t.IOptionsService),f(7,r.ICharacterJoinerService)],a)}(v.BaseRenderLayer);l.TextRenderLayer=i},9616:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.BaseCharAtlas=void 0;var g=function(){function u(){this._didWarmUp=!1}return u.prototype.dispose=function(){},u.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},u.prototype._doWarmUp=function(){},u.prototype.beginFrame=function(){},u}();l.BaseCharAtlas=g},1420:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.removeTerminalFromCache=l.acquireCharAtlas=void 0;var u=g(2040),p=g(1906),_=[];l.acquireCharAtlas=function(f,E,v,o,c){for(var n=u.generateConfig(o,c,f,v),t=0;t<_.length;t++){var r=(e=_[t]).ownedBy.indexOf(E);if(r>=0){if(u.configEquals(e.config,n))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),_.splice(t,1)):e.ownedBy.splice(r,1);break}}for(t=0;t<_.length;t++){var e=_[t];if(u.configEquals(e.config,n))return e.ownedBy.push(E),e.atlas}var i={atlas:new p.DynamicCharAtlas(document,n),config:n,ownedBy:[E]};return _.push(i),i.atlas},l.removeTerminalFromCache=function(f){for(var E=0;E<_.length;E++){var v=_[E].ownedBy.indexOf(f);if(v!==-1){_[E].ownedBy.length===1?(_[E].atlas.dispose(),_.splice(E,1)):_[E].ownedBy.splice(v,1);break}}}},2040:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.is256Color=l.configEquals=l.generateConfig=void 0;var u=g(643);l.generateConfig=function(p,_,f,E){var v={foreground:E.foreground,background:E.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:E.ansi};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:p,scaledCharHeight:_,fontFamily:f.fontFamily,fontSize:f.fontSize,fontWeight:f.fontWeight,fontWeightBold:f.fontWeightBold,allowTransparency:f.allowTransparency,colors:v}},l.configEquals=function(p,_){for(var f=0;f<p.colors.ansi.length;f++)if(p.colors.ansi[f].rgba!==_.colors.ansi[f].rgba)return!1;return p.devicePixelRatio===_.devicePixelRatio&&p.fontFamily===_.fontFamily&&p.fontSize===_.fontSize&&p.fontWeight===_.fontWeight&&p.fontWeightBold===_.fontWeightBold&&p.allowTransparency===_.allowTransparency&&p.scaledCharWidth===_.scaledCharWidth&&p.scaledCharHeight===_.scaledCharHeight&&p.colors.foreground===_.colors.foreground&&p.colors.background===_.colors.background},l.is256Color=function(p){return p<u.DEFAULT_COLOR}},8803:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.CHAR_ATLAS_CELL_SPACING=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0,l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.CHAR_ATLAS_CELL_SPACING=1},1906:function(H,l,g){var u,p=this&&this.__extends||(u=function(a,h){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(d[y]=m[y])})(a,h)},function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=s}u(s,a),s.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)});Object.defineProperty(l,"__esModule",{value:!0}),l.NoneCharAtlas=l.DynamicCharAtlas=l.getGlyphCacheKey=void 0;var _=g(8803),f=g(9616),E=g(5680),v=g(7001),o=g(6114),c=g(1752),n=g(4774),t={css:"rgba(0, 0, 0, 0)",rgba:0};function r(s){return s.code<<21|s.bg<<12|s.fg<<3|(s.bold?0:4)+(s.dim?0:2)+(s.italic?0:1)}l.getGlyphCacheKey=r;var e=function(s){function a(h,d){var m=s.call(this)||this;m._config=d,m._drawToCacheCount=0,m._glyphsWaitingOnBitmap=[],m._bitmapCommitTimeout=null,m._bitmap=null,m._cacheCanvas=h.createElement("canvas"),m._cacheCanvas.width=1024,m._cacheCanvas.height=1024,m._cacheCtx=c.throwIfFalsy(m._cacheCanvas.getContext("2d",{alpha:!0}));var y=h.createElement("canvas");y.width=m._config.scaledCharWidth,y.height=m._config.scaledCharHeight,m._tmpCtx=c.throwIfFalsy(y.getContext("2d",{alpha:m._config.allowTransparency})),m._width=Math.floor(1024/m._config.scaledCharWidth),m._height=Math.floor(1024/m._config.scaledCharHeight);var S=m._width*m._height;return m._cacheMap=new v.LRUMap(S),m._cacheMap.prealloc(S),m}return p(a,s),a.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},a.prototype.beginFrame=function(){this._drawToCacheCount=0},a.prototype.draw=function(h,d,m,y){if(d.code===32)return!0;if(!this._canCache(d))return!1;var S=r(d),C=this._cacheMap.get(S);if(C!=null)return this._drawFromCache(h,C,m,y),!0;if(this._drawToCacheCount<100){var A;A=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var L=this._drawToCache(d,A);return this._cacheMap.set(S,L),this._drawFromCache(h,L,m,y),!0}return!1},a.prototype._canCache=function(h){return h.code<256},a.prototype._toCoordinateX=function(h){return h%this._width*this._config.scaledCharWidth},a.prototype._toCoordinateY=function(h){return Math.floor(h/this._width)*this._config.scaledCharHeight},a.prototype._drawFromCache=function(h,d,m,y){if(!d.isEmpty){var S=this._toCoordinateX(d.index),C=this._toCoordinateY(d.index);h.drawImage(d.inBitmap?this._bitmap:this._cacheCanvas,S,C,this._config.scaledCharWidth,this._config.scaledCharHeight,m,y,this._config.scaledCharWidth,this._config.scaledCharHeight)}},a.prototype._getColorFromAnsiIndex=function(h){return h<this._config.colors.ansi.length?this._config.colors.ansi[h]:E.DEFAULT_ANSI_COLORS[h]},a.prototype._getBackgroundColor=function(h){return this._config.allowTransparency?t:h.bg===_.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:h.bg<256?this._getColorFromAnsiIndex(h.bg):this._config.colors.background},a.prototype._getForegroundColor=function(h){return h.fg===_.INVERTED_DEFAULT_COLOR?n.color.opaque(this._config.colors.background):h.fg<256?this._getColorFromAnsiIndex(h.fg):this._config.colors.foreground},a.prototype._drawToCache=function(h,d){this._drawToCacheCount++,this._tmpCtx.save();var m=this._getBackgroundColor(h);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=m.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var y=h.bold?this._config.fontWeightBold:this._config.fontWeight,S=h.italic?"italic":"";this._tmpCtx.font=S+" "+y+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="ideographic",this._tmpCtx.fillStyle=this._getForegroundColor(h).css,h.dim&&(this._tmpCtx.globalAlpha=_.DIM_OPACITY),this._tmpCtx.fillText(h.chars,0,this._config.scaledCharHeight),this._tmpCtx.restore();var C=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),A=!1;this._config.allowTransparency||(A=function(b,D){for(var R=!0,j=D.rgba>>>24,B=D.rgba>>>16&255,F=D.rgba>>>8&255,N=0;N<b.data.length;N+=4)b.data[N]===j&&b.data[N+1]===B&&b.data[N+2]===F?b.data[N+3]=0:R=!1;return R}(C,m));var L=this._toCoordinateX(d),x=this._toCoordinateY(d);this._cacheCtx.putImageData(C,L,x);var w={index:d,isEmpty:A,inBitmap:!1};return this._addGlyphToBitmap(w),w},a.prototype._addGlyphToBitmap=function(h){var d=this;!("createImageBitmap"in window)||o.isFirefox||o.isSafari||(this._glyphsWaitingOnBitmap.push(h),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return d._generateBitmap()},100)))},a.prototype._generateBitmap=function(){var h=this,d=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(m){h._bitmap=m;for(var y=0;y<d.length;y++)d[y].inBitmap=!0}),this._bitmapCommitTimeout=null},a}(f.BaseCharAtlas);l.DynamicCharAtlas=e;var i=function(s){function a(h,d){return s.call(this)||this}return p(a,s),a.prototype.draw=function(h,d,m,y){return!1},a}(f.BaseCharAtlas);l.NoneCharAtlas=i},7001:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.LRUMap=void 0;var g=function(){function u(p){this.capacity=p,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return u.prototype._unlinkNode=function(p){var _=p.prev,f=p.next;p===this._head&&(this._head=f),p===this._tail&&(this._tail=_),_!==null&&(_.next=f),f!==null&&(f.prev=_)},u.prototype._appendNode=function(p){var _=this._tail;_!==null&&(_.next=p),p.prev=_,p.next=null,this._tail=p,this._head===null&&(this._head=p)},u.prototype.prealloc=function(p){for(var _=this._nodePool,f=0;f<p;f++)_.push({prev:null,next:null,key:null,value:null})},u.prototype.get=function(p){var _=this._map[p];return _!==void 0?(this._unlinkNode(_),this._appendNode(_),_.value):null},u.prototype.peekValue=function(p){var _=this._map[p];return _!==void 0?_.value:null},u.prototype.peek=function(){var p=this._head;return p===null?null:p.value},u.prototype.set=function(p,_){var f=this._map[p];if(f!==void 0)f=this._map[p],this._unlinkNode(f),f.value=_;else if(this.size>=this.capacity)f=this._head,this._unlinkNode(f),delete this._map[f.key],f.key=p,f.value=_,this._map[p]=f;else{var E=this._nodePool;E.length>0?((f=E.pop()).key=p,f.value=_):f={prev:null,next:null,key:p,value:_},this._map[p]=f,this.size++}this._appendNode(f)},u}();l.LRUMap=g},1296:function(H,l,g){var u,p=this&&this.__extends||(u=function(S,C){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,L){A.__proto__=L}||function(A,L){for(var x in L)Object.prototype.hasOwnProperty.call(L,x)&&(A[x]=L[x])})(S,C)},function(y,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function C(){this.constructor=y}u(y,S),y.prototype=S===null?Object.create(S):(C.prototype=S.prototype,new C)}),_=this&&this.__decorate||function(y,S,C,A){var L,x=arguments.length,w=x<3?S:A===null?A=Object.getOwnPropertyDescriptor(S,C):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(y,S,C,A);else for(var b=y.length-1;b>=0;b--)(L=y[b])&&(w=(x<3?L(w):x>3?L(S,C,w):L(S,C))||w);return x>3&&w&&Object.defineProperty(S,C,w),w},f=this&&this.__param||function(y,S){return function(C,A){S(C,A,y)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRenderer=void 0;var E=g(3787),v=g(8803),o=g(844),c=g(4725),n=g(2585),t=g(8460),r=g(4774),e=g(9631),i="xterm-dom-renderer-owner-",s="xterm-fg-",a="xterm-bg-",h="xterm-focus",d=1,m=function(y){function S(C,A,L,x,w,b,D,R,j,B){var F=y.call(this)||this;return F._colors=C,F._element=A,F._screenElement=L,F._viewportElement=x,F._linkifier=w,F._linkifier2=b,F._charSizeService=R,F._optionsService=j,F._bufferService=B,F._terminalClass=d++,F._rowElements=[],F._rowContainer=document.createElement("div"),F._rowContainer.classList.add("xterm-rows"),F._rowContainer.style.lineHeight="normal",F._rowContainer.setAttribute("aria-hidden","true"),F._refreshRowElements(F._bufferService.cols,F._bufferService.rows),F._selectionContainer=document.createElement("div"),F._selectionContainer.classList.add("xterm-selection"),F._selectionContainer.setAttribute("aria-hidden","true"),F.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},F._updateDimensions(),F._injectCss(),F._rowFactory=D.createInstance(E.DomRendererRowFactory,document,F._colors),F._element.classList.add(i+F._terminalClass),F._screenElement.appendChild(F._rowContainer),F._screenElement.appendChild(F._selectionContainer),F._linkifier.onShowLinkUnderline(function(N){return F._onLinkHover(N)}),F._linkifier.onHideLinkUnderline(function(N){return F._onLinkLeave(N)}),F._linkifier2.onShowLinkUnderline(function(N){return F._onLinkHover(N)}),F._linkifier2.onHideLinkUnderline(function(N){return F._onLinkLeave(N)}),F}return p(S,y),Object.defineProperty(S.prototype,"onRequestRedraw",{get:function(){return new t.EventEmitter().event},enumerable:!1,configurable:!0}),S.prototype.dispose=function(){this._element.classList.remove(i+this._terminalClass),e.removeElementFromParent(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),y.prototype.dispose.call(this)},S.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var C=0,A=this._rowElements;C<A.length;C++){var L=A[C];L.style.width=this.dimensions.canvasWidth+"px",L.style.height=this.dimensions.actualCellHeight+"px",L.style.lineHeight=this.dimensions.actualCellHeight+"px",L.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var x=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=x,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},S.prototype.setColors=function(C){this._colors=C,this._injectCss()},S.prototype._injectCss=function(){var C=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var A=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";A+=this._terminalSelector+" span:not(."+E.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+E.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+E.ITALIC_CLASS+" { font-style: italic;}",A+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",A+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",A+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+E.CURSOR_CLASS+"."+E.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+E.CURSOR_CLASS+"."+E.CURSOR_BLINK_CLASS+":not(."+E.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+E.CURSOR_CLASS+"."+E.CURSOR_BLINK_CLASS+"."+E.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+E.CURSOR_CLASS+"."+E.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+E.CURSOR_CLASS+"."+E.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+E.CURSOR_CLASS+"."+E.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",A+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(L,x){A+=C._terminalSelector+" ."+s+x+" { color: "+L.css+"; }"+C._terminalSelector+" ."+a+x+" { background-color: "+L.css+"; }"}),A+=this._terminalSelector+" ."+s+v.INVERTED_DEFAULT_COLOR+" { color: "+r.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+a+v.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=A},S.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},S.prototype._refreshRowElements=function(C,A){for(var L=this._rowElements.length;L<=A;L++){var x=document.createElement("div");this._rowContainer.appendChild(x),this._rowElements.push(x)}for(;this._rowElements.length>A;)this._rowContainer.removeChild(this._rowElements.pop())},S.prototype.onResize=function(C,A){this._refreshRowElements(C,A),this._updateDimensions()},S.prototype.onCharSizeChanged=function(){this._updateDimensions()},S.prototype.onBlur=function(){this._rowContainer.classList.remove(h)},S.prototype.onFocus=function(){this._rowContainer.classList.add(h)},S.prototype.onSelectionChanged=function(C,A,L){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(C&&A){var x=C[1]-this._bufferService.buffer.ydisp,w=A[1]-this._bufferService.buffer.ydisp,b=Math.max(x,0),D=Math.min(w,this._bufferService.rows-1);if(!(b>=this._bufferService.rows||D<0)){var R=document.createDocumentFragment();if(L)R.appendChild(this._createSelectionElement(b,C[0],A[0],D-b+1));else{var j=x===b?C[0]:0,B=b===w?A[0]:this._bufferService.cols;R.appendChild(this._createSelectionElement(b,j,B));var F=D-b-1;if(R.appendChild(this._createSelectionElement(b+1,0,this._bufferService.cols,F)),b!==D){var N=w===D?A[0]:this._bufferService.cols;R.appendChild(this._createSelectionElement(D,0,N))}}this._selectionContainer.appendChild(R)}}},S.prototype._createSelectionElement=function(C,A,L,x){x===void 0&&(x=1);var w=document.createElement("div");return w.style.height=x*this.dimensions.actualCellHeight+"px",w.style.top=C*this.dimensions.actualCellHeight+"px",w.style.left=A*this.dimensions.actualCellWidth+"px",w.style.width=this.dimensions.actualCellWidth*(L-A)+"px",w},S.prototype.onCursorMove=function(){},S.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},S.prototype.clear=function(){for(var C=0,A=this._rowElements;C<A.length;C++)A[C].innerText=""},S.prototype.renderRows=function(C,A){for(var L=this._bufferService.buffer.ybase+this._bufferService.buffer.y,x=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),w=this._optionsService.options.cursorBlink,b=C;b<=A;b++){var D=this._rowElements[b];D.innerText="";var R=b+this._bufferService.buffer.ydisp,j=this._bufferService.buffer.lines.get(R),B=this._optionsService.options.cursorStyle;D.appendChild(this._rowFactory.createRow(j,R,R===L,B,x,w,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(S.prototype,"_terminalSelector",{get:function(){return"."+i+this._terminalClass},enumerable:!1,configurable:!0}),S.prototype._onLinkHover=function(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!0)},S.prototype._onLinkLeave=function(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!1)},S.prototype._setCellUnderline=function(C,A,L,x,w,b){for(;C!==A||L!==x;){var D=this._rowElements[L];if(!D)return;var R=D.children[C];R&&(R.style.textDecoration=b?"underline":"none"),++C>=w&&(C=0,L++)}},_([f(6,n.IInstantiationService),f(7,c.ICharSizeService),f(8,n.IOptionsService),f(9,n.IBufferService)],S)}(o.Disposable);l.DomRenderer=m},3787:function(H,l,g){var u=this&&this.__decorate||function(e,i,s,a){var h,d=arguments.length,m=d<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,i,s,a);else for(var y=e.length-1;y>=0;y--)(h=e[y])&&(m=(d<3?h(m):d>3?h(i,s,m):h(i,s))||m);return d>3&&m&&Object.defineProperty(i,s,m),m},p=this&&this.__param||function(e,i){return function(s,a){i(s,a,e)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRendererRowFactory=l.CURSOR_STYLE_UNDERLINE_CLASS=l.CURSOR_STYLE_BAR_CLASS=l.CURSOR_STYLE_BLOCK_CLASS=l.CURSOR_BLINK_CLASS=l.CURSOR_CLASS=l.UNDERLINE_CLASS=l.ITALIC_CLASS=l.DIM_CLASS=l.BOLD_CLASS=void 0;var _=g(8803),f=g(643),E=g(511),v=g(2585),o=g(4774),c=g(4725),n=g(4269);l.BOLD_CLASS="xterm-bold",l.DIM_CLASS="xterm-dim",l.ITALIC_CLASS="xterm-italic",l.UNDERLINE_CLASS="xterm-underline",l.CURSOR_CLASS="xterm-cursor",l.CURSOR_BLINK_CLASS="xterm-cursor-blink",l.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",l.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",l.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var t=function(){function e(i,s,a,h){this._document=i,this._colors=s,this._characterJoinerService=a,this._optionsService=h,this._workCell=new E.CellData}return e.prototype.setColors=function(i){this._colors=i},e.prototype.createRow=function(i,s,a,h,d,m,y,S){for(var C=this._document.createDocumentFragment(),A=this._characterJoinerService.getJoinedCharacters(s),L=0,x=Math.min(i.length,S)-1;x>=0;x--)if(i.loadCell(x,this._workCell).getCode()!==f.NULL_CELL_CODE||a&&x===d){L=x+1;break}for(x=0;x<L;x++){i.loadCell(x,this._workCell);var w=this._workCell.getWidth();if(w!==0){var b=!1,D=x,R=this._workCell;if(A.length>0&&x===A[0][0]){b=!0;var j=A.shift();R=new n.JoinedCellData(this._workCell,i.translateToString(!0,j[0],j[1]),j[1]-j[0]),D=j[1]-1,w=R.getWidth()}var B=this._document.createElement("span");if(w>1&&(B.style.width=y*w+"px"),b&&(B.style.display="inline",d>=x&&d<=D&&(d=x)),a&&x===d)switch(B.classList.add(l.CURSOR_CLASS),m&&B.classList.add(l.CURSOR_BLINK_CLASS),h){case"bar":B.classList.add(l.CURSOR_STYLE_BAR_CLASS);break;case"underline":B.classList.add(l.CURSOR_STYLE_UNDERLINE_CLASS);break;default:B.classList.add(l.CURSOR_STYLE_BLOCK_CLASS)}R.isBold()&&B.classList.add(l.BOLD_CLASS),R.isItalic()&&B.classList.add(l.ITALIC_CLASS),R.isDim()&&B.classList.add(l.DIM_CLASS),R.isUnderline()&&B.classList.add(l.UNDERLINE_CLASS),R.isInvisible()?B.textContent=f.WHITESPACE_CELL_CHAR:B.textContent=R.getChars()||f.WHITESPACE_CELL_CHAR;var F=R.getFgColor(),N=R.getFgColorMode(),V=R.getBgColor(),k=R.getBgColorMode(),O=!!R.isInverse();if(O){var T=F;F=V,V=T;var I=N;N=k,k=I}switch(N){case 16777216:case 33554432:R.isBold()&&F<8&&this._optionsService.options.drawBoldTextInBrightColors&&(F+=8),this._applyMinimumContrast(B,this._colors.background,this._colors.ansi[F])||B.classList.add("xterm-fg-"+F);break;case 50331648:var P=o.rgba.toColor(F>>16&255,F>>8&255,255&F);this._applyMinimumContrast(B,this._colors.background,P)||this._addStyle(B,"color:#"+r(F.toString(16),"0",6));break;case 0:default:this._applyMinimumContrast(B,this._colors.background,this._colors.foreground)||O&&B.classList.add("xterm-fg-"+_.INVERTED_DEFAULT_COLOR)}switch(k){case 16777216:case 33554432:B.classList.add("xterm-bg-"+V);break;case 50331648:this._addStyle(B,"background-color:#"+r(V.toString(16),"0",6));break;case 0:default:O&&B.classList.add("xterm-bg-"+_.INVERTED_DEFAULT_COLOR)}C.appendChild(B),x=D}}return C},e.prototype._applyMinimumContrast=function(i,s,a){if(this._optionsService.options.minimumContrastRatio===1)return!1;var h=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return h===void 0&&(h=o.color.ensureContrastRatio(s,a,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,h!=null?h:null)),!!h&&(this._addStyle(i,"color:"+h.css),!0)},e.prototype._addStyle=function(i,s){i.setAttribute("style",""+(i.getAttribute("style")||"")+s+";")},u([p(2,c.ICharacterJoinerService),p(3,v.IOptionsService)],e)}();function r(e,i,s){for(;e.length<s;)e=i+e;return e}l.DomRendererRowFactory=t},456:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionModel=void 0;var g=function(){function u(p){this._bufferService=p,this.isSelectAllActive=!1,this.selectionStartLength=0}return u.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(u.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var _=this.selectionStart[0]+this.selectionStartLength;return _>this._bufferService.cols?[_%this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)]:[_,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),u.prototype.areSelectionValuesReversed=function(){var p=this.selectionStart,_=this.selectionEnd;return!(!p||!_)&&(p[1]>_[1]||p[1]===_[1]&&p[0]>_[0])},u.prototype.onTrim=function(p){return this.selectionStart&&(this.selectionStart[1]-=p),this.selectionEnd&&(this.selectionEnd[1]-=p),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},u}();l.SelectionModel=g},428:function(H,l,g){var u=this&&this.__decorate||function(o,c,n,t){var r,e=arguments.length,i=e<3?c:t===null?t=Object.getOwnPropertyDescriptor(c,n):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,c,n,t);else for(var s=o.length-1;s>=0;s--)(r=o[s])&&(i=(e<3?r(i):e>3?r(c,n,i):r(c,n))||i);return e>3&&i&&Object.defineProperty(c,n,i),i},p=this&&this.__param||function(o,c){return function(n,t){c(n,t,o)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharSizeService=void 0;var _=g(2585),f=g(8460),E=function(){function o(c,n,t){this._optionsService=t,this.width=0,this.height=0,this._onCharSizeChange=new f.EventEmitter,this._measureStrategy=new v(c,n,this._optionsService)}return Object.defineProperty(o.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),o.prototype.measure=function(){var c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())},u([p(2,_.IOptionsService)],o)}();l.CharSizeService=E;var v=function(){function o(c,n,t){this._document=c,this._parentElement=n,this._optionsService=t,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return o.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var c=this._measureElement.getBoundingClientRect();return c.width!==0&&c.height!==0&&(this._result.width=c.width,this._result.height=Math.ceil(c.height)),this._result},o}()},4269:function(H,l,g){var u,p=this&&this.__extends||(u=function(e,i){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(s[h]=a[h])})(e,i)},function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=r}u(r,e),r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}),_=this&&this.__decorate||function(r,e,i,s){var a,h=arguments.length,d=h<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(r,e,i,s);else for(var m=r.length-1;m>=0;m--)(a=r[m])&&(d=(h<3?a(d):h>3?a(e,i,d):a(e,i))||d);return h>3&&d&&Object.defineProperty(e,i,d),d},f=this&&this.__param||function(r,e){return function(i,s){e(i,s,r)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;var E=g(3734),v=g(643),o=g(511),c=g(2585),n=function(r){function e(i,s,a){var h=r.call(this)||this;return h.content=0,h.combinedData="",h.fg=i.fg,h.bg=i.bg,h.combinedData=s,h._width=a,h}return p(e,r),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(i){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(E.AttributeData);l.JoinedCellData=n;var t=function(){function r(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new o.CellData}return r.prototype.register=function(e){var i={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(i),i.id},r.prototype.deregister=function(e){for(var i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===e)return this._characterJoiners.splice(i,1),!0;return!1},r.prototype.getJoinedCharacters=function(e){if(this._characterJoiners.length===0)return[];var i=this._bufferService.buffer.lines.get(e);if(!i||i.length===0)return[];for(var s=[],a=i.translateToString(!0),h=0,d=0,m=0,y=i.getFg(0),S=i.getBg(0),C=0;C<i.getTrimmedLength();C++)if(i.loadCell(C,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==y||this._workCell.bg!==S){if(C-h>1)for(var A=this._getJoinedRanges(a,m,d,i,h),L=0;L<A.length;L++)s.push(A[L]);h=C,m=d,y=this._workCell.fg,S=this._workCell.bg}d+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-h>1)for(A=this._getJoinedRanges(a,m,d,i,h),L=0;L<A.length;L++)s.push(A[L]);return s},r.prototype._getJoinedRanges=function(e,i,s,a,h){for(var d=e.substring(i,s),m=this._characterJoiners[0].handler(d),y=1;y<this._characterJoiners.length;y++)for(var S=this._characterJoiners[y].handler(d),C=0;C<S.length;C++)r._mergeRanges(m,S[C]);return this._stringRangesToCellRanges(m,a,h),m},r.prototype._stringRangesToCellRanges=function(e,i,s){var a=0,h=!1,d=0,m=e[a];if(m){for(var y=s;y<this._bufferService.cols;y++){var S=i.getWidth(y),C=i.getString(y).length||v.WHITESPACE_CELL_CHAR.length;if(S!==0){if(!h&&m[0]<=d&&(m[0]=y,h=!0),m[1]<=d){if(m[1]=y,!(m=e[++a]))break;m[0]<=d?(m[0]=y,h=!0):h=!1}d+=C}}m&&(m[1]=this._bufferService.cols)}},r._mergeRanges=function(e,i){for(var s=!1,a=0;a<e.length;a++){var h=e[a];if(s){if(i[1]<=h[0])return e[a-1][1]=i[1],e;if(i[1]<=h[1])return e[a-1][1]=Math.max(i[1],h[1]),e.splice(a,1),e;e.splice(a,1),a--}else{if(i[1]<=h[0])return e.splice(a,0,i),e;if(i[1]<=h[1])return h[0]=Math.min(i[0],h[0]),e;i[0]<h[1]&&(h[0]=Math.min(i[0],h[0]),s=!0)}}return s?e[e.length-1][1]=i[1]:e.push(i),e},r=_([f(0,c.IBufferService)],r)}();l.CharacterJoinerService=t},5114:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.CoreBrowserService=void 0;var g=function(){function u(p){this._textarea=p}return Object.defineProperty(u.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),u}();l.CoreBrowserService=g},8934:function(H,l,g){var u=this&&this.__decorate||function(v,o,c,n){var t,r=arguments.length,e=r<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,c):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(v,o,c,n);else for(var i=v.length-1;i>=0;i--)(t=v[i])&&(e=(r<3?t(e):r>3?t(o,c,e):t(o,c))||e);return r>3&&e&&Object.defineProperty(o,c,e),e},p=this&&this.__param||function(v,o){return function(c,n){o(c,n,v)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseService=void 0;var _=g(4725),f=g(9806),E=function(){function v(o,c){this._renderService=o,this._charSizeService=c}return v.prototype.getCoords=function(o,c,n,t,r){return f.getCoords(o,c,n,t,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,r)},v.prototype.getRawByteCoords=function(o,c,n,t){var r=this.getCoords(o,c,n,t);return f.getRawByteCoords(r)},u([p(0,_.IRenderService),p(1,_.ICharSizeService)],v)}();l.MouseService=E},3230:function(H,l,g){var u,p=this&&this.__extends||(u=function(s,a){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(h[m]=d[m])})(s,a)},function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=i}u(i,s),i.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}),_=this&&this.__decorate||function(i,s,a,h){var d,m=arguments.length,y=m<3?s:h===null?h=Object.getOwnPropertyDescriptor(s,a):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(i,s,a,h);else for(var S=i.length-1;S>=0;S--)(d=i[S])&&(y=(m<3?d(y):m>3?d(s,a,y):d(s,a))||y);return m>3&&y&&Object.defineProperty(s,a,y),y},f=this&&this.__param||function(i,s){return function(a,h){s(a,h,i)}};Object.defineProperty(l,"__esModule",{value:!0}),l.RenderService=void 0;var E=g(6193),v=g(8460),o=g(844),c=g(5596),n=g(3656),t=g(2585),r=g(4725),e=function(i){function s(a,h,d,m,y,S){var C=i.call(this)||this;if(C._renderer=a,C._rowCount=h,C._charSizeService=y,C._isPaused=!1,C._needsFullRefresh=!1,C._isNextRenderRedrawOnly=!0,C._needsSelectionRefresh=!1,C._canvasWidth=0,C._canvasHeight=0,C._selectionState={start:void 0,end:void 0,columnSelectMode:!1},C._onDimensionsChange=new v.EventEmitter,C._onRender=new v.EventEmitter,C._onRefreshRequest=new v.EventEmitter,C.register({dispose:function(){return C._renderer.dispose()}}),C._renderDebouncer=new E.RenderDebouncer(function(L,x){return C._renderRows(L,x)}),C.register(C._renderDebouncer),C._screenDprMonitor=new c.ScreenDprMonitor,C._screenDprMonitor.setListener(function(){return C.onDevicePixelRatioChange()}),C.register(C._screenDprMonitor),C.register(S.onResize(function(L){return C._fullRefresh()})),C.register(m.onOptionChange(function(){return C._renderer.onOptionsChanged()})),C.register(C._charSizeService.onCharSizeChange(function(){return C.onCharSizeChanged()})),C._renderer.onRequestRedraw(function(L){return C.refreshRows(L.start,L.end,!0)}),C.register(n.addDisposableDomListener(window,"resize",function(){return C.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var A=new IntersectionObserver(function(L){return C._onIntersectionChange(L[L.length-1])},{threshold:0});A.observe(d),C.register({dispose:function(){return A.disconnect()}})}return C}return p(s,i),Object.defineProperty(s.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),s.prototype._onIntersectionChange=function(a){this._isPaused=a.isIntersecting===void 0?a.intersectionRatio===0:!a.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},s.prototype.refreshRows=function(a,h,d){d===void 0&&(d=!1),this._isPaused?this._needsFullRefresh=!0:(d||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(a,h,this._rowCount))},s.prototype._renderRows=function(a,h){this._renderer.renderRows(a,h),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:a,end:h}),this._isNextRenderRedrawOnly=!0},s.prototype.resize=function(a,h){this._rowCount=h,this._fireOnCanvasResize()},s.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},s.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},s.prototype.dispose=function(){i.prototype.dispose.call(this)},s.prototype.setRenderer=function(a){var h=this;this._renderer.dispose(),this._renderer=a,this._renderer.onRequestRedraw(function(d){return h.refreshRows(d.start,d.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},s.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},s.prototype.setColors=function(a){this._renderer.setColors(a),this._fullRefresh()},s.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},s.prototype.onResize=function(a,h){this._renderer.onResize(a,h),this._fullRefresh()},s.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},s.prototype.onBlur=function(){this._renderer.onBlur()},s.prototype.onFocus=function(){this._renderer.onFocus()},s.prototype.onSelectionChanged=function(a,h,d){this._selectionState.start=a,this._selectionState.end=h,this._selectionState.columnSelectMode=d,this._renderer.onSelectionChanged(a,h,d)},s.prototype.onCursorMove=function(){this._renderer.onCursorMove()},s.prototype.clear=function(){this._renderer.clear()},_([f(3,t.IOptionsService),f(4,r.ICharSizeService),f(5,t.IBufferService)],s)}(o.Disposable);l.RenderService=e},9312:function(H,l,g){var u,p=this&&this.__extends||(u=function(y,S){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,A){C.__proto__=A}||function(C,A){for(var L in A)Object.prototype.hasOwnProperty.call(A,L)&&(C[L]=A[L])})(y,S)},function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function S(){this.constructor=m}u(m,y),m.prototype=y===null?Object.create(y):(S.prototype=y.prototype,new S)}),_=this&&this.__decorate||function(m,y,S,C){var A,L=arguments.length,x=L<3?y:C===null?C=Object.getOwnPropertyDescriptor(y,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(m,y,S,C);else for(var w=m.length-1;w>=0;w--)(A=m[w])&&(x=(L<3?A(x):L>3?A(y,S,x):A(y,S))||x);return L>3&&x&&Object.defineProperty(y,S,x),x},f=this&&this.__param||function(m,y){return function(S,C){y(S,C,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionService=void 0;var E=g(6114),v=g(456),o=g(511),c=g(8460),n=g(4725),t=g(2585),r=g(9806),e=g(9504),i=g(844),s=g(4841),a=String.fromCharCode(160),h=new RegExp(a,"g"),d=function(m){function y(S,C,A,L,x,w,b,D){var R=m.call(this)||this;return R._element=S,R._screenElement=C,R._linkifier=A,R._bufferService=L,R._coreService=x,R._mouseService=w,R._optionsService=b,R._renderService=D,R._dragScrollAmount=0,R._enabled=!0,R._workCell=new o.CellData,R._mouseDownTimeStamp=0,R._oldHasSelection=!1,R._oldSelectionStart=void 0,R._oldSelectionEnd=void 0,R._onLinuxMouseSelection=R.register(new c.EventEmitter),R._onRedrawRequest=R.register(new c.EventEmitter),R._onSelectionChange=R.register(new c.EventEmitter),R._onRequestScrollLines=R.register(new c.EventEmitter),R._mouseMoveListener=function(j){return R._onMouseMove(j)},R._mouseUpListener=function(j){return R._onMouseUp(j)},R._coreService.onUserInput(function(){R.hasSelection&&R.clearSelection()}),R._trimListener=R._bufferService.buffer.lines.onTrim(function(j){return R._onTrim(j)}),R.register(R._bufferService.buffers.onBufferActivate(function(j){return R._onBufferActivate(j)})),R.enable(),R._model=new v.SelectionModel(R._bufferService),R._activeSelectionMode=0,R}return p(y,m),Object.defineProperty(y.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),y.prototype.dispose=function(){this._removeMouseDownListeners()},y.prototype.reset=function(){this.clearSelection()},y.prototype.disable=function(){this.clearSelection(),this._enabled=!1},y.prototype.enable=function(){this._enabled=!0},Object.defineProperty(y.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"hasSelection",{get:function(){var C=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!C||!A||C[0]===A[0]&&C[1]===A[1])},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"selectionText",{get:function(){var C=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;if(!C||!A)return"";var L=this._bufferService.buffer,x=[];if(this._activeSelectionMode===3){if(C[0]===A[0])return"";for(var w=C[1];w<=A[1];w++){var b=L.translateBufferLineToString(w,!0,C[0],A[0]);x.push(b)}}else{var D=C[1]===A[1]?A[0]:void 0;for(x.push(L.translateBufferLineToString(C[1],!0,C[0],D)),w=C[1]+1;w<=A[1]-1;w++){var R=L.lines.get(w);b=L.translateBufferLineToString(w,!0),R&&R.isWrapped?x[x.length-1]+=b:x.push(b)}C[1]!==A[1]&&(R=L.lines.get(A[1]),b=L.translateBufferLineToString(A[1],!0,0,A[0]),R&&R.isWrapped?x[x.length-1]+=b:x.push(b))}return x.map(function(j){return j.replace(h," ")}).join(E.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),y.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},y.prototype.refresh=function(S){var C=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return C._refresh()})),E.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},y.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},y.prototype._isClickInSelection=function(S){var C=this._getMouseBufferCoords(S),A=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!!(A&&L&&C)&&this._areCoordsInSelection(C,A,L)},y.prototype._areCoordsInSelection=function(S,C,A){return S[1]>C[1]&&S[1]<A[1]||C[1]===A[1]&&S[1]===C[1]&&S[0]>=C[0]&&S[0]<A[0]||C[1]<A[1]&&S[1]===A[1]&&S[0]<A[0]||C[1]<A[1]&&S[1]===C[1]&&S[0]>=C[0]},y.prototype._selectWordAtCursor=function(S,C){var A,L,x=(L=(A=this._linkifier.currentLink)===null||A===void 0?void 0:A.link)===null||L===void 0?void 0:L.range;if(x)return this._model.selectionStart=[x.start.x-1,x.start.y-1],this._model.selectionStartLength=s.getRangeLength(x,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var w=this._getMouseBufferCoords(S);return!!w&&(this._selectWordAt(w,C),this._model.selectionEnd=void 0,!0)},y.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},y.prototype.selectLines=function(S,C){this._model.clearSelection(),S=Math.max(S,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()},y.prototype._onTrim=function(S){this._model.onTrim(S)&&this.refresh()},y.prototype._getMouseBufferCoords=function(S){var C=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C},y.prototype._getMouseEventScrollAmount=function(S){var C=r.getCoordsRelativeToElement(S,this._screenElement)[1],A=this._renderService.dimensions.canvasHeight;return C>=0&&C<=A?0:(C>A&&(C-=A),C=Math.min(Math.max(C,-50),50),(C/=50)/Math.abs(C)+Math.round(14*C))},y.prototype.shouldForceSelection=function(S){return E.isMac?S.altKey&&this._optionsService.options.macOptionClickForcesSelection:S.shiftKey},y.prototype.onMouseDown=function(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._onIncrementalClick(S):S.detail===1?this._onSingleClick(S):S.detail===2?this._onDoubleClick(S):S.detail===3&&this._onTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}},y.prototype._addMouseDownListeners=function(){var S=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return S._dragScroll()},50)},y.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},y.prototype._onIncrementalClick=function(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))},y.prototype._onSingleClick=function(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),this._model.selectionStart){this._model.selectionEnd=void 0;var C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&C.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},y.prototype._onDoubleClick=function(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)},y.prototype._onTripleClick=function(S){var C=this._getMouseBufferCoords(S);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))},y.prototype.shouldColumnSelect=function(S){return S.altKey&&!(E.isMac&&this._optionsService.options.macOptionClickForcesSelection)},y.prototype._onMouseMove=function(S){if(S.stopImmediatePropagation(),this._model.selectionStart){var C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var A=this._bufferService.buffer;if(this._model.selectionEnd[1]<A.lines.length){var L=A.lines.get(this._model.selectionEnd[1]);L&&L.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},y.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}},y.prototype._onMouseUp=function(S){var C=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&S.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var A=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(A&&A[0]!==void 0&&A[1]!==void 0){var L=e.moveToCellSequence(A[0]-1,A[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(L,!0)}}}else this._fireEventIfSelectionChanged()},y.prototype._fireEventIfSelectionChanged=function(){var S=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,A=!(!S||!C||S[0]===C[0]&&S[1]===C[1]);A?S&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,C,A)):this._oldHasSelection&&this._fireOnSelectionChange(S,C,A)},y.prototype._fireOnSelectionChange=function(S,C,A){this._oldSelectionStart=S,this._oldSelectionEnd=C,this._oldHasSelection=A,this._onSelectionChange.fire()},y.prototype._onBufferActivate=function(S){var C=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(function(A){return C._onTrim(A)})},y.prototype._convertViewportColToCharacterIndex=function(S,C){for(var A=C[0],L=0;C[0]>=L;L++){var x=S.loadCell(L,this._workCell).getChars().length;this._workCell.getWidth()===0?A--:x>1&&C[0]!==L&&(A+=x-1)}return A},y.prototype.setSelection=function(S,C,A){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,C],this._model.selectionStartLength=A,this.refresh()},y.prototype.rightClickSelect=function(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},y.prototype._getWordAt=function(S,C,A,L){if(A===void 0&&(A=!0),L===void 0&&(L=!0),!(S[0]>=this._bufferService.cols)){var x=this._bufferService.buffer,w=x.lines.get(S[1]);if(w){var b=x.translateBufferLineToString(S[1],!1),D=this._convertViewportColToCharacterIndex(w,S),R=D,j=S[0]-D,B=0,F=0,N=0,V=0;if(b.charAt(D)===" "){for(;D>0&&b.charAt(D-1)===" ";)D--;for(;R<b.length&&b.charAt(R+1)===" ";)R++}else{var k=S[0],O=S[0];w.getWidth(k)===0&&(B++,k--),w.getWidth(O)===2&&(F++,O++);var T=w.getString(O).length;for(T>1&&(V+=T-1,R+=T-1);k>0&&D>0&&!this._isCharWordSeparator(w.loadCell(k-1,this._workCell));){w.loadCell(k-1,this._workCell);var I=this._workCell.getChars().length;this._workCell.getWidth()===0?(B++,k--):I>1&&(N+=I-1,D-=I-1),D--,k--}for(;O<w.length&&R+1<b.length&&!this._isCharWordSeparator(w.loadCell(O+1,this._workCell));){w.loadCell(O+1,this._workCell);var P=this._workCell.getChars().length;this._workCell.getWidth()===2?(F++,O++):P>1&&(V+=P-1,R+=P-1),R++,O++}}R++;var W=D+j-B+N,U=Math.min(this._bufferService.cols,R-D+B+F-N-V);if(C||b.slice(D,R).trim()!==""){if(A&&W===0&&w.getCodePoint(0)!==32){var Y=x.lines.get(S[1]-1);if(Y&&w.isWrapped&&Y.getCodePoint(this._bufferService.cols-1)!==32){var $=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if($){var Q=this._bufferService.cols-$.start;W-=Q,U+=Q}}}if(L&&W+U===this._bufferService.cols&&w.getCodePoint(this._bufferService.cols-1)!==32){var q=x.lines.get(S[1]+1);if(q&&q.isWrapped&&q.getCodePoint(0)!==32){var G=this._getWordAt([0,S[1]+1],!1,!1,!0);G&&(U+=G.length)}}return{start:W,length:U}}}}},y.prototype._selectWordAt=function(S,C){var A=this._getWordAt(S,C);if(A){for(;A.start<0;)A.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[A.start,S[1]],this._model.selectionStartLength=A.length}},y.prototype._selectToWordAt=function(S){var C=this._getWordAt(S,!0);if(C){for(var A=S[1];C.start<0;)C.start+=this._bufferService.cols,A--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,A++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,A]}},y.prototype._isCharWordSeparator=function(S){return S.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(S.getChars())>=0},y.prototype._selectLineAt=function(S){var C=this._bufferService.buffer.getWrappedRangeForLine(S);this._model.selectionStart=[0,C.first],this._model.selectionEnd=[this._bufferService.cols,C.last],this._model.selectionStartLength=0},_([f(3,t.IBufferService),f(4,t.ICoreService),f(5,n.IMouseService),f(6,t.IOptionsService),f(7,n.IRenderService)],y)}(i.Disposable);l.SelectionService=d},4725:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.ICharacterJoinerService=l.ISoundService=l.ISelectionService=l.IRenderService=l.IMouseService=l.ICoreBrowserService=l.ICharSizeService=void 0;var u=g(8343);l.ICharSizeService=u.createDecorator("CharSizeService"),l.ICoreBrowserService=u.createDecorator("CoreBrowserService"),l.IMouseService=u.createDecorator("MouseService"),l.IRenderService=u.createDecorator("RenderService"),l.ISelectionService=u.createDecorator("SelectionService"),l.ISoundService=u.createDecorator("SoundService"),l.ICharacterJoinerService=u.createDecorator("CharacterJoinerService")},357:function(H,l,g){var u=this&&this.__decorate||function(E,v,o,c){var n,t=arguments.length,r=t<3?v:c===null?c=Object.getOwnPropertyDescriptor(v,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(E,v,o,c);else for(var e=E.length-1;e>=0;e--)(n=E[e])&&(r=(t<3?n(r):t>3?n(v,o,r):n(v,o))||r);return t>3&&r&&Object.defineProperty(v,o,r),r},p=this&&this.__param||function(E,v){return function(o,c){v(o,c,E)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SoundService=void 0;var _=g(2585),f=function(){function E(v){this._optionsService=v}return Object.defineProperty(E,"audioContext",{get:function(){if(!E._audioContext){var o=window.AudioContext||window.webkitAudioContext;if(!o)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;E._audioContext=new o}return E._audioContext},enumerable:!1,configurable:!0}),E.prototype.playBellSound=function(){var v=E.audioContext;if(v){var o=v.createBufferSource();v.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(c){o.buffer=c,o.connect(v.destination),o.start(0)})}},E.prototype._base64ToArrayBuffer=function(v){for(var o=window.atob(v),c=o.length,n=new Uint8Array(c),t=0;t<c;t++)n[t]=o.charCodeAt(t);return n.buffer},E.prototype._removeMimeType=function(v){return v.split(",")[1]},E=u([p(0,_.IOptionsService)],E)}();l.SoundService=f},6349:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.CircularList=void 0;var u=g(8460),p=function(){function _(f){this._maxLength=f,this.onDeleteEmitter=new u.EventEmitter,this.onInsertEmitter=new u.EventEmitter,this.onTrimEmitter=new u.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(_.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"maxLength",{get:function(){return this._maxLength},set:function(E){if(this._maxLength!==E){for(var v=new Array(E),o=0;o<Math.min(E,this.length);o++)v[o]=this._array[this._getCyclicIndex(o)];this._array=v,this._maxLength=E,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"length",{get:function(){return this._length},set:function(E){if(E>this._length)for(var v=this._length;v<E;v++)this._array[v]=void 0;this._length=E},enumerable:!1,configurable:!0}),_.prototype.get=function(f){return this._array[this._getCyclicIndex(f)]},_.prototype.set=function(f,E){this._array[this._getCyclicIndex(f)]=E},_.prototype.push=function(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},_.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(_.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),_.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},_.prototype.splice=function(f,E){for(var v=[],o=2;o<arguments.length;o++)v[o-2]=arguments[o];if(E){for(var c=f;c<this._length-E;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+E)];this._length-=E,this.onDeleteEmitter.fire({index:f,amount:E})}for(c=this._length-1;c>=f;c--)this._array[this._getCyclicIndex(c+v.length)]=this._array[this._getCyclicIndex(c)];for(c=0;c<v.length;c++)this._array[this._getCyclicIndex(f+c)]=v[c];if(v.length&&this.onInsertEmitter.fire({index:f,amount:v.length}),this._length+v.length>this._maxLength){var n=this._length+v.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=v.length},_.prototype.trimStart=function(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)},_.prototype.shiftElements=function(f,E,v){if(!(E<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(var o=E-1;o>=0;o--)this.set(f+o+v,this.get(f+o));var c=f+E+v-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(o=0;o<E;o++)this.set(f+o+v,this.get(f+o))}},_.prototype._getCyclicIndex=function(f){return(this._startIndex+f)%this._maxLength},_}();l.CircularList=p},1439:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.clone=void 0,l.clone=function g(u,p){if(p===void 0&&(p=5),typeof u!="object")return u;var _=Array.isArray(u)?[]:{};for(var f in u)_[f]=p<=1?u[f]:u[f]&&g(u[f],p-1);return _}},8969:function(H,l,g){var u,p=this&&this.__extends||(u=function(C,A){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,x){L.__proto__=x}||function(L,x){for(var w in x)Object.prototype.hasOwnProperty.call(x,w)&&(L[w]=x[w])})(C,A)},function(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function A(){this.constructor=S}u(S,C),S.prototype=C===null?Object.create(C):(A.prototype=C.prototype,new A)});Object.defineProperty(l,"__esModule",{value:!0}),l.CoreTerminal=void 0;var _=g(844),f=g(2585),E=g(4348),v=g(7866),o=g(744),c=g(7302),n=g(6975),t=g(8460),r=g(1753),e=g(3730),i=g(1480),s=g(7994),a=g(9282),h=g(5435),d=g(5981),m=!1,y=function(S){function C(A){var L=S.call(this)||this;return L._onBinary=new t.EventEmitter,L._onData=new t.EventEmitter,L._onLineFeed=new t.EventEmitter,L._onResize=new t.EventEmitter,L._onScroll=new t.EventEmitter,L._instantiationService=new E.InstantiationService,L.optionsService=new c.OptionsService(A),L._instantiationService.setService(f.IOptionsService,L.optionsService),L._bufferService=L.register(L._instantiationService.createInstance(o.BufferService)),L._instantiationService.setService(f.IBufferService,L._bufferService),L._logService=L._instantiationService.createInstance(v.LogService),L._instantiationService.setService(f.ILogService,L._logService),L._coreService=L.register(L._instantiationService.createInstance(n.CoreService,function(){return L.scrollToBottom()})),L._instantiationService.setService(f.ICoreService,L._coreService),L._coreMouseService=L._instantiationService.createInstance(r.CoreMouseService),L._instantiationService.setService(f.ICoreMouseService,L._coreMouseService),L._dirtyRowService=L._instantiationService.createInstance(e.DirtyRowService),L._instantiationService.setService(f.IDirtyRowService,L._dirtyRowService),L.unicodeService=L._instantiationService.createInstance(i.UnicodeService),L._instantiationService.setService(f.IUnicodeService,L.unicodeService),L._charsetService=L._instantiationService.createInstance(s.CharsetService),L._instantiationService.setService(f.ICharsetService,L._charsetService),L._inputHandler=new h.InputHandler(L._bufferService,L._charsetService,L._coreService,L._dirtyRowService,L._logService,L.optionsService,L._coreMouseService,L.unicodeService),L.register(t.forwardEvent(L._inputHandler.onLineFeed,L._onLineFeed)),L.register(L._inputHandler),L.register(t.forwardEvent(L._bufferService.onResize,L._onResize)),L.register(t.forwardEvent(L._coreService.onData,L._onData)),L.register(t.forwardEvent(L._coreService.onBinary,L._onBinary)),L.register(L.optionsService.onOptionChange(function(x){return L._updateOptions(x)})),L.register(L._bufferService.onScroll(function(x){L._onScroll.fire({position:L._bufferService.buffer.ydisp,source:0}),L._dirtyRowService.markRangeDirty(L._bufferService.buffer.scrollTop,L._bufferService.buffer.scrollBottom)})),L._writeBuffer=new d.WriteBuffer(function(x,w){return L._inputHandler.parse(x,w)}),L}return p(C,S),Object.defineProperty(C.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onScroll",{get:function(){var L=this;return this._onScrollApi||(this._onScrollApi=new t.EventEmitter,this.register(this._onScroll.event(function(x){var w;(w=L._onScrollApi)===null||w===void 0||w.fire(x.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){var A;this._isDisposed||(S.prototype.dispose.call(this),(A=this._windowsMode)===null||A===void 0||A.dispose(),this._windowsMode=void 0)},C.prototype.write=function(A,L){this._writeBuffer.write(A,L)},C.prototype.writeSync=function(A,L){this._logService.logLevel<=f.LogLevelEnum.WARN&&!m&&(this._logService.warn("writeSync is unreliable and will be removed soon."),m=!0),this._writeBuffer.writeSync(A,L)},C.prototype.resize=function(A,L){isNaN(A)||isNaN(L)||(A=Math.max(A,o.MINIMUM_COLS),L=Math.max(L,o.MINIMUM_ROWS),this._bufferService.resize(A,L))},C.prototype.scroll=function(A,L){L===void 0&&(L=!1),this._bufferService.scroll(A,L)},C.prototype.scrollLines=function(A,L,x){this._bufferService.scrollLines(A,L,x)},C.prototype.scrollPages=function(A){this._bufferService.scrollPages(A)},C.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},C.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},C.prototype.scrollToLine=function(A){this._bufferService.scrollToLine(A)},C.prototype.registerEscHandler=function(A,L){return this._inputHandler.registerEscHandler(A,L)},C.prototype.registerDcsHandler=function(A,L){return this._inputHandler.registerDcsHandler(A,L)},C.prototype.registerCsiHandler=function(A,L){return this._inputHandler.registerCsiHandler(A,L)},C.prototype.registerOscHandler=function(A,L){return this._inputHandler.registerOscHandler(A,L)},C.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},C.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this._coreService.reset(),this._coreMouseService.reset()},C.prototype._updateOptions=function(A){var L;switch(A){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():((L=this._windowsMode)===null||L===void 0||L.dispose(),this._windowsMode=void 0)}},C.prototype._enableWindowsMode=function(){var A=this;if(!this._windowsMode){var L=[];L.push(this.onLineFeed(a.updateWindowsModeWrappedState.bind(null,this._bufferService))),L.push(this.registerCsiHandler({final:"H"},function(){return a.updateWindowsModeWrappedState(A._bufferService),!1})),this._windowsMode={dispose:function(){for(var w=0,b=L;w<b.length;w++)b[w].dispose()}}}},C}(_.Disposable);l.CoreTerminal=y},8460:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.forwardEvent=l.EventEmitter=void 0;var g=function(){function u(){this._listeners=[],this._disposed=!1}return Object.defineProperty(u.prototype,"event",{get:function(){var _=this;return this._event||(this._event=function(f){return _._listeners.push(f),{dispose:function(){if(!_._disposed){for(var v=0;v<_._listeners.length;v++)if(_._listeners[v]===f)return void _._listeners.splice(v,1)}}}}),this._event},enumerable:!1,configurable:!0}),u.prototype.fire=function(p,_){for(var f=[],E=0;E<this._listeners.length;E++)f.push(this._listeners[E]);for(E=0;E<f.length;E++)f[E].call(void 0,p,_)},u.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},u}();l.EventEmitter=g,l.forwardEvent=function(u,p){return u(function(_){return p.fire(_)})}},5435:function(H,l,g){var u,p=this&&this.__extends||(u=function(x,w){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,D){b.__proto__=D}||function(b,D){for(var R in D)Object.prototype.hasOwnProperty.call(D,R)&&(b[R]=D[R])})(x,w)},function(L,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function w(){this.constructor=L}u(L,x),L.prototype=x===null?Object.create(x):(w.prototype=x.prototype,new w)});Object.defineProperty(l,"__esModule",{value:!0}),l.InputHandler=l.WindowsOptionsReportType=void 0;var _,f=g(2584),E=g(7116),v=g(2015),o=g(844),c=g(8273),n=g(482),t=g(8437),r=g(8460),e=g(643),i=g(511),s=g(3734),a=g(2585),h=g(6242),d=g(6351),m={"(":0,")":1,"*":2,"+":3,"-":1,".":2},y=131072;function S(L,x){if(L>24)return x.setWinLines||!1;switch(L){case 1:return!!x.restoreWin;case 2:return!!x.minimizeWin;case 3:return!!x.setWinPosition;case 4:return!!x.setWinSizePixels;case 5:return!!x.raiseWin;case 6:return!!x.lowerWin;case 7:return!!x.refreshWin;case 8:return!!x.setWinSizeChars;case 9:return!!x.maximizeWin;case 10:return!!x.fullscreenWin;case 11:return!!x.getWinState;case 13:return!!x.getWinPosition;case 14:return!!x.getWinSizePixels;case 15:return!!x.getScreenSizePixels;case 16:return!!x.getCellSizePixels;case 18:return!!x.getWinSizeChars;case 19:return!!x.getScreenSizeChars;case 20:return!!x.getIconTitle;case 21:return!!x.getWinTitle;case 22:return!!x.pushTitle;case 23:return!!x.popTitle;case 24:return!!x.setWinLines}return!1}(function(L){L[L.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",L[L.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(_=l.WindowsOptionsReportType||(l.WindowsOptionsReportType={}));var C=function(){function L(x,w,b,D){this._bufferService=x,this._coreService=w,this._logService=b,this._optionsService=D,this._data=new Uint32Array(0)}return L.prototype.hook=function(x){this._data=new Uint32Array(0)},L.prototype.put=function(x,w,b){this._data=c.concat(this._data,x.subarray(w,b))},L.prototype.unhook=function(x){if(!x)return this._data=new Uint32Array(0),!0;var w=n.utf32ToString(this._data);switch(this._data=new Uint32Array(0),w){case'"q':this._coreService.triggerDataEvent(f.C0.ESC+'P1$r0"q'+f.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(f.C0.ESC+'P1$r61;1"p'+f.C0.ESC+"\\");break;case"r":var b=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(f.C0.ESC+"P1$r"+b+f.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(f.C0.ESC+"P1$r0m"+f.C0.ESC+"\\");break;case" q":var D={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];D-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(f.C0.ESC+"P1$r"+D+" q"+f.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",w),this._coreService.triggerDataEvent(f.C0.ESC+"P0$r"+f.C0.ESC+"\\")}return!0},L}(),A=function(L){function x(w,b,D,R,j,B,F,N,V){V===void 0&&(V=new v.EscapeSequenceParser);var k=L.call(this)||this;k._bufferService=w,k._charsetService=b,k._coreService=D,k._dirtyRowService=R,k._logService=j,k._optionsService=B,k._coreMouseService=F,k._unicodeService=N,k._parser=V,k._parseBuffer=new Uint32Array(4096),k._stringDecoder=new n.StringToUtf32,k._utf8Decoder=new n.Utf8ToUtf32,k._workCell=new i.CellData,k._windowTitle="",k._iconName="",k._windowTitleStack=[],k._iconNameStack=[],k._curAttrData=t.DEFAULT_ATTR_DATA.clone(),k._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone(),k._onRequestBell=new r.EventEmitter,k._onRequestRefreshRows=new r.EventEmitter,k._onRequestReset=new r.EventEmitter,k._onRequestSyncScrollBar=new r.EventEmitter,k._onRequestWindowsOptionsReport=new r.EventEmitter,k._onA11yChar=new r.EventEmitter,k._onA11yTab=new r.EventEmitter,k._onCursorMove=new r.EventEmitter,k._onLineFeed=new r.EventEmitter,k._onScroll=new r.EventEmitter,k._onTitleChange=new r.EventEmitter,k._onAnsiColorChange=new r.EventEmitter,k._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},k.register(k._parser),k._parser.setCsiHandlerFallback(function(P,W){k._logService.debug("Unknown CSI code: ",{identifier:k._parser.identToString(P),params:W.toArray()})}),k._parser.setEscHandlerFallback(function(P){k._logService.debug("Unknown ESC code: ",{identifier:k._parser.identToString(P)})}),k._parser.setExecuteHandlerFallback(function(P){k._logService.debug("Unknown EXECUTE code: ",{code:P})}),k._parser.setOscHandlerFallback(function(P,W,U){k._logService.debug("Unknown OSC code: ",{identifier:P,action:W,data:U})}),k._parser.setDcsHandlerFallback(function(P,W,U){W==="HOOK"&&(U=U.toArray()),k._logService.debug("Unknown DCS code: ",{identifier:k._parser.identToString(P),action:W,payload:U})}),k._parser.setPrintHandler(function(P,W,U){return k.print(P,W,U)}),k._parser.registerCsiHandler({final:"@"},function(P){return k.insertChars(P)}),k._parser.registerCsiHandler({intermediates:" ",final:"@"},function(P){return k.scrollLeft(P)}),k._parser.registerCsiHandler({final:"A"},function(P){return k.cursorUp(P)}),k._parser.registerCsiHandler({intermediates:" ",final:"A"},function(P){return k.scrollRight(P)}),k._parser.registerCsiHandler({final:"B"},function(P){return k.cursorDown(P)}),k._parser.registerCsiHandler({final:"C"},function(P){return k.cursorForward(P)}),k._parser.registerCsiHandler({final:"D"},function(P){return k.cursorBackward(P)}),k._parser.registerCsiHandler({final:"E"},function(P){return k.cursorNextLine(P)}),k._parser.registerCsiHandler({final:"F"},function(P){return k.cursorPrecedingLine(P)}),k._parser.registerCsiHandler({final:"G"},function(P){return k.cursorCharAbsolute(P)}),k._parser.registerCsiHandler({final:"H"},function(P){return k.cursorPosition(P)}),k._parser.registerCsiHandler({final:"I"},function(P){return k.cursorForwardTab(P)}),k._parser.registerCsiHandler({final:"J"},function(P){return k.eraseInDisplay(P)}),k._parser.registerCsiHandler({prefix:"?",final:"J"},function(P){return k.eraseInDisplay(P)}),k._parser.registerCsiHandler({final:"K"},function(P){return k.eraseInLine(P)}),k._parser.registerCsiHandler({prefix:"?",final:"K"},function(P){return k.eraseInLine(P)}),k._parser.registerCsiHandler({final:"L"},function(P){return k.insertLines(P)}),k._parser.registerCsiHandler({final:"M"},function(P){return k.deleteLines(P)}),k._parser.registerCsiHandler({final:"P"},function(P){return k.deleteChars(P)}),k._parser.registerCsiHandler({final:"S"},function(P){return k.scrollUp(P)}),k._parser.registerCsiHandler({final:"T"},function(P){return k.scrollDown(P)}),k._parser.registerCsiHandler({final:"X"},function(P){return k.eraseChars(P)}),k._parser.registerCsiHandler({final:"Z"},function(P){return k.cursorBackwardTab(P)}),k._parser.registerCsiHandler({final:"`"},function(P){return k.charPosAbsolute(P)}),k._parser.registerCsiHandler({final:"a"},function(P){return k.hPositionRelative(P)}),k._parser.registerCsiHandler({final:"b"},function(P){return k.repeatPrecedingCharacter(P)}),k._parser.registerCsiHandler({final:"c"},function(P){return k.sendDeviceAttributesPrimary(P)}),k._parser.registerCsiHandler({prefix:">",final:"c"},function(P){return k.sendDeviceAttributesSecondary(P)}),k._parser.registerCsiHandler({final:"d"},function(P){return k.linePosAbsolute(P)}),k._parser.registerCsiHandler({final:"e"},function(P){return k.vPositionRelative(P)}),k._parser.registerCsiHandler({final:"f"},function(P){return k.hVPosition(P)}),k._parser.registerCsiHandler({final:"g"},function(P){return k.tabClear(P)}),k._parser.registerCsiHandler({final:"h"},function(P){return k.setMode(P)}),k._parser.registerCsiHandler({prefix:"?",final:"h"},function(P){return k.setModePrivate(P)}),k._parser.registerCsiHandler({final:"l"},function(P){return k.resetMode(P)}),k._parser.registerCsiHandler({prefix:"?",final:"l"},function(P){return k.resetModePrivate(P)}),k._parser.registerCsiHandler({final:"m"},function(P){return k.charAttributes(P)}),k._parser.registerCsiHandler({final:"n"},function(P){return k.deviceStatus(P)}),k._parser.registerCsiHandler({prefix:"?",final:"n"},function(P){return k.deviceStatusPrivate(P)}),k._parser.registerCsiHandler({intermediates:"!",final:"p"},function(P){return k.softReset(P)}),k._parser.registerCsiHandler({intermediates:" ",final:"q"},function(P){return k.setCursorStyle(P)}),k._parser.registerCsiHandler({final:"r"},function(P){return k.setScrollRegion(P)}),k._parser.registerCsiHandler({final:"s"},function(P){return k.saveCursor(P)}),k._parser.registerCsiHandler({final:"t"},function(P){return k.windowOptions(P)}),k._parser.registerCsiHandler({final:"u"},function(P){return k.restoreCursor(P)}),k._parser.registerCsiHandler({intermediates:"'",final:"}"},function(P){return k.insertColumns(P)}),k._parser.registerCsiHandler({intermediates:"'",final:"~"},function(P){return k.deleteColumns(P)}),k._parser.setExecuteHandler(f.C0.BEL,function(){return k.bell()}),k._parser.setExecuteHandler(f.C0.LF,function(){return k.lineFeed()}),k._parser.setExecuteHandler(f.C0.VT,function(){return k.lineFeed()}),k._parser.setExecuteHandler(f.C0.FF,function(){return k.lineFeed()}),k._parser.setExecuteHandler(f.C0.CR,function(){return k.carriageReturn()}),k._parser.setExecuteHandler(f.C0.BS,function(){return k.backspace()}),k._parser.setExecuteHandler(f.C0.HT,function(){return k.tab()}),k._parser.setExecuteHandler(f.C0.SO,function(){return k.shiftOut()}),k._parser.setExecuteHandler(f.C0.SI,function(){return k.shiftIn()}),k._parser.setExecuteHandler(f.C1.IND,function(){return k.index()}),k._parser.setExecuteHandler(f.C1.NEL,function(){return k.nextLine()}),k._parser.setExecuteHandler(f.C1.HTS,function(){return k.tabSet()}),k._parser.registerOscHandler(0,new h.OscHandler(function(P){return k.setTitle(P),k.setIconName(P),!0})),k._parser.registerOscHandler(1,new h.OscHandler(function(P){return k.setIconName(P)})),k._parser.registerOscHandler(2,new h.OscHandler(function(P){return k.setTitle(P)})),k._parser.registerOscHandler(4,new h.OscHandler(function(P){return k.setAnsiColor(P)})),k._parser.registerEscHandler({final:"7"},function(){return k.saveCursor()}),k._parser.registerEscHandler({final:"8"},function(){return k.restoreCursor()}),k._parser.registerEscHandler({final:"D"},function(){return k.index()}),k._parser.registerEscHandler({final:"E"},function(){return k.nextLine()}),k._parser.registerEscHandler({final:"H"},function(){return k.tabSet()}),k._parser.registerEscHandler({final:"M"},function(){return k.reverseIndex()}),k._parser.registerEscHandler({final:"="},function(){return k.keypadApplicationMode()}),k._parser.registerEscHandler({final:">"},function(){return k.keypadNumericMode()}),k._parser.registerEscHandler({final:"c"},function(){return k.fullReset()}),k._parser.registerEscHandler({final:"n"},function(){return k.setgLevel(2)}),k._parser.registerEscHandler({final:"o"},function(){return k.setgLevel(3)}),k._parser.registerEscHandler({final:"|"},function(){return k.setgLevel(3)}),k._parser.registerEscHandler({final:"}"},function(){return k.setgLevel(2)}),k._parser.registerEscHandler({final:"~"},function(){return k.setgLevel(1)}),k._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return k.selectDefaultCharset()}),k._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return k.selectDefaultCharset()});var O=function(W){T._parser.registerEscHandler({intermediates:"(",final:W},function(){return k.selectCharset("("+W)}),T._parser.registerEscHandler({intermediates:")",final:W},function(){return k.selectCharset(")"+W)}),T._parser.registerEscHandler({intermediates:"*",final:W},function(){return k.selectCharset("*"+W)}),T._parser.registerEscHandler({intermediates:"+",final:W},function(){return k.selectCharset("+"+W)}),T._parser.registerEscHandler({intermediates:"-",final:W},function(){return k.selectCharset("-"+W)}),T._parser.registerEscHandler({intermediates:".",final:W},function(){return k.selectCharset("."+W)}),T._parser.registerEscHandler({intermediates:"/",final:W},function(){return k.selectCharset("/"+W)})},T=this;for(var I in E.CHARSETS)O(I);return k._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return k.screenAlignmentPattern()}),k._parser.setErrorHandler(function(P){return k._logService.error("Parsing error: ",P),P}),k._parser.registerDcsHandler({intermediates:"$",final:"q"},new C(k._bufferService,k._coreService,k._logService,k._optionsService)),k}return p(x,L),Object.defineProperty(x.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onAnsiColorChange",{get:function(){return this._onAnsiColorChange.event},enumerable:!1,configurable:!0}),x.prototype.dispose=function(){L.prototype.dispose.call(this)},x.prototype._preserveStack=function(w,b,D,R){this._parseStack.paused=!0,this._parseStack.cursorStartX=w,this._parseStack.cursorStartY=b,this._parseStack.decodedLength=D,this._parseStack.position=R},x.prototype._logSlowResolvingAsync=function(w){this._logService.logLevel<=a.LogLevelEnum.WARN&&Promise.race([w,new Promise(function(b,D){return setTimeout(function(){return D("#SLOW_TIMEOUT")},5e3)})]).catch(function(b){if(b!=="#SLOW_TIMEOUT")throw b;console.warn("async parser handler taking longer than 5000 ms")})},x.prototype.parse=function(w,b){var D,R=this._bufferService.buffer,j=R.x,B=R.y,F=0,N=this._parseStack.paused;if(N){if(D=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,b))return this._logSlowResolvingAsync(D),D;j=this._parseStack.cursorStartX,B=this._parseStack.cursorStartY,this._parseStack.paused=!1,w.length>y&&(F=this._parseStack.position+y)}if(this._logService.debug("parsing data",w),this._parseBuffer.length<w.length&&this._parseBuffer.length<y&&(this._parseBuffer=new Uint32Array(Math.min(w.length,y))),N||this._dirtyRowService.clearRange(),w.length>y)for(var V=F;V<w.length;V+=y){var k=V+y<w.length?V+y:w.length,O=typeof w=="string"?this._stringDecoder.decode(w.substring(V,k),this._parseBuffer):this._utf8Decoder.decode(w.subarray(V,k),this._parseBuffer);if(D=this._parser.parse(this._parseBuffer,O))return this._preserveStack(j,B,O,V),this._logSlowResolvingAsync(D),D}else if(!N&&(O=typeof w=="string"?this._stringDecoder.decode(w,this._parseBuffer):this._utf8Decoder.decode(w,this._parseBuffer),D=this._parser.parse(this._parseBuffer,O)))return this._preserveStack(j,B,O,0),this._logSlowResolvingAsync(D),D;(R=this._bufferService.buffer).x===j&&R.y===B||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},x.prototype.print=function(w,b,D){var R,j,B=this._bufferService.buffer,F=this._charsetService.charset,N=this._optionsService.options.screenReaderMode,V=this._bufferService.cols,k=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,T=this._curAttrData,I=B.lines.get(B.ybase+B.y);this._dirtyRowService.markDirty(B.y),B.x&&D-b>0&&I.getWidth(B.x-1)===2&&I.setCellFromCodePoint(B.x-1,0,1,T.fg,T.bg,T.extended);for(var P=b;P<D;++P){if(R=w[P],j=this._unicodeService.wcwidth(R),R<127&&F){var W=F[String.fromCharCode(R)];W&&(R=W.charCodeAt(0))}if(N&&this._onA11yChar.fire(n.stringFromCodePoint(R)),j||!B.x){if(B.x+j-1>=V){if(k){for(;B.x<V;)I.setCellFromCodePoint(B.x++,0,1,T.fg,T.bg,T.extended);B.x=0,B.y++,B.y===B.scrollBottom+1?(B.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(B.y>=this._bufferService.rows&&(B.y=this._bufferService.rows-1),B.lines.get(B.ybase+B.y).isWrapped=!0),I=B.lines.get(B.ybase+B.y)}else if(B.x=V-1,j===2)continue}if(O&&(I.insertCells(B.x,j,B.getNullCell(T),T),I.getWidth(V-1)===2&&I.setCellFromCodePoint(V-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,T.fg,T.bg,T.extended)),I.setCellFromCodePoint(B.x++,R,j,T.fg,T.bg,T.extended),j>0)for(;--j;)I.setCellFromCodePoint(B.x++,0,0,T.fg,T.bg,T.extended)}else I.getWidth(B.x-1)?I.addCodepointToCell(B.x-1,R):I.addCodepointToCell(B.x-2,R)}D-b>0&&(I.loadCell(B.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),B.x<V&&D-b>0&&I.getWidth(B.x)===0&&!I.hasContent(B.x)&&I.setCellFromCodePoint(B.x,0,1,T.fg,T.bg,T.extended),this._dirtyRowService.markDirty(B.y)},x.prototype.registerCsiHandler=function(w,b){var D=this;return w.final!=="t"||w.prefix||w.intermediates?this._parser.registerCsiHandler(w,b):this._parser.registerCsiHandler(w,function(R){return!S(R.params[0],D._optionsService.options.windowOptions)||b(R)})},x.prototype.registerDcsHandler=function(w,b){return this._parser.registerDcsHandler(w,new d.DcsHandler(b))},x.prototype.registerEscHandler=function(w,b){return this._parser.registerEscHandler(w,b)},x.prototype.registerOscHandler=function(w,b){return this._parser.registerOscHandler(w,new h.OscHandler(b))},x.prototype.bell=function(){return this._onRequestBell.fire(),!0},x.prototype.lineFeed=function(){var w=this._bufferService.buffer;return this._dirtyRowService.markDirty(w.y),this._optionsService.options.convertEol&&(w.x=0),w.y++,w.y===w.scrollBottom+1?(w.y--,this._bufferService.scroll(this._eraseAttrData())):w.y>=this._bufferService.rows&&(w.y=this._bufferService.rows-1),w.x>=this._bufferService.cols&&w.x--,this._dirtyRowService.markDirty(w.y),this._onLineFeed.fire(),!0},x.prototype.carriageReturn=function(){return this._bufferService.buffer.x=0,!0},x.prototype.backspace=function(){var w,b=this._bufferService.buffer;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),b.x>0&&b.x--,!0;if(this._restrictCursor(this._bufferService.cols),b.x>0)b.x--;else if(b.x===0&&b.y>b.scrollTop&&b.y<=b.scrollBottom&&((w=b.lines.get(b.ybase+b.y))===null||w===void 0?void 0:w.isWrapped)){b.lines.get(b.ybase+b.y).isWrapped=!1,b.y--,b.x=this._bufferService.cols-1;var D=b.lines.get(b.ybase+b.y);D.hasWidth(b.x)&&!D.hasContent(b.x)&&b.x--}return this._restrictCursor(),!0},x.prototype.tab=function(){if(this._bufferService.buffer.x>=this._bufferService.cols)return!0;var w=this._bufferService.buffer.x;return this._bufferService.buffer.x=this._bufferService.buffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._bufferService.buffer.x-w),!0},x.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},x.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},x.prototype._restrictCursor=function(w){w===void 0&&(w=this._bufferService.cols-1),this._bufferService.buffer.x=Math.min(w,Math.max(0,this._bufferService.buffer.x)),this._bufferService.buffer.y=this._coreService.decPrivateModes.origin?Math.min(this._bufferService.buffer.scrollBottom,Math.max(this._bufferService.buffer.scrollTop,this._bufferService.buffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._bufferService.buffer.y)),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},x.prototype._setCursor=function(w,b){this._dirtyRowService.markDirty(this._bufferService.buffer.y),this._coreService.decPrivateModes.origin?(this._bufferService.buffer.x=w,this._bufferService.buffer.y=this._bufferService.buffer.scrollTop+b):(this._bufferService.buffer.x=w,this._bufferService.buffer.y=b),this._restrictCursor(),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},x.prototype._moveCursor=function(w,b){this._restrictCursor(),this._setCursor(this._bufferService.buffer.x+w,this._bufferService.buffer.y+b)},x.prototype.cursorUp=function(w){var b=this._bufferService.buffer.y-this._bufferService.buffer.scrollTop;return b>=0?this._moveCursor(0,-Math.min(b,w.params[0]||1)):this._moveCursor(0,-(w.params[0]||1)),!0},x.prototype.cursorDown=function(w){var b=this._bufferService.buffer.scrollBottom-this._bufferService.buffer.y;return b>=0?this._moveCursor(0,Math.min(b,w.params[0]||1)):this._moveCursor(0,w.params[0]||1),!0},x.prototype.cursorForward=function(w){return this._moveCursor(w.params[0]||1,0),!0},x.prototype.cursorBackward=function(w){return this._moveCursor(-(w.params[0]||1),0),!0},x.prototype.cursorNextLine=function(w){return this.cursorDown(w),this._bufferService.buffer.x=0,!0},x.prototype.cursorPrecedingLine=function(w){return this.cursorUp(w),this._bufferService.buffer.x=0,!0},x.prototype.cursorCharAbsolute=function(w){return this._setCursor((w.params[0]||1)-1,this._bufferService.buffer.y),!0},x.prototype.cursorPosition=function(w){return this._setCursor(w.length>=2?(w.params[1]||1)-1:0,(w.params[0]||1)-1),!0},x.prototype.charPosAbsolute=function(w){return this._setCursor((w.params[0]||1)-1,this._bufferService.buffer.y),!0},x.prototype.hPositionRelative=function(w){return this._moveCursor(w.params[0]||1,0),!0},x.prototype.linePosAbsolute=function(w){return this._setCursor(this._bufferService.buffer.x,(w.params[0]||1)-1),!0},x.prototype.vPositionRelative=function(w){return this._moveCursor(0,w.params[0]||1),!0},x.prototype.hVPosition=function(w){return this.cursorPosition(w),!0},x.prototype.tabClear=function(w){var b=w.params[0];return b===0?delete this._bufferService.buffer.tabs[this._bufferService.buffer.x]:b===3&&(this._bufferService.buffer.tabs={}),!0},x.prototype.cursorForwardTab=function(w){if(this._bufferService.buffer.x>=this._bufferService.cols)return!0;for(var b=w.params[0]||1;b--;)this._bufferService.buffer.x=this._bufferService.buffer.nextStop();return!0},x.prototype.cursorBackwardTab=function(w){if(this._bufferService.buffer.x>=this._bufferService.cols)return!0;for(var b=w.params[0]||1,D=this._bufferService.buffer;b--;)D.x=D.prevStop();return!0},x.prototype._eraseInBufferLine=function(w,b,D,R){R===void 0&&(R=!1);var j=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+w);j.replaceCells(b,D,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),R&&(j.isWrapped=!1)},x.prototype._resetBufferLine=function(w){var b=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+w);b.fill(this._bufferService.buffer.getNullCell(this._eraseAttrData())),b.isWrapped=!1},x.prototype.eraseInDisplay=function(w){var b;switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:for(b=this._bufferService.buffer.y,this._dirtyRowService.markDirty(b),this._eraseInBufferLine(b++,this._bufferService.buffer.x,this._bufferService.cols,this._bufferService.buffer.x===0);b<this._bufferService.rows;b++)this._resetBufferLine(b);this._dirtyRowService.markDirty(b);break;case 1:for(b=this._bufferService.buffer.y,this._dirtyRowService.markDirty(b),this._eraseInBufferLine(b,0,this._bufferService.buffer.x+1,!0),this._bufferService.buffer.x+1>=this._bufferService.cols&&(this._bufferService.buffer.lines.get(b+1).isWrapped=!1);b--;)this._resetBufferLine(b);this._dirtyRowService.markDirty(0);break;case 2:for(b=this._bufferService.rows,this._dirtyRowService.markDirty(b-1);b--;)this._resetBufferLine(b);this._dirtyRowService.markDirty(0);break;case 3:var D=this._bufferService.buffer.lines.length-this._bufferService.rows;D>0&&(this._bufferService.buffer.lines.trimStart(D),this._bufferService.buffer.ybase=Math.max(this._bufferService.buffer.ybase-D,0),this._bufferService.buffer.ydisp=Math.max(this._bufferService.buffer.ydisp-D,0),this._onScroll.fire(0))}return!0},x.prototype.eraseInLine=function(w){switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:this._eraseInBufferLine(this._bufferService.buffer.y,this._bufferService.buffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.buffer.x+1);break;case 2:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.cols)}return this._dirtyRowService.markDirty(this._bufferService.buffer.y),!0},x.prototype.insertLines=function(w){this._restrictCursor();var b=w.params[0]||1,D=this._bufferService.buffer;if(D.y>D.scrollBottom||D.y<D.scrollTop)return!0;for(var R=D.ybase+D.y,j=this._bufferService.rows-1-D.scrollBottom,B=this._bufferService.rows-1+D.ybase-j+1;b--;)D.lines.splice(B-1,1),D.lines.splice(R,0,D.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(D.y,D.scrollBottom),D.x=0,!0},x.prototype.deleteLines=function(w){this._restrictCursor();var b=w.params[0]||1,D=this._bufferService.buffer;if(D.y>D.scrollBottom||D.y<D.scrollTop)return!0;var R,j=D.ybase+D.y;for(R=this._bufferService.rows-1-D.scrollBottom,R=this._bufferService.rows-1+D.ybase-R;b--;)D.lines.splice(j,1),D.lines.splice(R,0,D.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(D.y,D.scrollBottom),D.x=0,!0},x.prototype.insertChars=function(w){this._restrictCursor();var b=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);return b&&(b.insertCells(this._bufferService.buffer.x,w.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y)),!0},x.prototype.deleteChars=function(w){this._restrictCursor();var b=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);return b&&(b.deleteCells(this._bufferService.buffer.x,w.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y)),!0},x.prototype.scrollUp=function(w){for(var b=w.params[0]||1,D=this._bufferService.buffer;b--;)D.lines.splice(D.ybase+D.scrollTop,1),D.lines.splice(D.ybase+D.scrollBottom,0,D.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(D.scrollTop,D.scrollBottom),!0},x.prototype.scrollDown=function(w){for(var b=w.params[0]||1,D=this._bufferService.buffer;b--;)D.lines.splice(D.ybase+D.scrollBottom,1),D.lines.splice(D.ybase+D.scrollTop,0,D.getBlankLine(t.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(D.scrollTop,D.scrollBottom),!0},x.prototype.scrollLeft=function(w){var b=this._bufferService.buffer;if(b.y>b.scrollBottom||b.y<b.scrollTop)return!0;for(var D=w.params[0]||1,R=b.scrollTop;R<=b.scrollBottom;++R){var j=b.lines.get(b.ybase+R);j.deleteCells(0,D,b.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom),!0},x.prototype.scrollRight=function(w){var b=this._bufferService.buffer;if(b.y>b.scrollBottom||b.y<b.scrollTop)return!0;for(var D=w.params[0]||1,R=b.scrollTop;R<=b.scrollBottom;++R){var j=b.lines.get(b.ybase+R);j.insertCells(0,D,b.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom),!0},x.prototype.insertColumns=function(w){var b=this._bufferService.buffer;if(b.y>b.scrollBottom||b.y<b.scrollTop)return!0;for(var D=w.params[0]||1,R=b.scrollTop;R<=b.scrollBottom;++R){var j=this._bufferService.buffer.lines.get(b.ybase+R);j.insertCells(b.x,D,b.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom),!0},x.prototype.deleteColumns=function(w){var b=this._bufferService.buffer;if(b.y>b.scrollBottom||b.y<b.scrollTop)return!0;for(var D=w.params[0]||1,R=b.scrollTop;R<=b.scrollBottom;++R){var j=b.lines.get(b.ybase+R);j.deleteCells(b.x,D,b.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom),!0},x.prototype.eraseChars=function(w){this._restrictCursor();var b=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);return b&&(b.replaceCells(this._bufferService.buffer.x,this._bufferService.buffer.x+(w.params[0]||1),this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y)),!0},x.prototype.repeatPrecedingCharacter=function(w){if(!this._parser.precedingCodepoint)return!0;for(var b=w.params[0]||1,D=new Uint32Array(b),R=0;R<b;++R)D[R]=this._parser.precedingCodepoint;return this.print(D,0,D.length),!0},x.prototype.sendDeviceAttributesPrimary=function(w){return w.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0},x.prototype.sendDeviceAttributesSecondary=function(w){return w.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(w.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0},x.prototype._is=function(w){return(this._optionsService.options.termName+"").indexOf(w)===0},x.prototype.setMode=function(w){for(var b=0;b<w.length;b++)switch(w.params[b]){case 4:this._coreService.modes.insertMode=!0}return!0},x.prototype.setModePrivate=function(w){for(var b=0;b<w.length;b++)switch(w.params[b]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,E.DEFAULT_CHARSET),this._charsetService.setgCharset(1,E.DEFAULT_CHARSET),this._charsetService.setgCharset(2,E.DEFAULT_CHARSET),this._charsetService.setgCharset(3,E.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},x.prototype.resetMode=function(w){for(var b=0;b<w.length;b++)switch(w.params[b]){case 4:this._coreService.modes.insertMode=!1}return!0},x.prototype.resetModePrivate=function(w){for(var b=0;b<w.length;b++)switch(w.params[b]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),w.params[b]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},x.prototype._updateAttrColor=function(w,b,D,R,j){return b===2?(w|=50331648,w&=-16777216,w|=s.AttributeData.fromColorRGB([D,R,j])):b===5&&(w&=-50331904,w|=33554432|255&D),w},x.prototype._extractColor=function(w,b,D){var R=[0,0,-1,0,0,0],j=0,B=0;do{if(R[B+j]=w.params[b+B],w.hasSubParams(b+B)){var F=w.getSubParams(b+B),N=0;do R[1]===5&&(j=1),R[B+N+1+j]=F[N];while(++N<F.length&&N+B+1+j<R.length);break}if(R[1]===5&&B+j>=2||R[1]===2&&B+j>=5)break;R[1]&&(j=1)}while(++B+b<w.length&&B+j<R.length);for(N=2;N<R.length;++N)R[N]===-1&&(R[N]=0);switch(R[0]){case 38:D.fg=this._updateAttrColor(D.fg,R[1],R[3],R[4],R[5]);break;case 48:D.bg=this._updateAttrColor(D.bg,R[1],R[3],R[4],R[5]);break;case 58:D.extended=D.extended.clone(),D.extended.underlineColor=this._updateAttrColor(D.extended.underlineColor,R[1],R[3],R[4],R[5])}return B},x.prototype._processUnderline=function(w,b){b.extended=b.extended.clone(),(!~w||w>5)&&(w=1),b.extended.underlineStyle=w,b.fg|=268435456,w===0&&(b.fg&=-268435457),b.updateExtended()},x.prototype.charAttributes=function(w){if(w.length===1&&w.params[0]===0)return this._curAttrData.fg=t.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=t.DEFAULT_ATTR_DATA.bg,!0;for(var b,D=w.length,R=this._curAttrData,j=0;j<D;j++)(b=w.params[j])>=30&&b<=37?(R.fg&=-50331904,R.fg|=16777216|b-30):b>=40&&b<=47?(R.bg&=-50331904,R.bg|=16777216|b-40):b>=90&&b<=97?(R.fg&=-50331904,R.fg|=16777224|b-90):b>=100&&b<=107?(R.bg&=-50331904,R.bg|=16777224|b-100):b===0?(R.fg=t.DEFAULT_ATTR_DATA.fg,R.bg=t.DEFAULT_ATTR_DATA.bg):b===1?R.fg|=134217728:b===3?R.bg|=67108864:b===4?(R.fg|=268435456,this._processUnderline(w.hasSubParams(j)?w.getSubParams(j)[0]:1,R)):b===5?R.fg|=536870912:b===7?R.fg|=67108864:b===8?R.fg|=1073741824:b===2?R.bg|=134217728:b===21?this._processUnderline(2,R):b===22?(R.fg&=-134217729,R.bg&=-134217729):b===23?R.bg&=-67108865:b===24?R.fg&=-268435457:b===25?R.fg&=-536870913:b===27?R.fg&=-67108865:b===28?R.fg&=-1073741825:b===39?(R.fg&=-67108864,R.fg|=16777215&t.DEFAULT_ATTR_DATA.fg):b===49?(R.bg&=-67108864,R.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):b===38||b===48||b===58?j+=this._extractColor(w,j,R):b===59?(R.extended=R.extended.clone(),R.extended.underlineColor=-1,R.updateExtended()):b===100?(R.fg&=-67108864,R.fg|=16777215&t.DEFAULT_ATTR_DATA.fg,R.bg&=-67108864,R.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",b);return!0},x.prototype.deviceStatus=function(w){switch(w.params[0]){case 5:this._coreService.triggerDataEvent(f.C0.ESC+"[0n");break;case 6:var b=this._bufferService.buffer.y+1,D=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(f.C0.ESC+"["+b+";"+D+"R")}return!0},x.prototype.deviceStatusPrivate=function(w){switch(w.params[0]){case 6:var b=this._bufferService.buffer.y+1,D=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(f.C0.ESC+"[?"+b+";"+D+"R")}return!0},x.prototype.softReset=function(w){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._bufferService.buffer.scrollTop=0,this._bufferService.buffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._bufferService.buffer.savedX=0,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},x.prototype.setCursorStyle=function(w){var b=w.params[0]||1;switch(b){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var D=b%2==1;return this._optionsService.options.cursorBlink=D,!0},x.prototype.setScrollRegion=function(w){var b,D=w.params[0]||1;return(w.length<2||(b=w.params[1])>this._bufferService.rows||b===0)&&(b=this._bufferService.rows),b>D&&(this._bufferService.buffer.scrollTop=D-1,this._bufferService.buffer.scrollBottom=b-1,this._setCursor(0,0)),!0},x.prototype.windowOptions=function(w){if(!S(w.params[0],this._optionsService.options.windowOptions))return!0;var b=w.length>1?w.params[1]:0;switch(w.params[0]){case 14:b!==2&&this._onRequestWindowsOptionsReport.fire(_.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(_.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(f.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:b!==0&&b!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),b!==0&&b!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:b!==0&&b!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),b!==0&&b!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},x.prototype.saveCursor=function(w){return this._bufferService.buffer.savedX=this._bufferService.buffer.x,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase+this._bufferService.buffer.y,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset,!0},x.prototype.restoreCursor=function(w){return this._bufferService.buffer.x=this._bufferService.buffer.savedX||0,this._bufferService.buffer.y=Math.max(this._bufferService.buffer.savedY-this._bufferService.buffer.ybase,0),this._curAttrData.fg=this._bufferService.buffer.savedCurAttrData.fg,this._curAttrData.bg=this._bufferService.buffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._bufferService.buffer.savedCharset&&(this._charsetService.charset=this._bufferService.buffer.savedCharset),this._restrictCursor(),!0},x.prototype.setTitle=function(w){return this._windowTitle=w,this._onTitleChange.fire(w),!0},x.prototype.setIconName=function(w){return this._iconName=w,!0},x.prototype._parseAnsiColorChange=function(w){for(var b,D={colors:[]},R=/(\d+);rgb:([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})/gi;(b=R.exec(w))!==null;)D.colors.push({colorIndex:parseInt(b[1]),red:parseInt(b[2],16),green:parseInt(b[3],16),blue:parseInt(b[4],16)});return D.colors.length===0?null:D},x.prototype.setAnsiColor=function(w){var b=this._parseAnsiColorChange(w);return b?this._onAnsiColorChange.fire(b):this._logService.warn("Expected format <num>;rgb:<rr>/<gg>/<bb> but got data: "+w),!0},x.prototype.nextLine=function(){return this._bufferService.buffer.x=0,this.index(),!0},x.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},x.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},x.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,E.DEFAULT_CHARSET),!0},x.prototype.selectCharset=function(w){return w.length!==2?(this.selectDefaultCharset(),!0):(w[0]==="/"||this._charsetService.setgCharset(m[w[0]],E.CHARSETS[w[1]]||E.DEFAULT_CHARSET),!0)},x.prototype.index=function(){this._restrictCursor();var w=this._bufferService.buffer;return this._bufferService.buffer.y++,w.y===w.scrollBottom+1?(w.y--,this._bufferService.scroll(this._eraseAttrData())):w.y>=this._bufferService.rows&&(w.y=this._bufferService.rows-1),this._restrictCursor(),!0},x.prototype.tabSet=function(){return this._bufferService.buffer.tabs[this._bufferService.buffer.x]=!0,!0},x.prototype.reverseIndex=function(){this._restrictCursor();var w=this._bufferService.buffer;if(w.y===w.scrollTop){var b=w.scrollBottom-w.scrollTop;w.lines.shiftElements(w.ybase+w.y,b,1),w.lines.set(w.ybase+w.y,w.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(w.scrollTop,w.scrollBottom)}else w.y--,this._restrictCursor();return!0},x.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},x.prototype.reset=function(){this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone()},x.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},x.prototype.setgLevel=function(w){return this._charsetService.setgLevel(w),!0},x.prototype.screenAlignmentPattern=function(){var w=new i.CellData;w.content=1<<22|"E".charCodeAt(0),w.fg=this._curAttrData.fg,w.bg=this._curAttrData.bg;var b=this._bufferService.buffer;this._setCursor(0,0);for(var D=0;D<this._bufferService.rows;++D){var R=b.ybase+b.y+D,j=b.lines.get(R);j&&(j.fill(w),j.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},x}(o.Disposable);l.InputHandler=A},844:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.Disposable=void 0;var g=function(){function p(){this._disposables=[],this._isDisposed=!1}return p.prototype.dispose=function(){this._isDisposed=!0;for(var _=0,f=this._disposables;_<f.length;_++)f[_].dispose();this._disposables.length=0},p.prototype.register=function(_){return this._disposables.push(_),_},p.prototype.unregister=function(_){var f=this._disposables.indexOf(_);f!==-1&&this._disposables.splice(f,1)},p}();function u(p){for(var _=0,f=p;_<f.length;_++)f[_].dispose();p.length=0}l.Disposable=g,l.disposeArray=u,l.getDisposeArrayDisposable=function(p){return{dispose:function(){return u(p)}}}},6114:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.isSafari=l.isFirefox=void 0;var g=typeof navigator=="undefined",u=g?"node":navigator.userAgent,p=g?"node":navigator.platform;l.isFirefox=u.includes("Firefox"),l.isSafari=/^((?!chrome|android).)*safari/i.test(u),l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),l.isIpad=p==="iPad",l.isIphone=p==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),l.isLinux=p.indexOf("Linux")>=0},8273:function(H,l){function g(u,p,_,f){if(_===void 0&&(_=0),f===void 0&&(f=u.length),_>=u.length)return u;_=(u.length+_)%u.length,f=f>=u.length?u.length:(u.length+f)%u.length;for(var E=_;E<f;++E)u[E]=p;return u}Object.defineProperty(l,"__esModule",{value:!0}),l.concat=l.fillFallback=l.fill=void 0,l.fill=function(u,p,_,f){return u.fill?u.fill(p,_,f):g(u,p,_,f)},l.fillFallback=g,l.concat=function(u,p){var _=new u.constructor(u.length+p.length);return _.set(u),_.set(p,u.length),_}},9282:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.updateWindowsModeWrappedState=void 0;var u=g(643);l.updateWindowsModeWrappedState=function(p){var _=p.buffer.lines.get(p.buffer.ybase+p.buffer.y-1),f=_==null?void 0:_.get(p.cols-1),E=p.buffer.lines.get(p.buffer.ybase+p.buffer.y);E&&f&&(E.isWrapped=f[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&f[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;var g=function(){function p(){this.fg=0,this.bg=0,this.extended=new u}return p.toColorRGB=function(_){return[_>>>16&255,_>>>8&255,255&_]},p.fromColorRGB=function(_){return(255&_[0])<<16|(255&_[1])<<8|255&_[2]},p.prototype.clone=function(){var _=new p;return _.fg=this.fg,_.bg=this.bg,_.extended=this.extended.clone(),_},p.prototype.isInverse=function(){return 67108864&this.fg},p.prototype.isBold=function(){return 134217728&this.fg},p.prototype.isUnderline=function(){return 268435456&this.fg},p.prototype.isBlink=function(){return 536870912&this.fg},p.prototype.isInvisible=function(){return 1073741824&this.fg},p.prototype.isItalic=function(){return 67108864&this.bg},p.prototype.isDim=function(){return 134217728&this.bg},p.prototype.getFgColorMode=function(){return 50331648&this.fg},p.prototype.getBgColorMode=function(){return 50331648&this.bg},p.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},p.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},p.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},p.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},p.prototype.isFgDefault=function(){return(50331648&this.fg)==0},p.prototype.isBgDefault=function(){return(50331648&this.bg)==0},p.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},p.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},p.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},p.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},p.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},p.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},p.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},p.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},p.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},p.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},p.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},p}();l.AttributeData=g;var u=function(){function p(_,f){_===void 0&&(_=0),f===void 0&&(f=-1),this.underlineStyle=_,this.underlineColor=f}return p.prototype.clone=function(){return new p(this.underlineStyle,this.underlineColor)},p.prototype.isEmpty=function(){return this.underlineStyle===0},p}();l.ExtendedAttrs=u},9092:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.BufferStringIterator=l.Buffer=l.MAX_BUFFER_SIZE=void 0;var u=g(6349),p=g(8437),_=g(511),f=g(643),E=g(4634),v=g(4863),o=g(7116),c=g(3734);l.MAX_BUFFER_SIZE=4294967295;var n=function(){function r(e,i,s){this._hasScrollback=e,this._optionsService=i,this._bufferService=s,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=o.DEFAULT_CHARSET,this.markers=[],this._nullCell=_.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]),this._whitespaceCell=_.CellData.fromCharData([0,f.WHITESPACE_CELL_CHAR,f.WHITESPACE_CELL_WIDTH,f.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return r.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new c.ExtendedAttrs),this._nullCell},r.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new c.ExtendedAttrs),this._whitespaceCell},r.prototype.getBlankLine=function(e,i){return new p.BufferLine(this._bufferService.cols,this.getNullCell(e),i)},Object.defineProperty(r.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isCursorInViewport",{get:function(){var i=this.ybase+this.y-this.ydisp;return i>=0&&i<this._rows},enumerable:!1,configurable:!0}),r.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var i=e+this._optionsService.options.scrollback;return i>l.MAX_BUFFER_SIZE?l.MAX_BUFFER_SIZE:i},r.prototype.fillViewportRows=function(e){if(this.lines.length===0){e===void 0&&(e=p.DEFAULT_ATTR_DATA);for(var i=this._rows;i--;)this.lines.push(this.getBlankLine(e))}},r.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},r.prototype.resize=function(e,i){var s=this.getNullCell(p.DEFAULT_ATTR_DATA),a=this._getCorrectBufferLength(i);if(a>this.lines.maxLength&&(this.lines.maxLength=a),this.lines.length>0){if(this._cols<e)for(var h=0;h<this.lines.length;h++)this.lines.get(h).resize(e,s);var d=0;if(this._rows<i)for(var m=this._rows;m<i;m++)this.lines.length<i+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new p.BufferLine(e,s)):this.ybase>0&&this.lines.length<=this.ybase+this.y+d+1?(this.ybase--,d++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(e,s)));else for(m=this._rows;m>i;m--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(a<this.lines.maxLength){var y=this.lines.length-a;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=a}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,i-1),d&&(this.y+=d),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(e,i),this._cols>e))for(h=0;h<this.lines.length;h++)this.lines.get(h).resize(e,s);this._cols=e,this._rows=i},Object.defineProperty(r.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),r.prototype._reflow=function(e,i){this._cols!==e&&(e>this._cols?this._reflowLarger(e,i):this._reflowSmaller(e,i))},r.prototype._reflowLarger=function(e,i){var s=E.reflowLargerGetLinesToRemove(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(s.length>0){var a=E.reflowLargerCreateNewLayout(this.lines,s);E.reflowLargerApplyNewLayout(this.lines,a.layout),this._reflowLargerAdjustViewport(e,i,a.countRemoved)}},r.prototype._reflowLargerAdjustViewport=function(e,i,s){for(var a=this.getNullCell(p.DEFAULT_ATTR_DATA),h=s;h-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new p.BufferLine(e,a))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-s,0)},r.prototype._reflowSmaller=function(e,i){for(var s=this.getNullCell(p.DEFAULT_ATTR_DATA),a=[],h=0,d=this.lines.length-1;d>=0;d--){var m=this.lines.get(d);if(!(!m||!m.isWrapped&&m.getTrimmedLength()<=e)){for(var y=[m];m.isWrapped&&d>0;)m=this.lines.get(--d),y.unshift(m);var S=this.ybase+this.y;if(!(S>=d&&S<d+y.length)){var C,A=y[y.length-1].getTrimmedLength(),L=E.reflowSmallerGetNewLineLengths(y,this._cols,e),x=L.length-y.length;C=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+x):Math.max(0,this.lines.length-this.lines.maxLength+x);for(var w=[],b=0;b<x;b++){var D=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);w.push(D)}w.length>0&&(a.push({start:d+y.length+h,newLines:w}),h+=w.length),y.push.apply(y,w);var R=L.length-1,j=L[R];j===0&&(j=L[--R]);for(var B=y.length-x-1,F=A;B>=0;){var N=Math.min(F,j);if(y[R].copyCellsFrom(y[B],F-N,j-N,N,!0),(j-=N)==0&&(j=L[--R]),(F-=N)==0){B--;var V=Math.max(B,0);F=E.getWrappedLineTrimmedLength(y,V,this._cols)}}for(b=0;b<y.length;b++)L[b]<e&&y[b].setCell(L[b],s);for(var k=x-C;k-- >0;)this.ybase===0?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+h)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+x,this.ybase+i-1)}}}if(a.length>0){var O=[],T=[];for(b=0;b<this.lines.length;b++)T.push(this.lines.get(b));var I=this.lines.length,P=I-1,W=0,U=a[W];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+h);var Y=0;for(b=Math.min(this.lines.maxLength-1,I+h-1);b>=0;b--)if(U&&U.start>P+Y){for(var $=U.newLines.length-1;$>=0;$--)this.lines.set(b--,U.newLines[$]);b++,O.push({index:P+1,amount:U.newLines.length}),Y+=U.newLines.length,U=a[++W]}else this.lines.set(b,T[P--]);var Q=0;for(b=O.length-1;b>=0;b--)O[b].index+=Q,this.lines.onInsertEmitter.fire(O[b]),Q+=O[b].amount;var q=Math.max(0,I+h-this.lines.maxLength);q>0&&this.lines.onTrimEmitter.fire(q)}},r.prototype.stringIndexToBufferIndex=function(e,i,s){for(s===void 0&&(s=!1);i;){var a=this.lines.get(e);if(!a)return[-1,-1];for(var h=s?a.getTrimmedLength():a.length,d=0;d<h;++d)if(a.get(d)[f.CHAR_DATA_WIDTH_INDEX]&&(i-=a.get(d)[f.CHAR_DATA_CHAR_INDEX].length||1),i<0)return[e,d];e++}return[e,0]},r.prototype.translateBufferLineToString=function(e,i,s,a){s===void 0&&(s=0);var h=this.lines.get(e);return h?h.translateToString(i,s,a):""},r.prototype.getWrappedRangeForLine=function(e){for(var i=e,s=e;i>0&&this.lines.get(i).isWrapped;)i--;for(;s+1<this.lines.length&&this.lines.get(s+1).isWrapped;)s++;return{first:i,last:s}},r.prototype.setupTabStops=function(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.options.tabStopWidth)this.tabs[e]=!0},r.prototype.prevStop=function(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},r.prototype.nextStop=function(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},r.prototype.addMarker=function(e){var i=this,s=new v.Marker(e);return this.markers.push(s),s.register(this.lines.onTrim(function(a){s.line-=a,s.line<0&&s.dispose()})),s.register(this.lines.onInsert(function(a){s.line>=a.index&&(s.line+=a.amount)})),s.register(this.lines.onDelete(function(a){s.line>=a.index&&s.line<a.index+a.amount&&s.dispose(),s.line>a.index&&(s.line-=a.amount)})),s.register(s.onDispose(function(){return i._removeMarker(s)})),s},r.prototype._removeMarker=function(e){this.markers.splice(this.markers.indexOf(e),1)},r.prototype.iterator=function(e,i,s,a,h){return new t(this,e,i,s,a,h)},r}();l.Buffer=n;var t=function(){function r(e,i,s,a,h,d){s===void 0&&(s=0),a===void 0&&(a=e.lines.length),h===void 0&&(h=0),d===void 0&&(d=0),this._buffer=e,this._trimRight=i,this._startIndex=s,this._endIndex=a,this._startOverscan=h,this._endOverscan=d,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return r.prototype.hasNext=function(){return this._current<this._endIndex},r.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var i="",s=e.first;s<=e.last;++s)i+=this._buffer.translateBufferLineToString(s,this._trimRight);return this._current=e.last+1,{range:e,content:i}},r}();l.BufferStringIterator=t},8437:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLine=l.DEFAULT_ATTR_DATA=void 0;var u=g(482),p=g(643),_=g(511),f=g(3734);l.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);var E=function(){function v(o,c,n){n===void 0&&(n=!1),this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);for(var t=c||_.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]),r=0;r<o;++r)this.setCell(r,t);this.length=o}return v.prototype.get=function(o){var c=this._data[3*o+0],n=2097151&c;return[this._data[3*o+1],2097152&c?this._combined[o]:n?u.stringFromCodePoint(n):"",c>>22,2097152&c?this._combined[o].charCodeAt(this._combined[o].length-1):n]},v.prototype.set=function(o,c){this._data[3*o+1]=c[p.CHAR_DATA_ATTR_INDEX],c[p.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=c[1],this._data[3*o+0]=2097152|o|c[p.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=c[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|c[p.CHAR_DATA_WIDTH_INDEX]<<22},v.prototype.getWidth=function(o){return this._data[3*o+0]>>22},v.prototype.hasWidth=function(o){return 12582912&this._data[3*o+0]},v.prototype.getFg=function(o){return this._data[3*o+1]},v.prototype.getBg=function(o){return this._data[3*o+2]},v.prototype.hasContent=function(o){return 4194303&this._data[3*o+0]},v.prototype.getCodePoint=function(o){var c=this._data[3*o+0];return 2097152&c?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&c},v.prototype.isCombined=function(o){return 2097152&this._data[3*o+0]},v.prototype.getString=function(o){var c=this._data[3*o+0];return 2097152&c?this._combined[o]:2097151&c?u.stringFromCodePoint(2097151&c):""},v.prototype.loadCell=function(o,c){var n=3*o;return c.content=this._data[n+0],c.fg=this._data[n+1],c.bg=this._data[n+2],2097152&c.content&&(c.combinedData=this._combined[o]),268435456&c.bg&&(c.extended=this._extendedAttrs[o]),c},v.prototype.setCell=function(o,c){2097152&c.content&&(this._combined[o]=c.combinedData),268435456&c.bg&&(this._extendedAttrs[o]=c.extended),this._data[3*o+0]=c.content,this._data[3*o+1]=c.fg,this._data[3*o+2]=c.bg},v.prototype.setCellFromCodePoint=function(o,c,n,t,r,e){268435456&r&&(this._extendedAttrs[o]=e),this._data[3*o+0]=c|n<<22,this._data[3*o+1]=t,this._data[3*o+2]=r},v.prototype.addCodepointToCell=function(o,c){var n=this._data[3*o+0];2097152&n?this._combined[o]+=u.stringFromCodePoint(c):(2097151&n?(this._combined[o]=u.stringFromCodePoint(2097151&n)+u.stringFromCodePoint(c),n&=-2097152,n|=2097152):n=c|1<<22,this._data[3*o+0]=n)},v.prototype.insertCells=function(o,c,n,t){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(t==null?void 0:t.fg)||0,(t==null?void 0:t.bg)||0,(t==null?void 0:t.extended)||new f.ExtendedAttrs),c<this.length-o){for(var r=new _.CellData,e=this.length-o-c-1;e>=0;--e)this.setCell(o+c+e,this.loadCell(o+e,r));for(e=0;e<c;++e)this.setCell(o+e,n)}else for(e=o;e<this.length;++e)this.setCell(e,n);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(t==null?void 0:t.fg)||0,(t==null?void 0:t.bg)||0,(t==null?void 0:t.extended)||new f.ExtendedAttrs)},v.prototype.deleteCells=function(o,c,n,t){if(o%=this.length,c<this.length-o){for(var r=new _.CellData,e=0;e<this.length-o-c;++e)this.setCell(o+e,this.loadCell(o+c+e,r));for(e=this.length-c;e<this.length;++e)this.setCell(e,n)}else for(e=o;e<this.length;++e)this.setCell(e,n);o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(t==null?void 0:t.fg)||0,(t==null?void 0:t.bg)||0,(t==null?void 0:t.extended)||new f.ExtendedAttrs),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodePoint(o,0,1,(t==null?void 0:t.fg)||0,(t==null?void 0:t.bg)||0,(t==null?void 0:t.extended)||new f.ExtendedAttrs)},v.prototype.replaceCells=function(o,c,n,t){for(o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(t==null?void 0:t.fg)||0,(t==null?void 0:t.bg)||0,(t==null?void 0:t.extended)||new f.ExtendedAttrs),c<this.length&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c,0,1,(t==null?void 0:t.fg)||0,(t==null?void 0:t.bg)||0,(t==null?void 0:t.extended)||new f.ExtendedAttrs);o<c&&o<this.length;)this.setCell(o++,n)},v.prototype.resize=function(o,c){if(o!==this.length){if(o>this.length){var n=new Uint32Array(3*o);this.length&&(3*o<this._data.length?n.set(this._data.subarray(0,3*o)):n.set(this._data)),this._data=n;for(var t=this.length;t<o;++t)this.setCell(t,c)}else if(o){(n=new Uint32Array(3*o)).set(this._data.subarray(0,3*o)),this._data=n;var r=Object.keys(this._combined);for(t=0;t<r.length;t++){var e=parseInt(r[t],10);e>=o&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=o}},v.prototype.fill=function(o){this._combined={},this._extendedAttrs={};for(var c=0;c<this.length;++c)this.setCell(c,o)},v.prototype.copyFrom=function(o){for(var c in this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={},o._combined)this._combined[c]=o._combined[c];for(var c in this._extendedAttrs={},o._extendedAttrs)this._extendedAttrs[c]=o._extendedAttrs[c];this.isWrapped=o.isWrapped},v.prototype.clone=function(){var o=new v(0);for(var c in o._data=new Uint32Array(this._data),o.length=this.length,this._combined)o._combined[c]=this._combined[c];for(var c in this._extendedAttrs)o._extendedAttrs[c]=this._extendedAttrs[c];return o.isWrapped=this.isWrapped,o},v.prototype.getTrimmedLength=function(){for(var o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0},v.prototype.copyCellsFrom=function(o,c,n,t,r){var e=o._data;if(r)for(var i=t-1;i>=0;i--)for(var s=0;s<3;s++)this._data[3*(n+i)+s]=e[3*(c+i)+s];else for(i=0;i<t;i++)for(s=0;s<3;s++)this._data[3*(n+i)+s]=e[3*(c+i)+s];var a=Object.keys(o._combined);for(s=0;s<a.length;s++){var h=parseInt(a[s],10);h>=c&&(this._combined[h-c+n]=o._combined[h])}},v.prototype.translateToString=function(o,c,n){o===void 0&&(o=!1),c===void 0&&(c=0),n===void 0&&(n=this.length),o&&(n=Math.min(n,this.getTrimmedLength()));for(var t="";c<n;){var r=this._data[3*c+0],e=2097151&r;t+=2097152&r?this._combined[c]:e?u.stringFromCodePoint(e):p.WHITESPACE_CELL_CHAR,c+=r>>22||1}return t},v}();l.BufferLine=E},4841:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getRangeLength=void 0,l.getRangeLength=function(g,u){if(g.start.y>g.end.y)throw new Error("Buffer range end ("+g.end.x+", "+g.end.y+") cannot be before start ("+g.start.x+", "+g.start.y+")");return u*(g.end.y-g.start.y)+(g.end.x-g.start.x+1)}},4634:function(H,l){function g(u,p,_){if(p===u.length-1)return u[p].getTrimmedLength();var f=!u[p].hasContent(_-1)&&u[p].getWidth(_-1)===1,E=u[p+1].getWidth(0)===2;return f&&E?_-1:_}Object.defineProperty(l,"__esModule",{value:!0}),l.getWrappedLineTrimmedLength=l.reflowSmallerGetNewLineLengths=l.reflowLargerApplyNewLayout=l.reflowLargerCreateNewLayout=l.reflowLargerGetLinesToRemove=void 0,l.reflowLargerGetLinesToRemove=function(u,p,_,f,E){for(var v=[],o=0;o<u.length-1;o++){var c=o,n=u.get(++c);if(n.isWrapped){for(var t=[u.get(o)];c<u.length&&n.isWrapped;)t.push(n),n=u.get(++c);if(f>=o&&f<c)o+=t.length-1;else{for(var r=0,e=g(t,r,p),i=1,s=0;i<t.length;){var a=g(t,i,p),h=a-s,d=_-e,m=Math.min(h,d);t[r].copyCellsFrom(t[i],s,e,m,!1),(e+=m)===_&&(r++,e=0),(s+=m)===a&&(i++,s=0),e===0&&r!==0&&t[r-1].getWidth(_-1)===2&&(t[r].copyCellsFrom(t[r-1],_-1,e++,1,!1),t[r-1].setCell(_-1,E))}t[r].replaceCells(e,_,E);for(var y=0,S=t.length-1;S>0&&(S>r||t[S].getTrimmedLength()===0);S--)y++;y>0&&(v.push(o+t.length-y),v.push(y)),o+=t.length-1}}}return v},l.reflowLargerCreateNewLayout=function(u,p){for(var _=[],f=0,E=p[f],v=0,o=0;o<u.length;o++)if(E===o){var c=p[++f];u.onDeleteEmitter.fire({index:o-v,amount:c}),o+=c-1,v+=c,E=p[++f]}else _.push(o);return{layout:_,countRemoved:v}},l.reflowLargerApplyNewLayout=function(u,p){for(var _=[],f=0;f<p.length;f++)_.push(u.get(p[f]));for(f=0;f<_.length;f++)u.set(f,_[f]);u.length=p.length},l.reflowSmallerGetNewLineLengths=function(u,p,_){for(var f=[],E=u.map(function(e,i){return g(u,i,p)}).reduce(function(e,i){return e+i}),v=0,o=0,c=0;c<E;){if(E-c<_){f.push(E-c);break}v+=_;var n=g(u,o,p);v>n&&(v-=n,o++);var t=u[o].getWidth(v-1)===2;t&&v--;var r=t?_-1:_;f.push(r),c+=r}return f},l.getWrappedLineTrimmedLength=g},5295:function(H,l,g){var u,p=this&&this.__extends||(u=function(o,c){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])})(o,c)},function(v,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=v}u(v,o),v.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)});Object.defineProperty(l,"__esModule",{value:!0}),l.BufferSet=void 0;var _=g(9092),f=g(8460),E=function(v){function o(c,n){var t=v.call(this)||this;return t._optionsService=c,t._bufferService=n,t._onBufferActivate=t.register(new f.EventEmitter),t.reset(),t}return p(o,v),Object.defineProperty(o.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),o.prototype.reset=function(){this._normal=new _.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new _.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this.setupTabStops()},Object.defineProperty(o.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),o.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},o.prototype.activateAltBuffer=function(c){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(c),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},o.prototype.resize=function(c,n){this._normal.resize(c,n),this._alt.resize(c,n)},o.prototype.setupTabStops=function(c){this._normal.setupTabStops(c),this._alt.setupTabStops(c)},o}(g(844).Disposable);l.BufferSet=E},511:function(H,l,g){var u,p=this&&this.__extends||(u=function(c,n){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(c,n)},function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function n(){this.constructor=o}u(o,c),o.prototype=c===null?Object.create(c):(n.prototype=c.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;var _=g(482),f=g(643),E=g(3734),v=function(o){function c(){var n=o!==null&&o.apply(this,arguments)||this;return n.content=0,n.fg=0,n.bg=0,n.extended=new E.ExtendedAttrs,n.combinedData="",n}return p(c,o),c.fromCharData=function(n){var t=new c;return t.setFromCharData(n),t},c.prototype.isCombined=function(){return 2097152&this.content},c.prototype.getWidth=function(){return this.content>>22},c.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?_.stringFromCodePoint(2097151&this.content):""},c.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},c.prototype.setFromCharData=function(n){this.fg=n[f.CHAR_DATA_ATTR_INDEX],this.bg=0;var t=!1;if(n[f.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(n[f.CHAR_DATA_CHAR_INDEX].length===2){var r=n[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){var e=n[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(r-55296)+e-56320+65536|n[f.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=n[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|n[f.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=n[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|n[f.CHAR_DATA_WIDTH_INDEX]<<22)},c.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},c}(E.AttributeData);l.CellData=v},643:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=256,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},4863:function(H,l,g){var u,p=this&&this.__extends||(u=function(v,o){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,n){c.__proto__=n}||function(c,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(c[t]=n[t])})(v,o)},function(E,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function o(){this.constructor=E}u(E,v),E.prototype=v===null?Object.create(v):(o.prototype=v.prototype,new o)});Object.defineProperty(l,"__esModule",{value:!0}),l.Marker=void 0;var _=g(8460),f=function(E){function v(o){var c=E.call(this)||this;return c.line=o,c._id=v._nextId++,c.isDisposed=!1,c._onDispose=new _.EventEmitter,c}return p(v,E),Object.defineProperty(v.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),v.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),E.prototype.dispose.call(this))},v._nextId=1,v}(g(844).Disposable);l.Marker=f},7116:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CHARSET=l.CHARSETS=void 0,l.CHARSETS={},l.DEFAULT_CHARSET=l.CHARSETS.B,l.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},l.CHARSETS.A={"#":"\xA3"},l.CHARSETS.B=void 0,l.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},l.CHARSETS.C=l.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},l.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},l.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},l.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},l.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},l.CHARSETS.E=l.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},l.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},l.CHARSETS.H=l.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},l.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:function(H,l){var g,u;Object.defineProperty(l,"__esModule",{value:!0}),l.C1=l.C0=void 0,(u=l.C0||(l.C0={})).NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL="\x7F",(g=l.C1||(l.C1={})).PAD="\x80",g.HOP="\x81",g.BPH="\x82",g.NBH="\x83",g.IND="\x84",g.NEL="\x85",g.SSA="\x86",g.ESA="\x87",g.HTS="\x88",g.HTJ="\x89",g.VTS="\x8A",g.PLD="\x8B",g.PLU="\x8C",g.RI="\x8D",g.SS2="\x8E",g.SS3="\x8F",g.DCS="\x90",g.PU1="\x91",g.PU2="\x92",g.STS="\x93",g.CCH="\x94",g.MW="\x95",g.SPA="\x96",g.EPA="\x97",g.SOS="\x98",g.SGCI="\x99",g.SCI="\x9A",g.CSI="\x9B",g.ST="\x9C",g.OSC="\x9D",g.PM="\x9E",g.APC="\x9F"},7399:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.evaluateKeyboardEvent=void 0;var u=g(2584),p={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};l.evaluateKeyboardEvent=function(_,f,E,v){var o={type:0,cancel:!1,key:void 0},c=(_.shiftKey?1:0)|(_.altKey?2:0)|(_.ctrlKey?4:0)|(_.metaKey?8:0);switch(_.keyCode){case 0:_.key==="UIKeyInputUpArrow"?o.key=f?u.C0.ESC+"OA":u.C0.ESC+"[A":_.key==="UIKeyInputLeftArrow"?o.key=f?u.C0.ESC+"OD":u.C0.ESC+"[D":_.key==="UIKeyInputRightArrow"?o.key=f?u.C0.ESC+"OC":u.C0.ESC+"[C":_.key==="UIKeyInputDownArrow"&&(o.key=f?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:if(_.shiftKey){o.key=u.C0.BS;break}if(_.altKey){o.key=u.C0.ESC+u.C0.DEL;break}o.key=u.C0.DEL;break;case 9:if(_.shiftKey){o.key=u.C0.ESC+"[Z";break}o.key=u.C0.HT,o.cancel=!0;break;case 13:o.key=_.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,o.cancel=!0;break;case 27:o.key=u.C0.ESC,_.altKey&&(o.key=u.C0.ESC+u.C0.ESC),o.cancel=!0;break;case 37:if(_.metaKey)break;c?(o.key=u.C0.ESC+"[1;"+(c+1)+"D",o.key===u.C0.ESC+"[1;3D"&&(o.key=u.C0.ESC+(E?"b":"[1;5D"))):o.key=f?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(_.metaKey)break;c?(o.key=u.C0.ESC+"[1;"+(c+1)+"C",o.key===u.C0.ESC+"[1;3C"&&(o.key=u.C0.ESC+(E?"f":"[1;5C"))):o.key=f?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(_.metaKey)break;c?(o.key=u.C0.ESC+"[1;"+(c+1)+"A",E||o.key!==u.C0.ESC+"[1;3A"||(o.key=u.C0.ESC+"[1;5A")):o.key=f?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(_.metaKey)break;c?(o.key=u.C0.ESC+"[1;"+(c+1)+"B",E||o.key!==u.C0.ESC+"[1;3B"||(o.key=u.C0.ESC+"[1;5B")):o.key=f?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:_.shiftKey||_.ctrlKey||(o.key=u.C0.ESC+"[2~");break;case 46:o.key=c?u.C0.ESC+"[3;"+(c+1)+"~":u.C0.ESC+"[3~";break;case 36:o.key=c?u.C0.ESC+"[1;"+(c+1)+"H":f?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:o.key=c?u.C0.ESC+"[1;"+(c+1)+"F":f?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:_.shiftKey?o.type=2:o.key=u.C0.ESC+"[5~";break;case 34:_.shiftKey?o.type=3:o.key=u.C0.ESC+"[6~";break;case 112:o.key=c?u.C0.ESC+"[1;"+(c+1)+"P":u.C0.ESC+"OP";break;case 113:o.key=c?u.C0.ESC+"[1;"+(c+1)+"Q":u.C0.ESC+"OQ";break;case 114:o.key=c?u.C0.ESC+"[1;"+(c+1)+"R":u.C0.ESC+"OR";break;case 115:o.key=c?u.C0.ESC+"[1;"+(c+1)+"S":u.C0.ESC+"OS";break;case 116:o.key=c?u.C0.ESC+"[15;"+(c+1)+"~":u.C0.ESC+"[15~";break;case 117:o.key=c?u.C0.ESC+"[17;"+(c+1)+"~":u.C0.ESC+"[17~";break;case 118:o.key=c?u.C0.ESC+"[18;"+(c+1)+"~":u.C0.ESC+"[18~";break;case 119:o.key=c?u.C0.ESC+"[19;"+(c+1)+"~":u.C0.ESC+"[19~";break;case 120:o.key=c?u.C0.ESC+"[20;"+(c+1)+"~":u.C0.ESC+"[20~";break;case 121:o.key=c?u.C0.ESC+"[21;"+(c+1)+"~":u.C0.ESC+"[21~";break;case 122:o.key=c?u.C0.ESC+"[23;"+(c+1)+"~":u.C0.ESC+"[23~";break;case 123:o.key=c?u.C0.ESC+"[24;"+(c+1)+"~":u.C0.ESC+"[24~";break;default:if(!_.ctrlKey||_.shiftKey||_.altKey||_.metaKey)if(E&&!v||!_.altKey||_.metaKey)!E||_.altKey||_.ctrlKey||_.shiftKey||!_.metaKey?_.key&&!_.ctrlKey&&!_.altKey&&!_.metaKey&&_.keyCode>=48&&_.key.length===1?o.key=_.key:_.key&&_.ctrlKey&&_.key==="_"&&(o.key=u.C0.US):_.keyCode===65&&(o.type=1);else{var n=p[_.keyCode],t=n&&n[_.shiftKey?1:0];if(t)o.key=u.C0.ESC+t;else if(_.keyCode>=65&&_.keyCode<=90){var r=_.ctrlKey?_.keyCode-64:_.keyCode+32;o.key=u.C0.ESC+String.fromCharCode(r)}}else _.keyCode>=65&&_.keyCode<=90?o.key=String.fromCharCode(_.keyCode-64):_.keyCode===32?o.key=u.C0.NUL:_.keyCode>=51&&_.keyCode<=55?o.key=String.fromCharCode(_.keyCode-51+27):_.keyCode===56?o.key=u.C0.DEL:_.keyCode===219?o.key=u.C0.ESC:_.keyCode===220?o.key=u.C0.FS:_.keyCode===221&&(o.key=u.C0.GS)}return o}},482:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(p){return p>65535?(p-=65536,String.fromCharCode(55296+(p>>10))+String.fromCharCode(p%1024+56320)):String.fromCharCode(p)},l.utf32ToString=function(p,_,f){_===void 0&&(_=0),f===void 0&&(f=p.length);for(var E="",v=_;v<f;++v){var o=p[v];o>65535?(o-=65536,E+=String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):E+=String.fromCharCode(o)}return E};var g=function(){function p(){this._interim=0}return p.prototype.clear=function(){this._interim=0},p.prototype.decode=function(_,f){var E=_.length;if(!E)return 0;var v=0,o=0;this._interim&&(56320<=(t=_.charCodeAt(o++))&&t<=57343?f[v++]=1024*(this._interim-55296)+t-56320+65536:(f[v++]=this._interim,f[v++]=t),this._interim=0);for(var c=o;c<E;++c){var n=_.charCodeAt(c);if(55296<=n&&n<=56319){if(++c>=E)return this._interim=n,v;var t;56320<=(t=_.charCodeAt(c))&&t<=57343?f[v++]=1024*(n-55296)+t-56320+65536:(f[v++]=n,f[v++]=t)}else n!==65279&&(f[v++]=n)}return v},p}();l.StringToUtf32=g;var u=function(){function p(){this.interim=new Uint8Array(3)}return p.prototype.clear=function(){this.interim.fill(0)},p.prototype.decode=function(_,f){var E=_.length;if(!E)return 0;var v,o,c,n,t=0,r=0,e=0;if(this.interim[0]){var i=!1,s=this.interim[0];s&=(224&s)==192?31:(240&s)==224?15:7;for(var a=0,h=void 0;(h=63&this.interim[++a])&&a<4;)s<<=6,s|=h;for(var d=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,m=d-a;e<m;){if(e>=E)return 0;if((192&(h=_[e++]))!=128){e--,i=!0;break}this.interim[a++]=h,s<<=6,s|=63&h}i||(d===2?s<128?e--:f[t++]=s:d===3?s<2048||s>=55296&&s<=57343||s===65279||(f[t++]=s):s<65536||s>1114111||(f[t++]=s)),this.interim.fill(0)}for(var y=E-4,S=e;S<E;){for(;!(!(S<y)||128&(v=_[S])||128&(o=_[S+1])||128&(c=_[S+2])||128&(n=_[S+3]));)f[t++]=v,f[t++]=o,f[t++]=c,f[t++]=n,S+=4;if((v=_[S++])<128)f[t++]=v;else if((224&v)==192){if(S>=E)return this.interim[0]=v,t;if((192&(o=_[S++]))!=128){S--;continue}if((r=(31&v)<<6|63&o)<128){S--;continue}f[t++]=r}else if((240&v)==224){if(S>=E)return this.interim[0]=v,t;if((192&(o=_[S++]))!=128){S--;continue}if(S>=E)return this.interim[0]=v,this.interim[1]=o,t;if((192&(c=_[S++]))!=128){S--;continue}if((r=(15&v)<<12|(63&o)<<6|63&c)<2048||r>=55296&&r<=57343||r===65279)continue;f[t++]=r}else if((248&v)==240){if(S>=E)return this.interim[0]=v,t;if((192&(o=_[S++]))!=128){S--;continue}if(S>=E)return this.interim[0]=v,this.interim[1]=o,t;if((192&(c=_[S++]))!=128){S--;continue}if(S>=E)return this.interim[0]=v,this.interim[1]=o,this.interim[2]=c,t;if((192&(n=_[S++]))!=128){S--;continue}if((r=(7&v)<<18|(63&o)<<12|(63&c)<<6|63&n)<65536||r>1114111)continue;f[t++]=r}}return t},p}();l.Utf8ToUtf32=u},225:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV6=void 0;var u,p=g(8273),_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],E=function(){function v(){if(this.version="6",!u){u=new Uint8Array(65536),p.fill(u,1),u[0]=0,p.fill(u,0,1,32),p.fill(u,0,127,160),p.fill(u,2,4352,4448),u[9001]=2,u[9002]=2,p.fill(u,2,11904,42192),u[12351]=1,p.fill(u,2,44032,55204),p.fill(u,2,63744,64256),p.fill(u,2,65040,65050),p.fill(u,2,65072,65136),p.fill(u,2,65280,65377),p.fill(u,2,65504,65511);for(var o=0;o<_.length;++o)p.fill(u,0,_[o][0],_[o][1]+1)}}return v.prototype.wcwidth=function(o){return o<32?0:o<127?1:o<65536?u[o]:function(c,n){var t,r=0,e=n.length-1;if(c<n[0][0]||c>n[e][1])return!1;for(;e>=r;)if(c>n[t=r+e>>1][1])r=t+1;else{if(!(c<n[t][0]))return!0;e=t-1}return!1}(o,f)?0:o>=131072&&o<=196605||o>=196608&&o<=262141?2:1},v}();l.UnicodeV6=E},5981:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.WriteBuffer=void 0;var g=typeof queueMicrotask=="undefined"?function(p){Promise.resolve().then(p)}:queueMicrotask,u=function(){function p(_){this._action=_,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return p.prototype.writeSync=function(_,f){if(f!==void 0&&this._syncCalls>f)this._syncCalls=0;else if(this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var E;for(this._isSyncWriting=!0;E=this._writeBuffer.shift();){this._action(E);var v=this._callbacks.shift();v&&v()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},p.prototype.write=function(_,f){var E=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return E._innerWrite()})),this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(f)},p.prototype._innerWrite=function(_,f){var E=this;_===void 0&&(_=0),f===void 0&&(f=!0);for(var v=_||Date.now();this._writeBuffer.length>this._bufferOffset;){var o=this._writeBuffer[this._bufferOffset],c=this._action(o,f);if(c)return void c.catch(function(t){return g(function(){throw t}),Promise.resolve(!1)}).then(function(t){return Date.now()-v>=12?setTimeout(function(){return E._innerWrite(0,t)}):E._innerWrite(v,t)});var n=this._callbacks[this._bufferOffset];if(n&&n(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return E._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},p}();l.WriteBuffer=u},5770:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.PAYLOAD_LIMIT=void 0,l.PAYLOAD_LIMIT=1e7},6351:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.DcsHandler=l.DcsParser=void 0;var u=g(482),p=g(8742),_=g(5770),f=[],E=function(){function c(){this._handlers=Object.create(null),this._active=f,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return c.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=f},c.prototype.registerHandler=function(n,t){this._handlers[n]===void 0&&(this._handlers[n]=[]);var r=this._handlers[n];return r.push(t),{dispose:function(){var i=r.indexOf(t);i!==-1&&r.splice(i,1)}}},c.prototype.clearHandler=function(n){this._handlers[n]&&delete this._handlers[n]},c.prototype.setHandlerFallback=function(n){this._handlerFb=n},c.prototype.reset=function(){if(this._active.length)for(var n=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;n>=0;--n)this._active[n].unhook(!1);this._stack.paused=!1,this._active=f,this._ident=0},c.prototype.hook=function(n,t){if(this.reset(),this._ident=n,this._active=this._handlers[n]||f,this._active.length)for(var r=this._active.length-1;r>=0;r--)this._active[r].hook(t);else this._handlerFb(this._ident,"HOOK",t)},c.prototype.put=function(n,t,r){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(n,t,r);else this._handlerFb(this._ident,"PUT",u.utf32ToString(n,t,r))},c.prototype.unhook=function(n,t){if(t===void 0&&(t=!0),this._active.length){var r=!1,e=this._active.length-1,i=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,r=t,i=this._stack.fallThrough,this._stack.paused=!1),!i&&r===!1){for(;e>=0&&(r=this._active[e].unhook(n))!==!0;e--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,r;e--}for(;e>=0;e--)if((r=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",n);this._active=f,this._ident=0},c}();l.DcsParser=E;var v=new p.Params;v.addParam(0);var o=function(){function c(n){this._handler=n,this._data="",this._params=v,this._hitLimit=!1}return c.prototype.hook=function(n){this._params=n.length>1||n.params[0]?n.clone():v,this._data="",this._hitLimit=!1},c.prototype.put=function(n,t,r){this._hitLimit||(this._data+=u.utf32ToString(n,t,r),this._data.length>_.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},c.prototype.unhook=function(n){var t=this,r=!1;if(this._hitLimit)r=!1;else if(n&&(r=this._handler(this._data,this._params))instanceof Promise)return r.then(function(e){return t._params=v,t._data="",t._hitLimit=!1,e});return this._params=v,this._data="",this._hitLimit=!1,r},c}();l.DcsHandler=o},2015:function(H,l,g){var u,p=this&&this.__extends||(u=function(e,i){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(s[h]=a[h])})(e,i)},function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=r}u(r,e),r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.EscapeSequenceParser=l.VT500_TRANSITION_TABLE=l.TransitionTable=void 0;var _=g(844),f=g(8273),E=g(8742),v=g(6242),o=g(6351),c=function(){function r(e){this.table=new Uint8Array(e)}return r.prototype.setDefault=function(e,i){f.fill(this.table,e<<4|i)},r.prototype.add=function(e,i,s,a){this.table[i<<8|e]=s<<4|a},r.prototype.addMany=function(e,i,s,a){for(var h=0;h<e.length;h++)this.table[i<<8|e[h]]=s<<4|a},r}();l.TransitionTable=c;var n=160;l.VT500_TRANSITION_TABLE=function(){var r=new c(4095),e=Array.apply(null,Array(256)).map(function(m,y){return y}),i=function(y,S){return e.slice(y,S)},s=i(32,127),a=i(0,24);a.push(25),a.push.apply(a,i(28,32));var h,d=i(0,14);for(h in r.setDefault(1,0),r.addMany(s,0,2,0),d)r.addMany([24,26,153,154],h,3,0),r.addMany(i(128,144),h,3,0),r.addMany(i(144,152),h,3,0),r.add(156,h,0,0),r.add(27,h,11,1),r.add(157,h,4,8),r.addMany([152,158,159],h,0,7),r.add(155,h,11,3),r.add(144,h,11,9);return r.addMany(a,0,3,0),r.addMany(a,1,3,1),r.add(127,1,0,1),r.addMany(a,8,0,8),r.addMany(a,3,3,3),r.add(127,3,0,3),r.addMany(a,4,3,4),r.add(127,4,0,4),r.addMany(a,6,3,6),r.addMany(a,5,3,5),r.add(127,5,0,5),r.addMany(a,2,3,2),r.add(127,2,0,2),r.add(93,1,4,8),r.addMany(s,8,5,8),r.add(127,8,5,8),r.addMany([156,27,24,26,7],8,6,0),r.addMany(i(28,32),8,0,8),r.addMany([88,94,95],1,0,7),r.addMany(s,7,0,7),r.addMany(a,7,0,7),r.add(156,7,0,0),r.add(127,7,0,7),r.add(91,1,11,3),r.addMany(i(64,127),3,7,0),r.addMany(i(48,60),3,8,4),r.addMany([60,61,62,63],3,9,4),r.addMany(i(48,60),4,8,4),r.addMany(i(64,127),4,7,0),r.addMany([60,61,62,63],4,0,6),r.addMany(i(32,64),6,0,6),r.add(127,6,0,6),r.addMany(i(64,127),6,0,0),r.addMany(i(32,48),3,9,5),r.addMany(i(32,48),5,9,5),r.addMany(i(48,64),5,0,6),r.addMany(i(64,127),5,7,0),r.addMany(i(32,48),4,9,5),r.addMany(i(32,48),1,9,2),r.addMany(i(32,48),2,9,2),r.addMany(i(48,127),2,10,0),r.addMany(i(48,80),1,10,0),r.addMany(i(81,88),1,10,0),r.addMany([89,90,92],1,10,0),r.addMany(i(96,127),1,10,0),r.add(80,1,11,9),r.addMany(a,9,0,9),r.add(127,9,0,9),r.addMany(i(28,32),9,0,9),r.addMany(i(32,48),9,9,12),r.addMany(i(48,60),9,8,10),r.addMany([60,61,62,63],9,9,10),r.addMany(a,11,0,11),r.addMany(i(32,128),11,0,11),r.addMany(i(28,32),11,0,11),r.addMany(a,10,0,10),r.add(127,10,0,10),r.addMany(i(28,32),10,0,10),r.addMany(i(48,60),10,8,10),r.addMany([60,61,62,63],10,0,11),r.addMany(i(32,48),10,9,12),r.addMany(a,12,0,12),r.add(127,12,0,12),r.addMany(i(28,32),12,0,12),r.addMany(i(32,48),12,9,12),r.addMany(i(48,64),12,0,11),r.addMany(i(64,127),12,12,13),r.addMany(i(64,127),10,12,13),r.addMany(i(64,127),9,12,13),r.addMany(a,13,13,13),r.addMany(s,13,13,13),r.add(127,13,0,13),r.addMany([27,156,24,26],13,14,0),r.add(n,0,2,0),r.add(n,8,5,8),r.add(n,6,0,6),r.add(n,11,0,11),r.add(n,13,13,13),r}();var t=function(r){function e(i){i===void 0&&(i=l.VT500_TRANSITION_TABLE);var s=r.call(this)||this;return s._transitions=i,s._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},s.initialState=0,s.currentState=s.initialState,s._params=new E.Params,s._params.addParam(0),s._collect=0,s.precedingCodepoint=0,s._printHandlerFb=function(a,h,d){},s._executeHandlerFb=function(a){},s._csiHandlerFb=function(a,h){},s._escHandlerFb=function(a){},s._errorHandlerFb=function(a){return a},s._printHandler=s._printHandlerFb,s._executeHandlers=Object.create(null),s._csiHandlers=Object.create(null),s._escHandlers=Object.create(null),s._oscParser=new v.OscParser,s._dcsParser=new o.DcsParser,s._errorHandler=s._errorHandlerFb,s.registerEscHandler({final:"\\"},function(){return!0}),s}return p(e,r),e.prototype._identifier=function(i,s){s===void 0&&(s=[64,126]);var a=0;if(i.prefix){if(i.prefix.length>1)throw new Error("only one byte as prefix supported");if((a=i.prefix.charCodeAt(0))&&60>a||a>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(i.intermediates){if(i.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var h=0;h<i.intermediates.length;++h){var d=i.intermediates.charCodeAt(h);if(32>d||d>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");a<<=8,a|=d}}if(i.final.length!==1)throw new Error("final must be a single byte");var m=i.final.charCodeAt(0);if(s[0]>m||m>s[1])throw new Error("final must be in range "+s[0]+" .. "+s[1]);return(a<<=8)|m},e.prototype.identToString=function(i){for(var s=[];i;)s.push(String.fromCharCode(255&i)),i>>=8;return s.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(i){this._printHandler=i},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(i,s){var a=this._identifier(i,[48,126]);this._escHandlers[a]===void 0&&(this._escHandlers[a]=[]);var h=this._escHandlers[a];return h.push(s),{dispose:function(){var m=h.indexOf(s);m!==-1&&h.splice(m,1)}}},e.prototype.clearEscHandler=function(i){this._escHandlers[this._identifier(i,[48,126])]&&delete this._escHandlers[this._identifier(i,[48,126])]},e.prototype.setEscHandlerFallback=function(i){this._escHandlerFb=i},e.prototype.setExecuteHandler=function(i,s){this._executeHandlers[i.charCodeAt(0)]=s},e.prototype.clearExecuteHandler=function(i){this._executeHandlers[i.charCodeAt(0)]&&delete this._executeHandlers[i.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(i){this._executeHandlerFb=i},e.prototype.registerCsiHandler=function(i,s){var a=this._identifier(i);this._csiHandlers[a]===void 0&&(this._csiHandlers[a]=[]);var h=this._csiHandlers[a];return h.push(s),{dispose:function(){var m=h.indexOf(s);m!==-1&&h.splice(m,1)}}},e.prototype.clearCsiHandler=function(i){this._csiHandlers[this._identifier(i)]&&delete this._csiHandlers[this._identifier(i)]},e.prototype.setCsiHandlerFallback=function(i){this._csiHandlerFb=i},e.prototype.registerDcsHandler=function(i,s){return this._dcsParser.registerHandler(this._identifier(i),s)},e.prototype.clearDcsHandler=function(i){this._dcsParser.clearHandler(this._identifier(i))},e.prototype.setDcsHandlerFallback=function(i){this._dcsParser.setHandlerFallback(i)},e.prototype.registerOscHandler=function(i,s){return this._oscParser.registerHandler(i,s)},e.prototype.clearOscHandler=function(i){this._oscParser.clearHandler(i)},e.prototype.setOscHandlerFallback=function(i){this._oscParser.setHandlerFallback(i)},e.prototype.setErrorHandler=function(i){this._errorHandler=i},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(i,s,a,h,d){this._parseStack.state=i,this._parseStack.handlers=s,this._parseStack.handlerPos=a,this._parseStack.transition=h,this._parseStack.chunkPos=d},e.prototype.parse=function(i,s,a){var h,d=0,m=0,y=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,y=this._parseStack.chunkPos+1;else{if(a===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var S=this._parseStack.handlers,C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(a===!1&&C>-1){for(;C>=0&&(h=S[C](this._params))!==!0;C--)if(h instanceof Promise)return this._parseStack.handlerPos=C,h}this._parseStack.handlers=[];break;case 4:if(a===!1&&C>-1){for(;C>=0&&(h=S[C]())!==!0;C--)if(h instanceof Promise)return this._parseStack.handlerPos=C,h}this._parseStack.handlers=[];break;case 6:if(d=i[this._parseStack.chunkPos],h=this._dcsParser.unhook(d!==24&&d!==26,a))return h;d===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(d=i[this._parseStack.chunkPos],h=this._oscParser.end(d!==24&&d!==26,a))return h;d===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,y=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var A=y;A<s;++A){switch(d=i[A],(m=this._transitions.table[this.currentState<<8|(d<160?d:n)])>>4){case 2:for(var L=A+1;;++L){if(L>=s||(d=i[L])<32||d>126&&d<n){this._printHandler(i,A,L),A=L-1;break}if(++L>=s||(d=i[L])<32||d>126&&d<n){this._printHandler(i,A,L),A=L-1;break}if(++L>=s||(d=i[L])<32||d>126&&d<n){this._printHandler(i,A,L),A=L-1;break}if(++L>=s||(d=i[L])<32||d>126&&d<n){this._printHandler(i,A,L),A=L-1;break}}break;case 3:this._executeHandlers[d]?this._executeHandlers[d]():this._executeHandlerFb(d),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:A,code:d,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var x=(S=this._csiHandlers[this._collect<<8|d])?S.length-1:-1;x>=0&&(h=S[x](this._params))!==!0;x--)if(h instanceof Promise)return this._preserveStack(3,S,x,m,A),h;x<0&&this._csiHandlerFb(this._collect<<8|d,this._params),this.precedingCodepoint=0;break;case 8:do switch(d){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(d-48)}while(++A<s&&(d=i[A])>47&&d<60);A--;break;case 9:this._collect<<=8,this._collect|=d;break;case 10:for(var w=this._escHandlers[this._collect<<8|d],b=w?w.length-1:-1;b>=0&&(h=w[b]())!==!0;b--)if(h instanceof Promise)return this._preserveStack(4,w,b,m,A),h;b<0&&this._escHandlerFb(this._collect<<8|d),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|d,this._params);break;case 13:for(var D=A+1;;++D)if(D>=s||(d=i[D])===24||d===26||d===27||d>127&&d<n){this._dcsParser.put(i,A,D),A=D-1;break}break;case 14:if(h=this._dcsParser.unhook(d!==24&&d!==26))return this._preserveStack(6,[],0,m,A),h;d===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var R=A+1;;R++)if(R>=s||(d=i[R])<32||d>127&&d<n){this._oscParser.put(i,A,R),A=R-1;break}break;case 6:if(h=this._oscParser.end(d!==24&&d!==26))return this._preserveStack(5,[],0,m,A),h;d===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&m}},e}(_.Disposable);l.EscapeSequenceParser=t},6242:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.OscHandler=l.OscParser=void 0;var u=g(5770),p=g(482),_=[],f=function(){function v(){this._state=0,this._active=_,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return v.prototype.registerHandler=function(o,c){this._handlers[o]===void 0&&(this._handlers[o]=[]);var n=this._handlers[o];return n.push(c),{dispose:function(){var r=n.indexOf(c);r!==-1&&n.splice(r,1)}}},v.prototype.clearHandler=function(o){this._handlers[o]&&delete this._handlers[o]},v.prototype.setHandlerFallback=function(o){this._handlerFb=o},v.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=_},v.prototype.reset=function(){if(this._state===2)for(var o=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;o>=0;--o)this._active[o].end(!1);this._stack.paused=!1,this._active=_,this._id=-1,this._state=0},v.prototype._start=function(){if(this._active=this._handlers[this._id]||_,this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].start();else this._handlerFb(this._id,"START")},v.prototype._put=function(o,c,n){if(this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].put(o,c,n);else this._handlerFb(this._id,"PUT",p.utf32ToString(o,c,n))},v.prototype.start=function(){this.reset(),this._state=1},v.prototype.put=function(o,c,n){if(this._state!==3){if(this._state===1)for(;c<n;){var t=o[c++];if(t===59){this._state=2,this._start();break}if(t<48||57<t)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+t-48}this._state===2&&n-c>0&&this._put(o,c,n)}},v.prototype.end=function(o,c){if(c===void 0&&(c=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var n=!1,t=this._active.length-1,r=!1;if(this._stack.paused&&(t=this._stack.loopPosition-1,n=c,r=this._stack.fallThrough,this._stack.paused=!1),!r&&n===!1){for(;t>=0&&(n=this._active[t].end(o))!==!0;t--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=t,this._stack.fallThrough=!1,n;t--}for(;t>=0;t--)if((n=this._active[t].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=t,this._stack.fallThrough=!0,n}else this._handlerFb(this._id,"END",o);this._active=_,this._id=-1,this._state=0}},v}();l.OscParser=f;var E=function(){function v(o){this._handler=o,this._data="",this._hitLimit=!1}return v.prototype.start=function(){this._data="",this._hitLimit=!1},v.prototype.put=function(o,c,n){this._hitLimit||(this._data+=p.utf32ToString(o,c,n),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},v.prototype.end=function(o){var c=this,n=!1;if(this._hitLimit)n=!1;else if(o&&(n=this._handler(this._data))instanceof Promise)return n.then(function(t){return c._data="",c._hitLimit=!1,t});return this._data="",this._hitLimit=!1,n},v}();l.OscHandler=E},8742:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.Params=void 0;var g=2147483647,u=function(){function p(_,f){if(_===void 0&&(_=32),f===void 0&&(f=32),this.maxLength=_,this.maxSubParamsLength=f,f>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(_),this.length=0,this._subParams=new Int32Array(f),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(_),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return p.fromArray=function(_){var f=new p;if(!_.length)return f;for(var E=_[0]instanceof Array?1:0;E<_.length;++E){var v=_[E];if(v instanceof Array)for(var o=0;o<v.length;++o)f.addSubParam(v[o]);else f.addParam(v)}return f},p.prototype.clone=function(){var _=new p(this.maxLength,this.maxSubParamsLength);return _.params.set(this.params),_.length=this.length,_._subParams.set(this._subParams),_._subParamsLength=this._subParamsLength,_._subParamsIdx.set(this._subParamsIdx),_._rejectDigits=this._rejectDigits,_._rejectSubDigits=this._rejectSubDigits,_._digitIsSub=this._digitIsSub,_},p.prototype.toArray=function(){for(var _=[],f=0;f<this.length;++f){_.push(this.params[f]);var E=this._subParamsIdx[f]>>8,v=255&this._subParamsIdx[f];v-E>0&&_.push(Array.prototype.slice.call(this._subParams,E,v))}return _},p.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},p.prototype.addParam=function(_){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(_<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=_>g?g:_}},p.prototype.addSubParam=function(_){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(_<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=_>g?g:_,this._subParamsIdx[this.length-1]++}},p.prototype.hasSubParams=function(_){return(255&this._subParamsIdx[_])-(this._subParamsIdx[_]>>8)>0},p.prototype.getSubParams=function(_){var f=this._subParamsIdx[_]>>8,E=255&this._subParamsIdx[_];return E-f>0?this._subParams.subarray(f,E):null},p.prototype.getSubParamsAll=function(){for(var _={},f=0;f<this.length;++f){var E=this._subParamsIdx[f]>>8,v=255&this._subParamsIdx[f];v-E>0&&(_[f]=this._subParams.slice(E,v))}return _},p.prototype.addDigit=function(_){var f;if(!(this._rejectDigits||!(f=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var E=this._digitIsSub?this._subParams:this.params,v=E[f-1];E[f-1]=~v?Math.min(10*v+_,g):_}},p}();l.Params=u},744:function(H,l,g){var u,p=this&&this.__extends||(u=function(r,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])})(r,e)},function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}u(t,r),t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),_=this&&this.__decorate||function(t,r,e,i){var s,a=arguments.length,h=a<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(t,r,e,i);else for(var d=t.length-1;d>=0;d--)(s=t[d])&&(h=(a<3?s(h):a>3?s(r,e,h):s(r,e))||h);return a>3&&h&&Object.defineProperty(r,e,h),h},f=this&&this.__param||function(t,r){return function(e,i){r(e,i,t)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferService=l.MINIMUM_ROWS=l.MINIMUM_COLS=void 0;var E=g(2585),v=g(5295),o=g(8460),c=g(844);l.MINIMUM_COLS=2,l.MINIMUM_ROWS=1;var n=function(t){function r(e){var i=t.call(this)||this;return i._optionsService=e,i.isUserScrolling=!1,i._onResize=new o.EventEmitter,i._onScroll=new o.EventEmitter,i.cols=Math.max(e.options.cols,l.MINIMUM_COLS),i.rows=Math.max(e.options.rows,l.MINIMUM_ROWS),i.buffers=new v.BufferSet(e,i),i}return p(r,t),Object.defineProperty(r.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){t.prototype.dispose.call(this),this.buffers.dispose()},r.prototype.resize=function(e,i){this.cols=e,this.rows=i,this.buffers.resize(e,i),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:i})},r.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},r.prototype.scroll=function(e,i){i===void 0&&(i=!1);var s,a=this.buffer;(s=this._cachedBlankLine)&&s.length===this.cols&&s.getFg(0)===e.fg&&s.getBg(0)===e.bg||(s=a.getBlankLine(e,i),this._cachedBlankLine=s),s.isWrapped=i;var h=a.ybase+a.scrollTop,d=a.ybase+a.scrollBottom;if(a.scrollTop===0){var m=a.lines.isFull;d===a.lines.length-1?m?a.lines.recycle().copyFrom(s):a.lines.push(s.clone()):a.lines.splice(d+1,0,s.clone()),m?this.isUserScrolling&&(a.ydisp=Math.max(a.ydisp-1,0)):(a.ybase++,this.isUserScrolling||a.ydisp++)}else{var y=d-h+1;a.lines.shiftElements(h+1,y-1,-1),a.lines.set(d,s.clone())}this.isUserScrolling||(a.ydisp=a.ybase),this._onScroll.fire(a.ydisp)},r.prototype.scrollLines=function(e,i,s){var a=this.buffer;if(e<0){if(a.ydisp===0)return;this.isUserScrolling=!0}else e+a.ydisp>=a.ybase&&(this.isUserScrolling=!1);var h=a.ydisp;a.ydisp=Math.max(Math.min(a.ydisp+e,a.ybase),0),h!==a.ydisp&&(i||this._onScroll.fire(a.ydisp))},r.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},r.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},r.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},r.prototype.scrollToLine=function(e){var i=e-this.buffer.ydisp;i!==0&&this.scrollLines(i)},_([f(0,E.IOptionsService)],r)}(c.Disposable);l.BufferService=n},7994:function(H,l){Object.defineProperty(l,"__esModule",{value:!0}),l.CharsetService=void 0;var g=function(){function u(){this.glevel=0,this._charsets=[]}return u.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},u.prototype.setgLevel=function(p){this.glevel=p,this.charset=this._charsets[p]},u.prototype.setgCharset=function(p,_){this._charsets[p]=_,this.glevel===p&&(this.charset=_)},u}();l.CharsetService=g},1753:function(H,l,g){var u=this&&this.__decorate||function(t,r,e,i){var s,a=arguments.length,h=a<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(t,r,e,i);else for(var d=t.length-1;d>=0;d--)(s=t[d])&&(h=(a<3?s(h):a>3?s(r,e,h):s(r,e))||h);return a>3&&h&&Object.defineProperty(r,e,h),h},p=this&&this.__param||function(t,r){return function(e,i){r(e,i,t)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreMouseService=void 0;var _=g(2585),f=g(8460),E={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(r){return r.button!==4&&r.action===1&&(r.ctrl=!1,r.alt=!1,r.shift=!1,!0)}},VT200:{events:19,restrict:function(r){return r.action!==32}},DRAG:{events:23,restrict:function(r){return r.action!==32||r.button!==3}},ANY:{events:31,restrict:function(r){return!0}}};function v(t,r){var e=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return t.button===4?(e|=64,e|=t.action):(e|=3&t.button,4&t.button&&(e|=64),8&t.button&&(e|=128),t.action===32?e|=32:t.action!==0||r||(e|=3)),e}var o=String.fromCharCode,c={DEFAULT:function(r){var e=[v(r,!1)+32,r.col+32,r.row+32];return e[0]>255||e[1]>255||e[2]>255?"":"[M"+o(e[0])+o(e[1])+o(e[2])},SGR:function(r){var e=r.action===0&&r.button!==4?"m":"M";return"[<"+v(r,!0)+";"+r.col+";"+r.row+e}},n=function(){function t(r,e){this._bufferService=r,this._coreService=e,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new f.EventEmitter,this._lastEvent=null;for(var i=0,s=Object.keys(E);i<s.length;i++){var a=s[i];this.addProtocol(a,E[a])}for(var h=0,d=Object.keys(c);h<d.length;h++){var m=d[h];this.addEncoding(m,c[m])}this.reset()}return t.prototype.addProtocol=function(r,e){this._protocols[r]=e},t.prototype.addEncoding=function(r,e){this._encodings[r]=e},Object.defineProperty(t.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(e){if(!this._protocols[e])throw new Error('unknown protocol "'+e+'"');this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(e){if(!this._encodings[e])throw new Error('unknown encoding "'+e+'"');this._activeEncoding=e},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(t.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),t.prototype.triggerMouseEvent=function(r){if(r.col<0||r.col>=this._bufferService.cols||r.row<0||r.row>=this._bufferService.rows||r.button===4&&r.action===32||r.button===3&&r.action!==32||r.button!==4&&(r.action===2||r.action===3)||(r.col++,r.row++,r.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,r))||!this._protocols[this._activeProtocol].restrict(r))return!1;var e=this._encodings[this._activeEncoding](r);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=r,!0},t.prototype.explainEvents=function(r){return{down:!!(1&r),up:!!(2&r),drag:!!(4&r),move:!!(8&r),wheel:!!(16&r)}},t.prototype._compareEvents=function(r,e){return r.col===e.col&&r.row===e.row&&r.button===e.button&&r.action===e.action&&r.ctrl===e.ctrl&&r.alt===e.alt&&r.shift===e.shift},u([p(0,_.IBufferService),p(1,_.ICoreService)],t)}();l.CoreMouseService=n},6975:function(H,l,g){var u,p=this&&this.__extends||(u=function(i,s){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,h){a.__proto__=h}||function(a,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(a[d]=h[d])})(i,s)},function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}u(e,i),e.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}),_=this&&this.__decorate||function(e,i,s,a){var h,d=arguments.length,m=d<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,i,s,a);else for(var y=e.length-1;y>=0;y--)(h=e[y])&&(m=(d<3?h(m):d>3?h(i,s,m):h(i,s))||m);return d>3&&m&&Object.defineProperty(i,s,m),m},f=this&&this.__param||function(e,i){return function(s,a){i(s,a,e)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreService=void 0;var E=g(2585),v=g(8460),o=g(1439),c=g(844),n=Object.freeze({insertMode:!1}),t=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),r=function(e){function i(s,a,h,d){var m=e.call(this)||this;return m._bufferService=a,m._logService=h,m._optionsService=d,m.isCursorInitialized=!1,m.isCursorHidden=!1,m._onData=m.register(new v.EventEmitter),m._onUserInput=m.register(new v.EventEmitter),m._onBinary=m.register(new v.EventEmitter),m._scrollToBottom=s,m.register({dispose:function(){return m._scrollToBottom=void 0}}),m.modes=o.clone(n),m.decPrivateModes=o.clone(t),m}return p(i,e),Object.defineProperty(i.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.modes=o.clone(n),this.decPrivateModes=o.clone(t)},i.prototype.triggerDataEvent=function(s,a){if(a===void 0&&(a=!1),!this._optionsService.options.disableStdin){var h=this._bufferService.buffer;h.ybase!==h.ydisp&&this._scrollToBottom(),a&&this._onUserInput.fire(),this._logService.debug('sending data "'+s+'"',function(){return s.split("").map(function(d){return d.charCodeAt(0)})}),this._onData.fire(s)}},i.prototype.triggerBinaryEvent=function(s){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+s+'"',function(){return s.split("").map(function(a){return a.charCodeAt(0)})}),this._onBinary.fire(s))},_([f(1,E.IBufferService),f(2,E.ILogService),f(3,E.IOptionsService)],i)}(c.Disposable);l.CoreService=r},3730:function(H,l,g){var u=this&&this.__decorate||function(E,v,o,c){var n,t=arguments.length,r=t<3?v:c===null?c=Object.getOwnPropertyDescriptor(v,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(E,v,o,c);else for(var e=E.length-1;e>=0;e--)(n=E[e])&&(r=(t<3?n(r):t>3?n(v,o,r):n(v,o))||r);return t>3&&r&&Object.defineProperty(v,o,r),r},p=this&&this.__param||function(E,v){return function(o,c){v(o,c,E)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DirtyRowService=void 0;var _=g(2585),f=function(){function E(v){this._bufferService=v,this.clearRange()}return Object.defineProperty(E.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),E.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},E.prototype.markDirty=function(v){v<this._start?this._start=v:v>this._end&&(this._end=v)},E.prototype.markRangeDirty=function(v,o){if(v>o){var c=v;v=o,o=c}v<this._start&&(this._start=v),o>this._end&&(this._end=o)},E.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},u([p(0,_.IBufferService)],E)}();l.DirtyRowService=f},4348:function(H,l,g){var u=this&&this.__spreadArray||function(v,o){for(var c=0,n=o.length,t=v.length;c<n;c++,t++)v[t]=o[c];return v};Object.defineProperty(l,"__esModule",{value:!0}),l.InstantiationService=l.ServiceCollection=void 0;var p=g(2585),_=g(8343),f=function(){function v(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];this._entries=new Map;for(var n=0,t=o;n<t.length;n++){var r=t[n],e=r[0],i=r[1];this.set(e,i)}}return v.prototype.set=function(o,c){var n=this._entries.get(o);return this._entries.set(o,c),n},v.prototype.forEach=function(o){this._entries.forEach(function(c,n){return o(n,c)})},v.prototype.has=function(o){return this._entries.has(o)},v.prototype.get=function(o){return this._entries.get(o)},v}();l.ServiceCollection=f;var E=function(){function v(){this._services=new f,this._services.set(p.IInstantiationService,this)}return v.prototype.setService=function(o,c){this._services.set(o,c)},v.prototype.getService=function(o){return this._services.get(o)},v.prototype.createInstance=function(o){for(var c=[],n=1;n<arguments.length;n++)c[n-1]=arguments[n];for(var t=_.getServiceDependencies(o).sort(function(d,m){return d.index-m.index}),r=[],e=0,i=t;e<i.length;e++){var s=i[e],a=this._services.get(s.id);if(!a)throw new Error("[createInstance] "+o.name+" depends on UNKNOWN service "+s.id+".");r.push(a)}var h=t.length>0?t[0].index:c.length;if(c.length!==h)throw new Error("[createInstance] First service dependency of "+o.name+" at position "+(h+1)+" conflicts with "+c.length+" static arguments");return new(o.bind.apply(o,u([void 0],u(u([],c),r))))},v}();l.InstantiationService=E},7866:function(H,l,g){var u=this&&this.__decorate||function(o,c,n,t){var r,e=arguments.length,i=e<3?c:t===null?t=Object.getOwnPropertyDescriptor(c,n):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,c,n,t);else for(var s=o.length-1;s>=0;s--)(r=o[s])&&(i=(e<3?r(i):e>3?r(c,n,i):r(c,n))||i);return e>3&&i&&Object.defineProperty(c,n,i),i},p=this&&this.__param||function(o,c){return function(n,t){c(n,t,o)}},_=this&&this.__spreadArray||function(o,c){for(var n=0,t=c.length,r=o.length;n<t;n++,r++)o[r]=c[n];return o};Object.defineProperty(l,"__esModule",{value:!0}),l.LogService=void 0;var f=g(2585),E={debug:f.LogLevelEnum.DEBUG,info:f.LogLevelEnum.INFO,warn:f.LogLevelEnum.WARN,error:f.LogLevelEnum.ERROR,off:f.LogLevelEnum.OFF},v=function(){function o(c){var n=this;this._optionsService=c,this.logLevel=f.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(t){t==="logLevel"&&n._updateLogLevel()})}return o.prototype._updateLogLevel=function(){this.logLevel=E[this._optionsService.options.logLevel]},o.prototype._evalLazyOptionalParams=function(c){for(var n=0;n<c.length;n++)typeof c[n]=="function"&&(c[n]=c[n]())},o.prototype._log=function(c,n,t){this._evalLazyOptionalParams(t),c.call.apply(c,_([console,"xterm.js: "+n],t))},o.prototype.debug=function(c){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];this.logLevel<=f.LogLevelEnum.DEBUG&&this._log(console.log,c,n)},o.prototype.info=function(c){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];this.logLevel<=f.LogLevelEnum.INFO&&this._log(console.info,c,n)},o.prototype.warn=function(c){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];this.logLevel<=f.LogLevelEnum.WARN&&this._log(console.warn,c,n)},o.prototype.error=function(c){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];this.logLevel<=f.LogLevelEnum.ERROR&&this._log(console.error,c,n)},u([p(0,f.IOptionsService)],o)}();l.LogService=v},7302:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.OptionsService=l.DEFAULT_OPTIONS=l.DEFAULT_BELL_SOUND=void 0;var u=g(8460),p=g(6114),_=g(1439);l.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",l.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,bellSound:l.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1});var f=["normal","bold","100","200","300","400","500","600","700","800","900"],E=["cols","rows"],v=function(){function o(c){this._onOptionChange=new u.EventEmitter,this.options=_.clone(l.DEFAULT_OPTIONS);for(var n=0,t=Object.keys(c);n<t.length;n++){var r=t[n];if(r in this.options)try{var e=c[r];this.options[r]=this._sanitizeAndValidateOption(r,e)}catch(i){console.error(i)}}}return Object.defineProperty(o.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),o.prototype.setOption=function(c,n){if(!(c in l.DEFAULT_OPTIONS))throw new Error('No option with key "'+c+'"');if(E.includes(c))throw new Error('Option "'+c+'" can only be set in the constructor');this.options[c]!==n&&(n=this._sanitizeAndValidateOption(c,n),this.options[c]!==n&&(this.options[c]=n,this._onOptionChange.fire(c)))},o.prototype._sanitizeAndValidateOption=function(c,n){switch(c){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":n||(n=l.DEFAULT_OPTIONS[c]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=f.includes(n)?n:l.DEFAULT_OPTIONS[c];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(c+" cannot be less than 1, value: "+n);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(c+" cannot be less than 0, value: "+n);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(c+" cannot be less than or equal to 0, value: "+n)}return n},o.prototype.getOption=function(c){if(!(c in l.DEFAULT_OPTIONS))throw new Error('No option with key "'+c+'"');return this.options[c]},o}();l.OptionsService=v},8343:function(H,l){function g(u,p,_){p.di$target===p?p.di$dependencies.push({id:u,index:_}):(p.di$dependencies=[{id:u,index:_}],p.di$target=p)}Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0,l.serviceRegistry=new Map,l.getServiceDependencies=function(u){return u.di$dependencies||[]},l.createDecorator=function(u){if(l.serviceRegistry.has(u))return l.serviceRegistry.get(u);var p=function _(f,E,v){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");g(_,f,v)};return p.toString=function(){return u},l.serviceRegistry.set(u,p),p}},2585:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.IUnicodeService=l.LogLevelEnum=l.IOptionsService=l.ILogService=l.IInstantiationService=l.IDirtyRowService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;var u,p=g(8343);l.IBufferService=p.createDecorator("BufferService"),l.ICoreMouseService=p.createDecorator("CoreMouseService"),l.ICoreService=p.createDecorator("CoreService"),l.ICharsetService=p.createDecorator("CharsetService"),l.IDirtyRowService=p.createDecorator("DirtyRowService"),l.IInstantiationService=p.createDecorator("InstantiationService"),l.ILogService=p.createDecorator("LogService"),l.IOptionsService=p.createDecorator("OptionsService"),(u=l.LogLevelEnum||(l.LogLevelEnum={}))[u.DEBUG=0]="DEBUG",u[u.INFO=1]="INFO",u[u.WARN=2]="WARN",u[u.ERROR=3]="ERROR",u[u.OFF=4]="OFF",l.IUnicodeService=p.createDecorator("UnicodeService")},1480:function(H,l,g){Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeService=void 0;var u=g(8460),p=g(225),_=function(){function f(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter;var E=new p.UnicodeV6;this.register(E),this._active=E.version,this._activeProvider=E}return Object.defineProperty(f.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"activeVersion",{get:function(){return this._active},set:function(v){if(!this._providers[v])throw new Error('unknown Unicode version "'+v+'"');this._active=v,this._activeProvider=this._providers[v],this._onChange.fire(v)},enumerable:!1,configurable:!0}),f.prototype.register=function(E){this._providers[E.version]=E},f.prototype.wcwidth=function(E){return this._activeProvider.wcwidth(E)},f.prototype.getStringCellWidth=function(E){for(var v=0,o=E.length,c=0;c<o;++c){var n=E.charCodeAt(c);if(55296<=n&&n<=56319){if(++c>=o)return v+this.wcwidth(n);var t=E.charCodeAt(c);56320<=t&&t<=57343?n=1024*(n-55296)+t-56320+65536:v+=this.wcwidth(t)}v+=this.wcwidth(n)}return v},f}();l.UnicodeService=_}},K={};function Z(M){var H=K[M];if(H!==void 0)return H.exports;var l=K[M]={exports:{}};return J[M].call(l.exports,l,l.exports,Z),l.exports}var z={};return function(){var M=z;Object.defineProperty(M,"__esModule",{value:!0}),M.Terminal=void 0;var H=Z(511),l=Z(3236),g=Z(9042),u=Z(8460),p=Z(244),_=function(){function n(t){this._core=new l.Terminal(t),this._addonManager=new p.AddonManager}return n.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(n.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new o(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"unicode",{get:function(){return this._checkProposedApi(),new c(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new E(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),n.prototype.blur=function(){this._core.blur()},n.prototype.focus=function(){this._core.focus()},n.prototype.resize=function(t,r){this._verifyIntegers(t,r),this._core.resize(t,r)},n.prototype.open=function(t){this._core.open(t)},n.prototype.attachCustomKeyEventHandler=function(t){this._core.attachCustomKeyEventHandler(t)},n.prototype.registerLinkMatcher=function(t,r,e){return this._checkProposedApi(),this._core.registerLinkMatcher(t,r,e)},n.prototype.deregisterLinkMatcher=function(t){this._checkProposedApi(),this._core.deregisterLinkMatcher(t)},n.prototype.registerLinkProvider=function(t){return this._checkProposedApi(),this._core.registerLinkProvider(t)},n.prototype.registerCharacterJoiner=function(t){return this._checkProposedApi(),this._core.registerCharacterJoiner(t)},n.prototype.deregisterCharacterJoiner=function(t){this._checkProposedApi(),this._core.deregisterCharacterJoiner(t)},n.prototype.registerMarker=function(t){return this._checkProposedApi(),this._verifyIntegers(t),this._core.addMarker(t)},n.prototype.addMarker=function(t){return this.registerMarker(t)},n.prototype.hasSelection=function(){return this._core.hasSelection()},n.prototype.select=function(t,r,e){this._verifyIntegers(t,r,e),this._core.select(t,r,e)},n.prototype.getSelection=function(){return this._core.getSelection()},n.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},n.prototype.clearSelection=function(){this._core.clearSelection()},n.prototype.selectAll=function(){this._core.selectAll()},n.prototype.selectLines=function(t,r){this._verifyIntegers(t,r),this._core.selectLines(t,r)},n.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},n.prototype.scrollLines=function(t){this._verifyIntegers(t),this._core.scrollLines(t)},n.prototype.scrollPages=function(t){this._verifyIntegers(t),this._core.scrollPages(t)},n.prototype.scrollToTop=function(){this._core.scrollToTop()},n.prototype.scrollToBottom=function(){this._core.scrollToBottom()},n.prototype.scrollToLine=function(t){this._verifyIntegers(t),this._core.scrollToLine(t)},n.prototype.clear=function(){this._core.clear()},n.prototype.write=function(t,r){this._core.write(t,r)},n.prototype.writeUtf8=function(t,r){this._core.write(t,r)},n.prototype.writeln=function(t,r){this._core.write(t),this._core.write(`\r
`,r)},n.prototype.paste=function(t){this._core.paste(t)},n.prototype.getOption=function(t){return this._core.optionsService.getOption(t)},n.prototype.setOption=function(t,r){this._core.optionsService.setOption(t,r)},n.prototype.refresh=function(t,r){this._verifyIntegers(t,r),this._core.refresh(t,r)},n.prototype.reset=function(){this._core.reset()},n.prototype.loadAddon=function(t){return this._addonManager.loadAddon(this,t)},Object.defineProperty(n,"strings",{get:function(){return g},enumerable:!1,configurable:!0}),n.prototype._verifyIntegers=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,i=t;e<i.length;e++){var s=i[e];if(s===1/0||isNaN(s)||s%1!=0)throw new Error("This API only accepts integers")}},n}();M.Terminal=_;var f=function(){function n(t,r){this._buffer=t,this.type=r}return n.prototype.init=function(t){return this._buffer=t,this},Object.defineProperty(n.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),n.prototype.getLine=function(t){var r=this._buffer.lines.get(t);if(r)return new v(r)},n.prototype.getNullCell=function(){return new H.CellData},n}(),E=function(){function n(t){var r=this;this._core=t,this._onBufferChange=new u.EventEmitter,this._normal=new f(this._core.buffers.normal,"normal"),this._alternate=new f(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return r._onBufferChange.fire(r.active)})}return Object.defineProperty(n.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),n}(),v=function(){function n(t){this._line=t}return Object.defineProperty(n.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),n.prototype.getCell=function(t,r){if(!(t<0||t>=this._line.length))return r?(this._line.loadCell(t,r),r):this._line.loadCell(t,new H.CellData)},n.prototype.translateToString=function(t,r,e){return this._line.translateToString(t,r,e)},n}(),o=function(){function n(t){this._core=t}return n.prototype.registerCsiHandler=function(t,r){return this._core.registerCsiHandler(t,function(e){return r(e.toArray())})},n.prototype.addCsiHandler=function(t,r){return this.registerCsiHandler(t,r)},n.prototype.registerDcsHandler=function(t,r){return this._core.registerDcsHandler(t,function(e,i){return r(e,i.toArray())})},n.prototype.addDcsHandler=function(t,r){return this.registerDcsHandler(t,r)},n.prototype.registerEscHandler=function(t,r){return this._core.registerEscHandler(t,r)},n.prototype.addEscHandler=function(t,r){return this.registerEscHandler(t,r)},n.prototype.registerOscHandler=function(t,r){return this._core.registerOscHandler(t,r)},n.prototype.addOscHandler=function(t,r){return this.registerOscHandler(t,r)},n}(),c=function(){function n(t){this._core=t}return n.prototype.register=function(t){this._core.unicodeService.register(t)},Object.defineProperty(n.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(r){this._core.unicodeService.activeVersion=r},enumerable:!1,configurable:!0}),n}()}(),z}()})}}]);
