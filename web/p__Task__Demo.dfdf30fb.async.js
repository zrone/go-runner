(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[315],{55943:function(R,l,e){"use strict";e.r(l);var S=e(81766),u=e(7935),d=e(51758),n=e(67294),M=e(17044),E=e(18701),y=e.n(E),i=e(9688),k=e.n(i),m=e(99625),b=e.n(m),f=e(27398),v=e(99963),a=e.n(v),D=function(P){var B=P.location.query.symbol,r=new E.Terminal({fontSize:14,disableStdin:!1,cursorStyle:"underline"}),O=new m.FitAddon;r.loadAddon(new i.WebLinksAddon),r.loadAddon(O);var g=(0,n.useState)(O),C=(0,d.Z)(g,1),A=C[0],L=(0,n.useState)(r),U=(0,d.Z)(L,1),o=U[0],I=function(){a()(".tml .ant-card-body").height(a()(".rightMenu").height()+"px"),a()(".tml #terminal").height(a()(".rightMenu").height()+"px");var t=new WebSocket(f.Z.wss);W(t),T(t),h(t),x(t)},T=function(t){t.onopen=function(){o.open(document.getElementById("terminal")),A.fit(),t.send(JSON.stringify({UUID:B}))}},W=function(t){t.onclose=function(){console.log("close socket")}},h=function(t){t.onerror=function(){console.log("socket \u94FE\u63A5\u5931\u8D25")}},x=function(t){t.onmessage=function(K){var c=JSON.parse(K.data),s=c.data.msg.trim()+`\r
`;switch(c.data.level){case"info":o.write("[1;37m"+s+"[0m");break;case"error":o.write("[1;31m"+s+"[0m");break;case"debug":o.write("[1;32m"+s+"[0m");break;default:o.write("[1;35m"+s+"[0m");break}}};return(0,n.useEffect)(function(){I()},[]),n.createElement(M.Z,{className:"tml"},n.createElement(u.Z,null,n.createElement("div",{id:"terminal"})))};l.default=D}}]);
